module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=50)}([function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t){e.exports=require("babel-runtime/core-js/get-iterator")},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("crypto-js")},function(e,t){e.exports=require("bignumber.js")},function(e,t){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t){e.exports=require("babel-runtime/core-js/map")},function(e,t){e.exports=require("elliptic")},function(e,t){e.exports=require("bip39")},function(e,t){e.exports=require("base64-url")},function(e,t){e.exports=require("sm.js")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t){e.exports=require("base-58")},function(e,t){e.exports=require("long")},function(e,t){e.exports=require("babel-runtime/helpers/get")},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("js-sha3")},function(e,t,r){const n=r(48);e.exports=n},function(e,t){e.exports=require("secure-random")},function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=require("babel-runtime/helpers/typeof")},function(e,t){e.exports=require("babel-runtime/helpers/defineProperty")},function(e,t,r){var n=r(42),a=r(33).Buffer,i=r(17),u=r(43),s=r(44),o=a.from("Nist256p1 seed","utf8"),c=78,l={private:76066276,public:76067358};function h(e){this.versions=e||l,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}function f(e,t,r){var n=a.allocUnsafe(c);n.writeUInt32BE(t,0),n.writeUInt8(e.depth,4);var i=e.depth?e.parentFingerprint:0;return n.writeUInt32BE(i,5),n.writeUInt32BE(e.index,9),e.chainCode.copy(n,13),r.copy(n,45),n}function d(e){var t=i.createHash("sha256").update(e).digest();return i.createHash("rmd160").update(t).digest()}Object.defineProperty(h.prototype,"fingerprint",{get:function(){return this._fingerprint}}),Object.defineProperty(h.prototype,"identifier",{get:function(){return this._identifier}}),Object.defineProperty(h.prototype,"pubKeyHash",{get:function(){return this.identifier}}),Object.defineProperty(h.prototype,"privateKey",{get:function(){return this._privateKey},set:function(e){n.equal(e.length,32,"Private key must be 32 bytes."),n(!0===s.privateKeyVerify(e),"Invalid private key"),this._privateKey=e,this._publicKey=s.publicKeyCreate(e,!0),this._identifier=d(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}}),Object.defineProperty(h.prototype,"publicKey",{get:function(){return this._publicKey},set:function(e){n(33===e.length||65===e.length,"Public key must be 33 or 65 bytes."),n(!0===s.publicKeyVerify(e),"Invalid public key"),this._publicKey=s.publicKeyConvert(e,!0),this._identifier=d(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null}}),Object.defineProperty(h.prototype,"privateExtendedKey",{get:function(){return this._privateKey?u.encode(f(this,this.versions.private,a.concat([a.alloc(1,0),this.privateKey]))):null}}),Object.defineProperty(h.prototype,"publicExtendedKey",{get:function(){return u.encode(f(this,this.versions.public,this.publicKey))}}),h.prototype.derive=function(e){if("m"===e||"M"===e||"m'"===e||"M'"===e)return this;var t=this;return e.split("/").forEach(function(e,r){if(0!==r){var a=e.length>1&&"'"===e[e.length-1],i=parseInt(e,10);n(i<2147483648,"Invalid index"),a&&(i+=2147483648),t=t.deriveChild(i)}else n(/^[mM]{1}/.test(e),'Path must start with "m" or "M"')}),t},h.prototype.deriveChild=function(e){var t,r=e>=2147483648,u=a.allocUnsafe(4);if(u.writeUInt32BE(e,0),r){n(this.privateKey,"Could not derive hardened child key");var o=this.privateKey,c=a.alloc(1,0);o=a.concat([c,o]),t=a.concat([o,u])}else t=a.concat([this.publicKey,u]);var l=i.createHmac("sha512",this.chainCode).update(t).digest(),f=l.slice(0,32),d=l.slice(32),v=new h(this.versions);if(this.privateKey)try{v.privateKey=s.privateKeyTweakAdd(this.privateKey,f)}catch(t){return this.derive(e+1)}else try{v.publicKey=s.publicKeyTweakAdd(this.publicKey,f,!0)}catch(t){return this.derive(e+1,r)}return v.chainCode=d,v.depth=this.depth+1,v.parentFingerprint=this.fingerprint,v.index=e,v},h.prototype.sign=function(e){return s.sign(e,this.privateKey).signature},h.prototype.verify=function(e,t){return s.verify(e,t,this.publicKey)},h.prototype.toJSON=function(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}},h.fromMasterSeed=function(e,t){var r=i.createHmac("sha512",o).update(e).digest(),n=r.slice(0,32),a=r.slice(32),u=new h(t);return u.chainCode=a,u.privateKey=n,u},h.fromExtendedKey=function(e,t){var r=new h(t=t||l),a=u.decode(e),i=a.readUInt32BE(0);n(i===t.private||i===t.public,"Version mismatch: does not match private or public"),r.depth=a.readUInt8(4),r.parentFingerprint=a.readUInt32BE(5),r.index=a.readUInt32BE(9),r.chainCode=a.slice(13,45);var s=a.slice(45);return 0===s.readUInt8(0)?(n(i===t.private,"Version mismatch: version does not match private"),r.privateKey=s.slice(1)):(n(i===t.public,"Version mismatch: version does not match public"),r.publicKey=s),r},h.fromJSON=function(e){return h.fromExtendedKey(e.xpriv)},h.HARDENED_OFFSET=2147483648,e.exports=h},function(e,t){e.exports=require("wif")},function(e,t){e.exports=require("pkcs7")},function(e,t){e.exports=require("safe-buffer")},function(e,t){e.exports=require("babel-runtime/core-js/array/from")},function(e,t){e.exports=require("babel-runtime/core-js/number/is-safe-integer")},function(e,t){e.exports=require("scrypt-async")},function(e,t){e.exports=require("milagro-crypto-js")},function(e,t){e.exports=require("babel-runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("websocket-as-promised")},function(e,t){e.exports=require("babel-runtime/helpers/objectWithoutProperties")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("assert")},function(e,t){e.exports=require("coinstring")},function(e,t,r){"use strict";var n=r(33).Buffer,a=r(45),i=r(46),u=r(13).ec,s=r(47),o=new u("p256"),c=o.curve;function l(e){return o.keyFromPublic(e)}t.privateKeyVerify=function(e){var t=new i(e);return t.cmp(c.n)<0&&!t.isZero()},t.privateKeyExport=function(e,t){var r=new i(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(s.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(o.keyFromPrivate(e).getPublic(t,!0))},t.privateKeyNegate=function(e){var t=new i(e);return t.isZero()?n.alloc(32):c.n.sub(t).umod(c.n).toArrayLike(n,"be",32)},t.privateKeyModInverse=function(e){var t=new i(e);if(t.cmp(c.n)>=0||t.isZero())throw new Error(s.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(c.n).toArrayLike(n,"be",32)},t.privateKeyTweakAdd=function(e,t){var r=new i(t);if(r.cmp(c.n)>=0)throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new i(e)),r.cmp(c.n)>=0&&r.isub(c.n),r.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},t.privateKeyTweakMul=function(e,t){var r=new i(t);if(r.cmp(c.n)>=0||r.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new i(e)),r.cmp(c.n)&&(r=r.umod(c.n)),r.toArrayLike(n,"be",32)},t.publicKeyCreate=function(e,t){var r=new i(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(s.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(o.keyFromPrivate(e).getPublic(t,!0))},t.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},t.publicKeyVerify=function(e){return null!==l(e)},t.publicKeyTweakAdd=function(e,t,r){var a=l(e);if(null===a)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(c.n)>=0)throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(c.g.mul(t).add(a.pub).encode(!0,r))},t.publicKeyTweakMul=function(e,t,r){var a=l(e);if(null===a)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(c.n)>=0||t.isZero())throw new Error(s.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(a.pub.mul(t).encode(!0,r))},t.publicKeyCombine=function(e,t){for(var r=new Array(e.length),a=0;a<e.length;++a)if(r[a]=l(e[a]),null===r[a])throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0].pub,u=1;u<r.length;++u)i=i.add(r[u].pub);if(i.isInfinity())throw new Error(s.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(i.encode(!0,t))},t.signatureNormalize=function(e){var t=new i(e.slice(0,32)),r=new i(e.slice(32,64));if(t.cmp(c.n)>=0||r.cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);var a=n.from(e);return 1===r.cmp(o.nh)&&c.n.sub(r).toArrayLike(n,"be",32).copy(a,32),a},t.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new i(t).cmp(c.n)>=0||new i(r).cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},t.signatureImport=function(e){var t=new i(e.r);t.cmp(c.n)>=0&&(t=new i(0));var r=new i(e.s);return r.cmp(c.n)>=0&&(r=new i(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},t.sign=function(e,t,r,a){if("function"==typeof r){var u=r;r=function(r){var o=u(e,t,null,a,r);if(!n.isBuffer(o)||32!==o.length)throw new Error(s.ECDSA_SIGN_FAIL);return new i(o)}}var l=new i(t);if(l.cmp(c.n)>=0||l.isZero())throw new Error(s.ECDSA_SIGN_FAIL);var h=o.sign(e,t,{canonical:!0,k:r,pers:a});return{signature:n.concat([h.r.toArrayLike(n,"be",32),h.s.toArrayLike(n,"be",32)]),recovery:h.recoveryParam}},t.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},a=new i(n.r),u=new i(n.s);if(a.cmp(c.n)>=0||u.cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);if(1===u.cmp(o.nh)||a.isZero()||u.isZero())return!1;var h=l(r);if(null===h)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return o.verify(e,n,{x:h.pub.x,y:h.pub.y})},t.recover=function(e,t,r,a){var u={r:t.slice(0,32),s:t.slice(32,64)},l=new i(u.r),h=new i(u.s);if(l.cmp(c.n)>=0||h.cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||h.isZero())throw new Error;var f=o.recoverPubKey(e,u,r);return n.from(f.encode(!0,a))}catch(e){throw new Error(s.ECDSA_RECOVER_FAIL)}},t.ecdh=function(e,r){var n=t.ecdhUnsafe(e,r,!0);return a("sha256").update(n).digest()},t.ecdhUnsafe=function(e,t,r){var a=l(e);if(null===a)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);var u=new i(t);if(u.cmp(c.n)>=0||u.isZero())throw new Error(s.ECDH_FAIL);return n.from(a.pub.mul(u).encode(!0,r))}},function(e,t){e.exports=require("create-hash")},function(e,t){e.exports=require("bn.js")},function(e){e.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}},function(e,t,r){"use strict";const n=r(49),a=function(e,t){if(!(this instanceof a))throw new TypeError("Constructor WebSocket requires 'new'.");this.url=e,this.protocol=t,this.readyState=this.CONNECTING,this.bufferedAmount=0,this.onopen=null,this.onclose=null,this.onerror=null,this.onmessage=null;const r=new n(e,t),i={open:[],close:[],message:[],error:[]};this.addEventListener=((e,t)=>{const r=i[e];Array.isArray(r)&&(r.some(e=>e===t)||r.push(t))}),this.removeEventListener=((e,t)=>{const r=i[e];Array.isArray(r)&&(i[e]=r.filter(e=>e!==t))}),this.send=(e=>{r.send(e,e=>{e&&(i.error.forEach(t=>t(e)),this.onerror(e))})}),this.close=(()=>{r.close(),this.readyState===this.CONNECTING&&process.nextTick(()=>{r.emit("close")}),this.readyState=this.CLOSING}),r.addEventListener("open",()=>{this.readyState=this.OPEN,i.open.forEach(e=>e()),this.onopen&&this.onopen()}),r.addEventListener("close",e=>{this.readyState=this.CLOSED,i.close.forEach(t=>t(e)),this.onclose&&this.onclose()}),r.addEventListener("message",e=>{const t=new function(e,t){this.bubbles=!1,this.cancelable=!1,this.cancelBubble=!1,this.currentTarget=this,this.data=t,this.eventPhase=0,this.srcElement=this,this.target=this,this.timeStamp=Date.now(),this.type="message"}(this,e.data);i.message.forEach(e=>e(t)),this.onmessage&&this.onmessage(t)}),r.addEventListener("error",e=>{this.close(),i.error.forEach(t=>t(e)),this.onerror&&this.onerror(e)})};a.prototype.CONNECTING=0,a.prototype.OPEN=1,a.prototype.CLOSING=2,a.prototype.CLOSED=3,a.CONNECTING=0,a.OPEN=1,a.CLOSING=2,a.CLOSED=3,e.exports=a},function(e,t){e.exports=require("ws")},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"ADDR_VERSION",function(){return P}),r.d(n,"DEFAULT_SCRYPT",function(){return R}),r.d(n,"OEP_HEADER",function(){return _}),r.d(n,"OEP_FLAG",function(){return C}),r.d(n,"WEBVIEW_SCHEME",function(){return B}),r.d(n,"DEFAULT_ALGORITHM",function(){return N}),r.d(n,"DEFAULT_SM2_ID",function(){return D}),r.d(n,"TEST_NODE",function(){return H}),r.d(n,"MAIN_NODE",function(){return O}),r.d(n,"HTTP_REST_PORT",function(){return L}),r.d(n,"HTTP_WS_PORT",function(){return z}),r.d(n,"HTTP_JSON_PORT",function(){return K}),r.d(n,"REST_API",function(){return U}),r.d(n,"TST_NETWORK",function(){return M}),r.d(n,"TEST_TST_URL",function(){return V}),r.d(n,"MAIN_TST_URL",function(){return G}),r.d(n,"TOKEN_TYPE",function(){return F}),r.d(n,"DEFAULT_GAS_LIMIT",function(){return W}),r.d(n,"NATIVE_INVOKE_NAME",function(){return J}),r.d(n,"TX_MAX_SIG_SIZE",function(){return q}),r.d(n,"TST_BIP44_PATH",function(){return j}),r.d(n,"UNBOUND_GENERATION_AMOUNT",function(){return Y}),r.d(n,"UNBOUND_TIME_INTERVAL",function(){return Q}),r.d(n,"TST_TOTAL_SUPPLY",function(){return X}),r.d(n,"GENESIS_BLOCK_TIMESTAMP",function(){return Z});var a={};r.r(a),r.d(a,"hexstring2ab",function(){return pe}),r.d(a,"ab2hexstring",function(){return ye}),r.d(a,"ab2str",function(){return me}),r.d(a,"str2ab",function(){return ge}),r.d(a,"str2hexstr",function(){return we}),r.d(a,"hexstr2str",function(){return Ae}),r.d(a,"hex2VarBytes",function(){return Se}),r.d(a,"str2VarBytes",function(){return ke}),r.d(a,"bool2VarByte",function(){return Ee}),r.d(a,"hexXor",function(){return be}),r.d(a,"num2hexstring",function(){return xe}),r.d(a,"num2VarInt",function(){return Ie}),r.d(a,"reverseHex",function(){return Te}),r.d(a,"bigIntFromBytes",function(){return Pe}),r.d(a,"bigIntToBytes",function(){return Re}),r.d(a,"StringReader",function(){return _e}),r.d(a,"EventEmitter",function(){return Ce}),r.d(a,"sendBackResult2Native",function(){return Be}),r.d(a,"axiosPost",function(){return Ne}),r.d(a,"now",function(){return De}),r.d(a,"sha256",function(){return He}),r.d(a,"ripemd160",function(){return Oe}),r.d(a,"hash160",function(){return Le}),r.d(a,"generateRandomArray",function(){return ze}),r.d(a,"randomBytes",function(){return Ke}),r.d(a,"generateMnemonic",function(){return Ue}),r.d(a,"parseMnemonic",function(){return Me}),r.d(a,"varifyPositiveInt",function(){return Ve}),r.d(a,"isBase64",function(){return Ge}),r.d(a,"isHexString",function(){return Fe}),r.d(a,"unboundDeadline",function(){return We}),r.d(a,"calcUnboundTsg",function(){return Je});var i={};r.r(i),r.d(i,"encryptWithCtr",function(){return Bt}),r.d(i,"decryptWithCtr",function(){return Nt}),r.d(i,"checkCtrDecrypted",function(){return Dt}),r.d(i,"encryptWithEcb",function(){return Ht}),r.d(i,"decryptWithEcb",function(){return Ot}),r.d(i,"checkEcbDecrypted",function(){return Lt}),r.d(i,"encryptWithGcm",function(){return zt}),r.d(i,"decryptWithGcm",function(){return Kt});var u={};r.r(u),r.d(u,"Address",function(){return St}),r.d(u,"KeyType",function(){return Ye}),r.d(u,"CurveLabel",function(){return rt}),r.d(u,"SignatureScheme",function(){return je}),r.d(u,"KeyParameters",function(){return at}),r.d(u,"PrivateKey",function(){return Gt}),r.d(u,"registerKeyDeserializer",function(){return Jt}),r.d(u,"PublicKey",function(){return ut}),r.d(u,"PublicKeyStatus",function(){return st}),r.d(u,"Signature",function(){return Mt}),r.d(u,"Issuer",function(){return Xt}),r.d(u,"User",function(){return Zt}),r.d(u,"Ecies",function(){return ir});var s={};r.r(s),r.d(s,"pushBool",function(){return Br}),r.d(s,"pushInt",function(){return Nr}),r.d(s,"pushBigNum",function(){return Dr}),r.d(s,"getStructBytes",function(){return Hr}),r.d(s,"getMapBytes",function(){return Or}),r.d(s,"pushMap",function(){return Lr}),r.d(s,"pushParam",function(){return zr}),r.d(s,"serializeAbiFunction",function(){return Kr}),r.d(s,"convertArray",function(){return Ur}),r.d(s,"convertMap",function(){return Mr}),r.d(s,"deserializeItem",function(){return Vr}),r.d(s,"createCodeParamsScript",function(){return Fr}),r.d(s,"buildSmartContractParam",function(){return Wr}),r.d(s,"buildWasmContractParam",function(){return Jr}),r.d(s,"writeUint16",function(){return qr}),r.d(s,"writeUint32",function(){return jr}),r.d(s,"writeUint64",function(){return Yr}),r.d(s,"writeVarBytes",function(){return Qr}),r.d(s,"writeString",function(){return Xr}),r.d(s,"writeAddress",function(){return Zr}),r.d(s,"writeI128",function(){return $r}),r.d(s,"writeBool",function(){return en}),r.d(s,"writeVarUint",function(){return tn});var o={};r.r(o),r.d(o,"TST_CONTRACT",function(){return fn}),r.d(o,"TSG_CONTRACT",function(){return dn}),r.d(o,"getTokenContract",function(){return vn}),r.d(o,"verifyAmount",function(){return pn}),r.d(o,"makeTransferTx",function(){return yn}),r.d(o,"makeTransferStateTx",function(){return mn}),r.d(o,"makeTransferToMany",function(){return gn}),r.d(o,"makeWithdrawTsgTx",function(){return wn}),r.d(o,"makeQueryAllowanceTx",function(){return An}),r.d(o,"makeQueryBalanceTx",function(){return Sn}),r.d(o,"deserializeTransferTx",function(){return kn});var c={};r.r(c),r.d(c,"TSTID_CONTRACT",function(){return En}),r.d(c,"buildRegisterTstidTx",function(){return xn}),r.d(c,"buildRegIdWithAttributes",function(){return In}),r.d(c,"buildAddAttributeTx",function(){return Tn}),r.d(c,"buildRemoveAttributeTx",function(){return Pn}),r.d(c,"buildGetAttributesTx",function(){return Rn}),r.d(c,"buildGetDDOTx",function(){return _n}),r.d(c,"buildAddControlKeyTx",function(){return Cn}),r.d(c,"buildRemoveControlKeyTx",function(){return Bn}),r.d(c,"buildGetPublicKeysTx",function(){return Nn}),r.d(c,"buildAddRecoveryTx",function(){return Dn}),r.d(c,"buildChangeRecoveryTx",function(){return Hn}),r.d(c,"buildGetPublicKeyStateTx",function(){return On});var l={};r.r(l),r.d(l,"Default_params",function(){return Ln}),r.d(l,"signTransaction",function(){return zn}),r.d(l,"signTransactionAsync",function(){return Kn}),r.d(l,"addSign",function(){return Un}),r.d(l,"signTx",function(){return Vn}),r.d(l,"makeInvokeTransaction",function(){return Gn}),r.d(l,"buildWasmVmInvokeCode",function(){return Fn}),r.d(l,"makeWasmVmInvokeTransaction",function(){return Wn}),r.d(l,"makeDeployCodeTransaction",function(){return Jn}),r.d(l,"buildTxParam",function(){return qn}),r.d(l,"buildRpcParam",function(){return jn}),r.d(l,"buildRestfulParam",function(){return Yn}),r.d(l,"sendRawTxRestfulUrl",function(){return Qn}),r.d(l,"transferStringParameter",function(){return Xn}),r.d(l,"transformMapParameter",function(){return Zn}),r.d(l,"transformArrayParameter",function(){return $n}),r.d(l,"transformParameter",function(){return ea}),r.d(l,"buildParamsByJson",function(){return ta}),r.d(l,"makeTransactionsByJson",function(){return ra}),r.d(l,"buildNativeTxFromJson",function(){return na});var h={};r.r(h),r.d(h,"InvocationTransaction",function(){return Ci}),r.d(h,"NeoRpc",function(){return Bi}),r.d(h,"Program",function(){return Ni}),r.d(h,"SmartContract",function(){return Di}),r.d(h,"TransactionInput",function(){return Hi}),r.d(h,"TransactionOutput",function(){return Oi}),r.d(h,"TransactionNeo",function(){return _i});var f={};r.r(f),r.d(f,"Oep8State",function(){return zi}),r.d(f,"TransferFrom",function(){return Ki}),r.d(f,"Oep8TxBuilder",function(){return tu});var d={};r.r(d),r.d(d,"formatBigNumParameter",function(){return vu}),r.d(d,"Oep4State",function(){return pu}),r.d(d,"Oep4TxBuilder",function(){return yu});var v={};r.r(v),r.d(v,"makeRegisterCandidateTx",function(){return Su}),r.d(v,"makeUnregisterCandidateTx",function(){return ku}),r.d(v,"makeApproveCandidateTx",function(){return Eu}),r.d(v,"makeRejectCandidateTx",function(){return bu}),r.d(v,"makeVoteForPeerTx",function(){return xu}),r.d(v,"makeUnvoteForPeerTx",function(){return Iu}),r.d(v,"makeWithdrawTx",function(){return Tu}),r.d(v,"makeQuitNodeTx",function(){return Pu}),r.d(v,"makeChangeAuthorizationTx",function(){return Ru}),r.d(v,"makeSetPeerCostTx",function(){return _u}),r.d(v,"makeWithdrawFeeTx",function(){return Cu}),r.d(v,"makeAuthorizeForPeerTx",function(){return Bu}),r.d(v,"makeUnauthorizeForPeerTx",function(){return Nu}),r.d(v,"makeAddInitPosTx",function(){return Du}),r.d(v,"makeReduceInitPosTx",function(){return Hu}),r.d(v,"makeWithdrawPeerUnboundTsgTx",function(){return Ou}),r.d(v,"getAttributes",function(){return Lu}),r.d(v,"getSplitFeeAddress",function(){return zu}),r.d(v,"getAuthorizeInfo",function(){return Ku}),r.d(v,"getGovernanceView",function(){return Uu}),r.d(v,"getPeerPoolMap",function(){return Mu}),r.d(v,"getGlobalParam",function(){return Vu}),r.d(v,"getTotalStake",function(){return Gu}),r.d(v,"getPeerUnboundTsg",function(){return Fu}),r.d(v,"getConfiguration",function(){return Wu}),r.d(v,"GovernanceView",function(){return Ju}),r.d(v,"PeerPoolItem",function(){return qu}),r.d(v,"PeerAttributes",function(){return ju}),r.d(v,"SplitFeeAddress",function(){return Yu}),r.d(v,"AuthorizeInfo",function(){return Qu}),r.d(v,"GlobalParam",function(){return Xu}),r.d(v,"TotalStake",function(){return Zu}),r.d(v,"Configuration",function(){return $u});var p={};r.r(p),r.d(p,"Transfers",function(){return es}),r.d(p,"TokenTransfer",function(){return ts}),r.d(p,"State",function(){return rs}),r.d(p,"Contract",function(){return ns}),r.d(p,"TransferFrom",function(){return as});var y={};r.r(y),r.d(y,"Oep5Param",function(){return is}),r.d(y,"Oep5TxBuilder",function(){return ws});var m,g,w=r(1),A=r.n(w),S=r(0),k=r.n(S),E=r(18),b=r.n(E),x=r(2),I=r.n(x),T=r(14),P="17",R={cost:4096,blockSize:8,parallel:8,size:64},_="0142",C="e0",B="Tst",N={algorithm:"ECDSA",parameters:{curve:"P-256"}},D="1234567812345678",H="dapp4.tesra.me",O="dapp3.tesra.me",L="25770",z="25771",K="25768",U={getBalance:"/api/v1/balance",sendRawTx:"/api/v1/transaction",getMerkleProof:"/api/v1/merkleproof"},M={MAIN:"MainNet",TEST:"TestNet"},V={SOCKET_URL:"ws://"+H+":"+z,RPC_URL:"http://"+H+":"+K,REST_URL:"http://"+H+":"+L,sendRawTxByRestful:"http://"+H+":"+L+U.sendRawTx},G={SOCKET_URL:"ws://"+O+":"+z,RPC_URL:"http://"+O+":"+K+"/",REST_URL:"http://"+O+":"+L+"/",sendRawTxByRestful:"http://"+H+":"+L+U.sendRawTx},F={TST:"TST",TSG:"TSG"},W=3e4,J="Tesra.Native.Invoke",q=16,j="m/44'/1024'/0'/0/0",Y=[5,4,3,3,2,2,2,1,1,1,1,1,1,1,1,1,1,1],Q=31536e3,X=1e9,Z=1530316800,$=r(4),ee=r.n($),te=r(19),re=r(7);!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.SESSION_EXPIRED=41001]="SESSION_EXPIRED",e[e.SERVICE_CEILING=41002]="SERVICE_CEILING",e[e.ILLEGAL_DATAFORMAT=41003]="ILLEGAL_DATAFORMAT",e[e.INVALID_VERSION=41004]="INVALID_VERSION",e[e.INVALID_METHOD=42001]="INVALID_METHOD",e[e.INVALID_PARAMS=42002]="INVALID_PARAMS",e[e.INVALID_TRANSACTION=43001]="INVALID_TRANSACTION",e[e.INVALID_ASSET=43002]="INVALID_ASSET",e[e.INVALID_BLOCK=43003]="INVALID_BLOCK",e[e.UNKNOWN_TRANSACTION=44001]="UNKNOWN_TRANSACTION",e[e.UNKNOWN_ASSET=44002]="UNKNOWN_ASSET",e[e.UNKNOWN_BLOCK=44003]="UNKNOWN_BLOCK",e[e.UNKNWN_CONTRACT=44004]="UNKNWN_CONTRACT",e[e.INTERNAL_ERROR=45001]="INTERNAL_ERROR",e[e.SMARTCODE_ERROR=47001]="SMARTCODE_ERROR",e[e.UNKNOWN_TSTID=51e3]="UNKNOWN_TSTID",e[e.NETWORK_ERROR=52e3]="NETWORK_ERROR",e[e.Decrypto_ERROR=53e3]="Decrypto_ERROR",e[e.INVALID_ADDR=53001]="INVALID_ADDR",e[e.PreExec_ERROR=54e3]="PreExec_ERROR"}(m||(m={})),function(e){e[e.PUSH0=0]="PUSH0",e[e.PUSHF=0]="PUSHF",e[e.PUSHBYTES1=1]="PUSHBYTES1",e[e.PUSHBYTES75=75]="PUSHBYTES75",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e.PUSHM1=79]="PUSHM1",e[e.PUSH1=81]="PUSH1",e[e.PUSHT=81]="PUSHT",e[e.PUSH2=82]="PUSH2",e[e.PUSH3=83]="PUSH3",e[e.PUSH4=84]="PUSH4",e[e.PUSH5=85]="PUSH5",e[e.PUSH6=86]="PUSH6",e[e.PUSH7=87]="PUSH7",e[e.PUSH8=88]="PUSH8",e[e.PUSH9=89]="PUSH9",e[e.PUSH10=90]="PUSH10",e[e.PUSH11=91]="PUSH11",e[e.PUSH12=92]="PUSH12",e[e.PUSH13=93]="PUSH13",e[e.PUSH14=94]="PUSH14",e[e.PUSH15=95]="PUSH15",e[e.PUSH16=96]="PUSH16",e[e.NOP=97]="NOP",e[e.JMP=98]="JMP",e[e.JMPIF=99]="JMPIF",e[e.JMPIFNOT=100]="JMPIFNOT",e[e.CALL=101]="CALL",e[e.RET=102]="RET",e[e.APPCALL=103]="APPCALL",e[e.SYSCALL=104]="SYSCALL",e[e.TAILCALL=105]="TAILCALL",e[e.DUPFROMALTSTACK=106]="DUPFROMALTSTACK",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e.XDROP=109]="XDROP",e[e.XSWAP=114]="XSWAP",e[e.XTUCK=115]="XTUCK",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.INC=139]="INC",e[e.DEC=140]="DEC",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e.NZ=146]="NZ",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.SHL=152]="SHL",e[e.SHR=153]="SHR",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LT=159]="LT",e[e.GT=160]="GT",e[e.LTE=161]="LTE",e[e.GTE=162]="GTE",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.ARRAYSIZE=192]="ARRAYSIZE",e[e.PACK=193]="PACK",e[e.UNPACK=194]="UNPACK",e[e.PICKITEM=195]="PICKITEM",e[e.SETITEM=196]="SETITEM",e[e.NEWARRAY=197]="NEWARRAY",e[e.NEWSTRUCT=198]="NEWSTRUCT",e[e.NEWMAP=199]="NEWMAP",e[e.APPEND=200]="APPEND",e[e.REVERSE=201]="REVERSE",e[e.REMOVE=202]="REMOVE",e[e.HASKEY=203]="HASKEY",e[e.KEYS=204]="KEYS",e[e.VALUES=205]="VALUES",e[e.THROW=240]="THROW",e[e.THROWIFNOT=241]="THROWIFNOT"}(g||(g={}));var ne=g,ae=r(13),ie=r(16),ue=r(8),se=r(20),oe=r(34),ce=r.n(oe),le=r(35),he=r.n(le),fe=r(6),de=r.n(fe),ve=r(25);function pe(e){for(var t=[];e.length>=2;)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t}function ye(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++){var a=r[n].toString(16);t+=a=0===a.length?"00":1===a.length?"0"+a:a}return t}function me(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function ge(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0,a=e.length;n<a;n++)r[n]=e.charCodeAt(n);return t}function we(e){return ye(ge(e))}function Ae(e){return me(pe(e))}function Se(e){var t="";return t+=Ie(e.length/2),t+=e}function ke(e){var t="",r=we(e);return t+=Ie(r.length/2),t+=r}function Ee(e){return e?"01":"00"}function be(e,t){if(e.length!==t.length)throw new Error("strings are disparate lengths");if(e.length%2!=0)throw new Error("strings must be hex");for(var r=new ArrayBuffer(e.length/2),n=new Uint8Array(r),a=0;a<e.length;a+=2)n[a/2]=parseInt(e.substr(a,2),16)^parseInt(t.substr(a,2),16);return ye(r)}var xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<0)throw new RangeError("num must be >=0");if(t%1!=0)throw new Error("size must be a whole integer");if(!he()(e))throw new RangeError("num ("+e+") must be a safe integer");t*=2;var n=e.toString(16);return n=n.length%t==0?n:("0".repeat(t)+n).substring(n.length),r&&(n=Te(n)),n},Ie=function(e){return e<253?xe(e):e<=65535?"fd"+xe(e,2,!0):e<=4294967295?"fe"+xe(e,4,!0):"ff"+xe(e,8,!0)},Te=function(e){if(e.length%2!=0)throw new Error("Incorrect Length: "+e);for(var t="",r=e.length-2;r>=0;r-=2)t+=e.substr(r,2);return t};function Pe(e){var t=Buffer.from(e,"hex"),r=ce()(t.subarray(0));return r[r.length-1]>>7==1&&(r=r.concat(Array(8-r.length).fill(255))),se.fromBytesLE(r)}function Re(e){for(var t=e.toBytesLE(),r=e.neg().toBytesLE(),n=void 0,a=n=e.isNegative()?255:0,i=0,u=t.length-1;u>=0;u--)if(t[u]!==n){a=e.isNegative()?r[u]:t[u],i=u+1;break}return t=t.slice(0,i),a>>7==1&&t.push(e.isNegative()?255:0),new Buffer(t).toString("hex")}var _e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(A()(this,e),t.length%2!=0)throw new Error("Param's length is not even.");this.str=t,this.pos=0,this.size=this.str.length/2}return k()(e,[{key:"isEmpty",value:function(){return this.pos>=this.str.length}},{key:"read",value:function(e){if(this.isEmpty())throw new Error("StringReader reached the end.");var t=this.str.substr(this.pos,2*e);return this.pos+=2*e,t}},{key:"unreadBytes",value:function(e){if(this.pos-2*e<0)throw new Error("Can not unread too many bytes.");this.pos-=2*e}},{key:"readNullTerminated",value:function(){var e=this.str.indexOf("00",this.pos);if(-1===e)throw new Error("No ending NULL found");var t=this.str.substring(this.pos,e);return this.pos=e+2,t}},{key:"readNextByte",value:function(){return this.read(1)}},{key:"readNextBytes",value:function(){var e=this.readNextLen();return 0===e?"":this.read(e)}},{key:"readNextLen",value:function(){var e=parseInt(this.read(1),16);return 253===e?e=parseInt(Te(this.read(2)),16):254===e?e=parseInt(Te(this.read(4)),16):255===e&&(e=parseInt(Te(this.read(8)),16)),e}},{key:"readVarUint",value:function(){return this.readNextLen()}},{key:"readUint8",value:function(){return parseInt(Te(this.read(1)),16)}},{key:"readUint16",value:function(){return parseInt(Te(this.read(2)),16)}},{key:"readUint32",value:function(){return parseInt(Te(this.read(4)),16)}},{key:"readUint64",value:function(){return parseInt(Te(this.read(8)),16)}},{key:"readInt",value:function(){return parseInt(Te(this.read(4)),16)}},{key:"readLong",value:function(){return parseInt(Te(this.read(8)),16)}},{key:"readBoolean",value:function(){return 0!==parseInt(this.read(1),16)}}]),e}(),Ce=function(){function e(){A()(this,e),this.handlers={}}return k()(e,[{key:"on",value:function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t)}},{key:"trigger",value:function(e,t){if(this.handlers[e]instanceof Array)for(var r=this.handlers[e],n=0,a=r.length;n<a;n++)r[n](t)}},{key:"off",value:function(e){delete this.handlers[e]}}]),e}(),Be=function(e,t){window&&window.prompt&&window.prompt(B+"://"+t+"?params="+e)},Ne=function(e,t){return de.a.post(e,t).then(function(e){return console.log("axios res:"+e),e}).catch(function(e){return console.log("axios res:"+I()(e)),e})};function De(){return Math.floor(Date.now()/1e3)}function He(e){var t=re.enc.Hex.parse(e);return re.SHA256(t).toString()}function Oe(e){var t=re.enc.Hex.parse(e);return re.RIPEMD160(t).toString()}function Le(e){return Oe(He(e))}function ze(e){return ve(e)}function Ke(e){return ye(ze(e))}function Ue(){var e=ye(ze(arguments.length>0&&void 0!==arguments[0]?arguments[0]:16));return T.entropyToMnemonic(e)}function Me(e){return T.mnemonicToEntropy(e)}function Ve(e){if(!/^[1-9]\d*$/.test(e.toString()))throw m.INVALID_PARAMS}function Ge(e){return Buffer.from(e,"base64").toString("base64")===e}function Fe(e){return/^[0-9a-fA-F]+$/.test(e)&&e.length%2==0}function We(){var e=0,t=!0,r=!1,n=void 0;try{for(var a,i=ee()(Y);!(t=(a=i.next()).done);t=!0){e+=a.value}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}e*=Q;var u=Y.length;if(1!==Y[u-1]||!(e-Q<X&&X<=e))throw new Error("incompatible constants setting");return Q*u-(e-X)}function Je(e,t,r){var n=0;if(t>=r)return 0;var a=We();if(t<a){var i=Math.floor(t/Q),u=t%Q;r>=a&&(r=a);for(var s=Math.floor(r/Q),o=r%Q;i<s;)n+=(Q-u)*Y[i],i++,u=0;n+=(o-u)*Y[i]}return n*e}var qe=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(A()(this,e),!new ue.BigNumber(t).isInteger())throw new Error(String(m.INVALID_PARAMS));this.value=t,this.ledgerCompatible=r}return k()(e,null,[{key:"fromHexstr",value:function(t){return new e(Pe(t).toString())}}]),k()(e,[{key:"toHexstr",value:function(){var e=Re(se.fromValue(this.value));return this.ledgerCompatible&&(e.length%2!=0||e.length<16)&&(e+="0".repeat(16-e.length)),e}}]),e}(),je=function(){function e(t,r,n){A()(this,e),this.label=t,this.hex=r,this.labelJWS=n,e.values.push(this)}return k()(e,null,[{key:"fromHex",value:function(t){var r=e.values.find(function(e){return e.hex===t});if(void 0===r)throw new Error("Enum value not found");return r}},{key:"fromLabel",value:function(t){var r=e.values.find(function(e){return e.label===t});if(void 0===r)throw new Error("Enum value not found");return r}},{key:"fromLabelJWS",value:function(t){var r=e.values.find(function(e){return e.labelJWS===t});if(void 0===r)throw new Error("Enum value not found");return r}}]),e}();je.values=[],je.ECDSAwithSHA224=new je("SHA224withECDSA",0,"ES224"),je.ECDSAwithSHA256=new je("SHA256withECDSA",1,"ES256"),je.ECDSAwithSHA384=new je("SHA384withECDSA",2,"ES384"),je.ECDSAwithSHA512=new je("SHA512withECDSA",3,"ES512"),je.ECDSAwithSHA3_224=new je("SHA3-224withECDSA",4,"ES3-224"),je.ECDSAwithSHA3_256=new je("SHA3-256withECDSA",5,"ES3-256"),je.ECDSAwithSHA3_384=new je("SHA3-384withECDSA",6,"ES3-384"),je.ECDSAwithSHA3_512=new je("SHA3-512withECDSA",7,"ES3-512"),je.ECDSAwithRIPEMD160=new je("RIPEMD160withECDSA",8,"ER160"),je.SM2withSM3=new je("SM3withSM2",9,"SM"),je.EDDSAwithSHA512=new je("SHA512withEdDSA",10,"EDS512");var Ye=function(){function e(t,r,n){A()(this,e),this.label=t,this.hex=r,this.defaultSchema=n,e.values.push(this)}return k()(e,null,[{key:"fromHex",value:function(t){var r=e.values.find(function(e){return e.hex===t});if(void 0===r)throw new Error("Enum value not found");return r}},{key:"fromLabel",value:function(t){var r=e.values.find(function(e){return e.label===t});if(void 0===r)throw new Error("Enum value not found");return r}}]),e}();Ye.values=[],Ye.ECDSA=new Ye("ECDSA",18,je.ECDSAwithSHA256),Ye.SM2=new Ye("SM2",19,je.SM2withSM3),Ye.EDDSA=new Ye("EDDSA",20,je.EDDSAwithSHA512);var Qe=r(9),Xe=r.n(Qe),Ze=r(10),$e=r.n(Ze),et=r(11),tt=r.n(et),rt=function(){function e(t,r,n){A()(this,e),this.label=t,this.hex=r,this.preset=n,e.values.push(this)}return k()(e,null,[{key:"fromHex",value:function(t){var r=e.values.find(function(e){return e.hex===t});if(void 0===r)throw new Error("Enum value not found");return r}},{key:"fromLabel",value:function(t){var r=e.values.find(function(e){return e.label===t});if(void 0===r)throw new Error("Enum value not found");return r}}]),e}();rt.values=[],rt.SECP224R1=new rt("P-224",1,"p224"),rt.SECP256R1=new rt("P-256",2,"p256"),rt.SECP384R1=new rt("P-384",3,"p384"),rt.SECP521R1=new rt("P-521",4,"p521"),rt.SM2P256V1=new rt("sm2p256v1",20,"sm2p256v1"),rt.ED25519=new rt("ed25519",25,"ed25519");var nt=r(23),at=function(){function e(t){A()(this,e),this.curve=t}return k()(e,null,[{key:"deserializeJson",value:function(t){return new e(rt.fromLabel(t.curve))}}]),k()(e,[{key:"serializeJson",value:function(){return{curve:this.curve.label}}}]),e}(),it=function(){function e(t,r,n){A()(this,e),this.key=t,void 0===r&&(r=Ye.fromLabel(N.algorithm)),void 0===n&&(n=at.deserializeJson(N.parameters)),this.algorithm=r,this.parameters=n}return k()(e,[{key:"computeHash",value:function(e,t){switch(t){case je.ECDSAwithSHA224:return re.SHA224(re.enc.Hex.parse(e)).toString();case je.ECDSAwithSHA256:return re.SHA256(re.enc.Hex.parse(e)).toString();case je.ECDSAwithSHA384:return re.SHA384(re.enc.Hex.parse(e)).toString();case je.ECDSAwithSHA512:case je.EDDSAwithSHA512:return re.SHA512(re.enc.Hex.parse(e)).toString();case je.ECDSAwithSHA3_224:return Object(nt.sha3_224)(pe(e));case je.ECDSAwithSHA3_256:return Object(nt.sha3_256)(pe(e));case je.ECDSAwithSHA3_384:return Object(nt.sha3_384)(pe(e));case je.ECDSAwithSHA3_512:return Object(nt.sha3_512)(pe(e));case je.ECDSAwithRIPEMD160:return re.RIPEMD160(re.enc.Hex.parse(e)).toString();case je.SM2withSM3:return(new ie.sm3).sum(pe(e),"hex");default:throw new Error("Unsupported hash algorithm.")}}},{key:"isSchemaSupported",value:function(e){switch(e){case je.ECDSAwithSHA224:case je.ECDSAwithSHA256:case je.ECDSAwithSHA384:case je.ECDSAwithSHA512:case je.ECDSAwithSHA3_224:case je.ECDSAwithSHA3_256:case je.ECDSAwithSHA3_384:case je.ECDSAwithSHA3_512:case je.ECDSAwithRIPEMD160:return this.algorithm===Ye.ECDSA;case je.EDDSAwithSHA512:return this.algorithm===Ye.EDDSA;case je.SM2withSM3:return this.algorithm===Ye.SM2;default:throw new Error("Unsupported signature schema.")}}},{key:"serializeJson",value:function(){return{algorithm:this.algorithm.label,parameters:this.parameters.serializeJson(),key:this.key}}}]),e}(),ut=function(e){function t(){return A()(this,t),$e()(this,(t.__proto__||Xe()(t)).apply(this,arguments))}return tt()(t,e),k()(t,[{key:"verify",value:function(e,t){if(!this.isSchemaSupported(t.algorithm))throw new Error("Signature schema does not match key type.");"string"!=typeof e&&(e=e.getSignContent());var r=void 0;return r=t.algorithm===je.SM2withSM3?e:this.computeHash(e,t.algorithm),this.verifySignature(r,t.value,t.algorithm)}},{key:"serializeHex",value:function(){var e="";switch(this.algorithm){case Ye.ECDSA:e+=this.key;break;case Ye.EDDSA:case Ye.SM2:e+=xe(this.algorithm.hex),e+=xe(this.parameters.curve.hex),e+=this.key}return e}},{key:"verifySignature",value:function(e,t,r){switch(r){case je.ECDSAwithSHA224:case je.ECDSAwithSHA256:case je.ECDSAwithSHA384:case je.ECDSAwithSHA512:case je.ECDSAwithSHA3_224:case je.ECDSAwithSHA3_256:case je.ECDSAwithSHA3_384:case je.ECDSAwithSHA3_512:case je.ECDSAwithRIPEMD160:return this.verifyEcDSASignature(e,t);case je.EDDSAwithSHA512:return this.verifyEdDSASignature(e,t);case je.SM2withSM3:return this.verifySM2Signature(e,t);default:throw new Error("Unsupported signature schema.")}}},{key:"verifyEcDSASignature",value:function(e,t){var r=t.substr(0,64),n=t.substr(64,64);return new ae.ec(this.parameters.curve.preset).verify(e,{r:r,s:n},this.key,"hex")}},{key:"verifyEdDSASignature",value:function(e,t){var r=t.substr(0,64),n=t.substr(64,64);return new ae.eddsa(this.parameters.curve.preset).verify(e,{r:r,s:n},this.key,"hex")}},{key:"verifySM2Signature",value:function(e,t){var r=new _e(t),n=Ae(r.readNullTerminated());if(n!==D&&""!==n)throw new Error("Unsupported SM2 id used.");var a=r.read(32),i=r.read(32);return ie.sm2.SM2KeyPair(this.key).verify(pe(e),a,i)}}],[{key:"deserializeHex",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:33;if(33===r){var n=Ye.ECDSA,a=rt.SECP256R1;return new t(e.read(33),n,new at(a))}var i=parseInt(e.read(1),16),u=parseInt(e.read(1),16);return new t(e.read(r-2),Ye.fromHex(i),new at(rt.fromHex(u)))}}]),t}(it),st=function(){function e(t){A()(this,e),this.label=t,e.values.push(this)}return k()(e,null,[{key:"fromHexLabel",value:function(t){var r=Ae(t),n=e.values.find(function(e){return e.label===r});if(void 0===n)throw new Error("Enum value not found");return n}}]),e}();function ot(e,t){if(e.algorithm!==t.algorithm)return e.algorithm.hex-t.algorithm.hex;switch(e.algorithm){case Ye.ECDSA:var r=new ae.ec(e.parameters.curve.preset),n=r.keyFromPublic(e.key,"hex",!0),a=r.keyFromPublic(t.key,"hex",!0),i=n.getPublic(),u=a.getPublic();return i.getX()!==u.getX()?i.getX()-u.getX():i.getY()-u.getY();case Ye.SM2:var s=new ie.sm2.SM2KeyPair,o=new ie.sm2.SM2KeyPair;return s._pubFromString(e.key),o._pubFromString(t.key),s.getX().toString()!==o.getX().toString()?Number(s.getX().toString())-Number(o.getX().toString()):Number(s.getY().toString())-Number(o.getY().toString());case Ye.EDDSA:return Number(e.key)-Number(t.key);default:return 0}}function ct(e){return xe(e)}function lt(e){return-1===e?xe(ne.PUSHM1):0===e?xe(ne.PUSH0):e>0&&e<=16?xe(ne.PUSH1-1+e):xe(e,8,!0)}function ht(e){return 0===e?ct(ne.PUSH0):e<=16?xe(e-1+ne.PUSH1):ft(new qe(e.toString()).toHexstr())}function ft(e){var t="";if(0===e.length)throw new Error("pushBytes error, hexstr is empty.");var r=e.length/2;if(r<=ne.PUSHBYTES75+1-ne.PUSHBYTES1)t+=xe(r+ne.PUSHBYTES1-1);else if(r<256)t+=xe(ne.PUSHDATA1),t+=xe(r);else if(r<65536)t+=xe(ne.PUSHDATA2),t+=xe(r,2,!0);else{if(!(r<4294967296))throw m.INVALID_PARAMS;t+=xe(ne.PUSHDATA4),t+=xe(r,4,!0)}return t+=e}function dt(e){var t="";return t+=function(e){return ft(e.serializeHex())}(e),t+=ct(ne.CHECKSIG)}function vt(e,t){var r=e.length;if(!(1<=t&&t<=r&&r<=1024))throw new Error("Wrong multi-sig param");e.sort(ot);var n="";n+=ht(t);var a=!0,i=!1,u=void 0;try{for(var s,o=ee()(e);!(a=(s=o.next()).done);a=!0){n+=ft(s.value.serializeHex())}}catch(e){i=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw u}}return n+=ht(r),n+=ct(ne.CHECKMULTISIG)}function pt(e){var t="";e.sort();var r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e);!(r=(i=u.next()).done);r=!0){t+=ft(i.value)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}function yt(e){return parseInt(e.read(1),16)}function mt(e){var t=yt(e),r=void 0;if(t===ne.PUSHDATA4)r=e.readUint32();else if(t===ne.PUSHDATA2)r=e.readUint16();else if(t===ne.PUSHDATA1)r=e.readUint8();else{if(!(t<=ne.PUSHBYTES75&&t>=ne.PUSHBYTES1))throw new Error("unexpected opcode: "+t);r=t-ne.PUSHBYTES1+1}return e.read(r)}function gt(e){var t=e.readNextBytes();return ut.deserializeHex(new _e(t))}st.values=[],st.IN_USE=new st("in use"),st.REVOKED=new st("revoked");var wt=function e(){A()(this,e)};var At=function(e){var t="",r=e.length/2;return r<=ne.PUSHBYTES75?t+=xe(r):r<256?(t+=xe(ne.PUSHDATA1),t+=xe(r)):r<65536?(t+=xe(ne.PUSHDATA2),t+=xe(r,2,!0)):(t+=xe(ne.PUSHDATA4),t+=xe(r,4,!0)),t+=e},St=function(){function e(t){if(A()(this,e),40!==t.length&&34!==t.length)throw m.INVALID_PARAMS;this.value=t}return k()(e,null,[{key:"deserialize",value:function(t){return new e(t.read(20))}},{key:"fromPubKey",value:function(t){return new e(Le(dt(t)))}},{key:"fromTstid",value:function(t){return new e(t.substr(8))}},{key:"fromVmCode",value:function(t){return new e(Le(t))}},{key:"fromMultiPubKeys",value:function(t,r){var n=r.length;if(t<=0||t>n||n>24)throw m.INVALID_PARAMS;r.sort(ot);var a="";a+=lt(t);var i=!0,u=!1,s=void 0;try{for(var o,c=ee()(r);!(i=(o=c.next()).done);i=!0){var l=o.value;a+=At(l.serializeHex())}}catch(e){u=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(u)throw s}}return a+=lt(n),new e(Le(a+=xe(ne.CHECKMULTISIG)))}},{key:"generateTstid",value:function(t){return"did:tst:"+e.fromPubKey(t).toBase58()}}]),k()(e,[{key:"toBase58",value:function(){return 34===this.value.length?this.value:kt(this.value)}},{key:"toHexString",value:function(){var e=void 0;return e=40===this.value.length?this.value:Et(this.value),Te(e)}},{key:"serialize",value:function(){return 40===this.value.length?this.value:Et(this.value)}},{key:"getB58Checksum",value:function(){var e=this.toBase58();return He(re.SHA256(e).toString()).slice(0,8)}}]),e}();function kt(e){var t=P+e,r=t+He(He(t)).slice(0,8);return te.encode(new Buffer(r,"hex"))}function Et(e){var t=ye(te.decode(e)).substr(2,40);if(e!==kt(t))throw new Error("[addressToU160] decode encoded verify failed");return t}var bt=r(3),xt=r.n(bt),It=r(5),Tt=r.n(It),Pt=r(31),Rt=r(17),_t=r(36);function Ct(e,t,r){var n=[];return _t(e.normalize("NFC"),pe(t),{N:r.cost,r:r.blockSize,p:r.parallel,dkLen:r.size},function(e){n=e}),new Buffer(n)}function Bt(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,a=ut.deserializeHex(new _e(t)),i=Ct(r,St.fromPubKey(a).getB58Checksum(),n).toString("hex"),u=i.slice(0,32),s=i.slice(64),o=re.enc.Hex.parse(u),c=re.AES.encrypt(re.enc.Hex.parse(e),re.enc.Hex.parse(s),{mode:re.mode.CTR,padding:re.pad.NoPadding,iv:o}).ciphertext.toString();return new Buffer(c,"hex").toString("base64")}function Nt(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,a=Buffer.from(e,"base64").toString("hex"),i="";if("string"==typeof r&&8===r.length)i=r;else{if(!(r instanceof St))throw m.INVALID_PARAMS;i=r.getB58Checksum()}var u=Ct(t,i,n).toString("hex"),s=u.slice(0,32),o=u.slice(64),c=re.enc.Hex.parse(s),l={ciphertext:re.enc.Hex.parse(a),salt:"",iv:""};return re.AES.decrypt(l,re.enc.Hex.parse(o),{mode:re.mode.CTR,padding:re.pad.NoPadding,iv:c}).toString()}function Dt(e,t){var r="";if("string"==typeof e&&8===e.length)r=e;else{if(!(e instanceof St))throw m.INVALID_PARAMS;r=e.getB58Checksum()}var n=ut.deserializeHex(new _e(t));if(St.fromPubKey(n).getB58Checksum()!==r)throw console.log("keyphrase error."),m.Decrypto_ERROR}function Ht(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,a=ut.deserializeHex(new _e(t)),i=St.fromPubKey(a).getB58Checksum(),u=Ct(r,i,n).toString("hex"),s=u.slice(0,64),o=u.slice(64),c=be(e,s),l=re.AES.encrypt(re.enc.Hex.parse(c),re.enc.Hex.parse(o),{mode:re.mode.ECB,padding:re.pad.NoPadding}),h=_+C+i+l.ciphertext.toString();return te.encode(Buffer.from(h,"hex"))}function Ot(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R,n=ye(te.decode(e)),a=n.substr(6,8),i=n.substr(-64),u=Ct(t,a,r).toString("hex"),s=u.slice(0,64),o=u.slice(64),c={ciphertext:re.enc.Hex.parse(i),salt:"",iv:""};return be(re.AES.decrypt(c,re.enc.Hex.parse(o),{mode:re.mode.ECB,padding:re.pad.NoPadding}).toString(),s)}function Lt(e,t,r){var n=ye(te.decode(e)).substr(6,8),a=ut.deserializeHex(new _e(r));if(St.fromPubKey(a).getB58Checksum()!==n)throw console.log("keyphrase error."),m.Decrypto_ERROR}function zt(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R;if(!Fe(e))throw new Error(m.INVALID_PARAMS+", Invalid private key");var i=Ct(n,r,a),u=i.slice(0,12),s=i.slice(32),o=u,c=new Buffer(t.toBase58()),l=Object(Rt.createCipheriv)("aes-256-gcm",s,o);l.setAAD(c);var h=Buffer.from(e,"hex"),f=l.update(h),d=l.final(),v=l.getAuthTag();return f=Buffer.concat([f,d]),Buffer.concat([f,v]).toString("base64")}function Kt(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R;if(32!==r.length)throw m.INVALID_PARAMS;var i=Buffer.from(e,"base64"),u=i.slice(0,i.length-16),s=i.slice(i.length-16),o=Ct(n,r,a),c=o.slice(0,12),l=o.slice(32),h=c,f=new Buffer(t.toBase58()),d=Object(Rt.createDecipheriv)("aes-256-gcm",l,h);d.setAAD(f),d.setAuthTag(s);var v=d.update(u).toString("hex");try{v+=d.final().toString("hex")}catch(e){throw m.Decrypto_ERROR}return v}var Ut=r(15),Mt=function(){function e(t,r,n){A()(this,e),this.algorithm=t,this.value=r,this.publicKeyId=n}return k()(e,null,[{key:"deserializeJWT",value:function(t,r,n){return new e(r,Ut.decode(t,"hex"),n)}},{key:"deserializePgp",value:function(t){var r=new Buffer(t.Value,"base64").toString("hex"),n=e.deserializeHex(r).value;return new e(je.fromLabel(t.Algorithm),n)}},{key:"deserializeHex",value:function(t){if(t.length<4)throw new Error("Invalid params.");var r=new _e(t),n=parseInt(r.read(1),16);return new e(je.fromHex(n),t.substr(2))}}]),k()(e,[{key:"serializeHex",value:function(){var e="";return e+=xe(this.algorithm.hex),e+=this.value}},{key:"serializePgp",value:function(e){return{PublicKeyId:e,Format:"pgp",Value:new Buffer(this.serializeHex(),"hex").toString("base64"),Algorithm:this.algorithm.label}}},{key:"serializeJWT",value:function(){return Ut.encode(this.value,"hex")}}]),e}(),Vt=r(30),Gt=function(e){function t(){return A()(this,t),$e()(this,(t.__proto__||Xe()(t)).apply(this,arguments))}return tt()(t,e),k()(t,[{key:"sign",value:function(e,t,r){if(void 0===t&&(t=this.algorithm.defaultSchema),!this.isSchemaSupported(t))throw new Error("Signature schema does not match key type.");"string"!=typeof e&&(e=e.getSignContent());var n=void 0;n=t===je.SM2withSM3?e:this.computeHash(e,t);var a=this.computeSignature(n,t);return new Mt(t,a,r)}},{key:"signAsync",value:function(){var e=Tt()(xt.a.mark(function e(t,r,n){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sign(t,r,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){switch(this.algorithm){case Ye.ECDSA:return this.getEcDSAPublicKey();case Ye.EDDSA:return this.getEdDSAPublicKey();case Ye.SM2:return this.getSM2PublicKey();default:throw new Error("Unsupported signature schema.")}}},{key:"decrypt",value:function(e,r,n,a){24===n.length&&Ge(n)&&(n=Buffer.from(n,"base64").toString("hex"));var i=new t(Kt(this.key,r,n,e,a),this.algorithm,this.parameters),u=i.getPublicKey();if(St.fromPubKey(u).toBase58()!==r.toBase58())throw m.Decrypto_ERROR;return i}},{key:"encrypt",value:function(e,r,n,a){var i=this.getPublicKey();if(St.fromPubKey(i).toBase58()!==r.toBase58())throw m.INVALID_ADDR;return new t(zt(this.key,r,n,e,a),this.algorithm,this.parameters)}},{key:"getEcDSAPublicKey",value:function(){var e=new ae.ec(this.parameters.curve.preset).keyFromPrivate(this.key,"hex").getPublic(!0,"hex");return new ut(e,this.algorithm,this.parameters)}},{key:"getEdDSAPublicKey",value:function(){var e=new ae.eddsa(this.parameters.curve.preset).keyFromSecret(this.key,"hex").getPublic(!0,"hex");return new ut(e,this.algorithm,this.parameters)}},{key:"getSM2PublicKey",value:function(){var e=ie.sm2.SM2KeyPair(null,this.key).pubToString("compress");return new ut(e,this.algorithm,this.parameters)}},{key:"computeSignature",value:function(e,t){switch(t){case je.ECDSAwithSHA224:case je.ECDSAwithSHA256:case je.ECDSAwithSHA384:case je.ECDSAwithSHA512:case je.ECDSAwithSHA3_224:case je.ECDSAwithSHA3_256:case je.ECDSAwithSHA3_384:case je.ECDSAwithSHA3_512:case je.ECDSAwithRIPEMD160:return this.computeEcDSASignature(e);case je.EDDSAwithSHA512:return this.computeEdDSASignature(e);case je.SM2withSM3:return this.computeSM2Signature(e);default:throw new Error("Unsupported signature schema.")}}},{key:"computeEcDSASignature",value:function(e){var t=new ae.ec(this.parameters.curve.preset).sign(e,this.key,{canonical:!0});return Buffer.concat([t.r.toArrayLike(Buffer,"be",32),t.s.toArrayLike(Buffer,"be",32)]).toString("hex")}},{key:"computeEdDSASignature",value:function(e){return new ae.eddsa(this.parameters.curve.preset).sign(e,this.key).toHex().toLowerCase()}},{key:"computeSM2Signature",value:function(e){var t=ie.sm2.SM2KeyPair(null,this.key).sign(pe(e));return we(D+"\0")+t.r+t.s}},{key:"serializeWIF",value:function(){return Pt.encode(128,Buffer.from(this.key,"hex"),!0)}}],[{key:"random",value:function(e,r){return void 0===e&&(e=Ye.fromLabel(N.algorithm)),void 0===r&&(r=at.deserializeJson(N.parameters)),new t(ye(ve(32)),e,r)}},{key:"deserializeWIF",value:function(e){return new t(ye(Pt.decode(e,128).privateKey))}},{key:"generateFromMnemonic",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;if(e.split(" ").length<12)throw m.INVALID_PARAMS;var n=T.mnemonicToSeedHex(e),a=Vt.fromMasterSeed(Buffer.from(n,"hex")).derive(r);return new t(Buffer.from(a.privateKey).toString("hex"))}}]),t}(it),Ft=[],Wt=new(function(){function e(){A()(this,e)}return k()(e,[{key:"getType",value:function(){return""}},{key:"deserialize",value:function(e){if(null!=e.key)return new Gt(e.key,Ye.fromLabel(e.algorithm),at.deserializeJson(e.parameters));throw new Error("Unsupported Key type.")}}]),e}());function Jt(e){Ft.push(e)}function qt(e){if(null==e.external)return Wt.deserialize(e);var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(Ft);!(t=(a=i.next()).done);t=!0){var u=a.value;if(u.getType()===e.external.type)return u.deserialize(e)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}throw new Error("Unsupported Key type.")}var jt,Yt,Qt=r(37),Xt=function(){function e(t){A()(this,e),this.param=new $t(t),this.sk=new tr(this.param)}return k()(e,[{key:"GenerateSk",value:function(){return this.sk.Rand(),this.sk}},{key:"GenerateKeyPair",value:function(){this.sk=tr.GenerateSk(this.param),this.pk=this.sk.GenerateIssuerPublicKey()}},{key:"SetAttributeSet",value:function(e){this.AttributeName=e,this.pk.GenerateAttr(e)}},{key:"Sign",value:function(e,t){var r=this.param.getRandBN(),n=this.param.getRandBN(),a=new this.param.ECP;a.copy(this.param.g1),a.add(this.param.PAIR.G1mul(this.pk.h0,n)),a.add(e);for(var i=0;i<this.pk.attr.length;i++)a.add(this.param.PAIR.G1mul(this.pk.h[i],t[i]));var u=new this.param.ECP,s=new this.param.BIG;s.copy(r),s.add(this.sk.value),s.invmodp(this.param.order),u=this.param.PAIR.G1mul(a,s);var o=new nr(this.param);return o.Set(u,a,r,n,t),o}},{key:"GetPk",value:function(){return rr.COPY(this.pk)}},{key:"GenerateNonce",value:function(){return this.param.getRandBN()}},{key:"VerifyCredentialRequest",value:function(e){return this.pk.VerifyCredentialRequest(e)}}]),e}(),Zt=function(){function e(t){A()(this,e),this.param=new $t(t)}return k()(e,[{key:"GenerateSk",value:function(){return this.sk=tr.GenerateSk(this.param),this.sk}},{key:"SetIpk",value:function(e){this.ipk=rr.COPY(e)}},{key:"GenerateCrendentialRequest",value:function(e){if(void 0!==this.ipk){var t=this.ipk,r=this.param.PAIR.G1mul(t.h_sk,this.sk.value),n=this.param.getRandBN(),a=this.param.PAIR.G1mul(t.h_sk,n),i=this.param.hashToBN(a,t.h_sk,r,e),u=this.param.BIG.modmul(i,this.sk.value,this.param.order);u.add(n),u.mod(this.param.order);var s={C:i,S:u},o=this.param.genAttrBN(t.attr);return this.Nym=r,this.attrs=o,{Nym:r,pi:s,nonce:e,attrs:o}}console.log("Please set ipk first.")}},{key:"VerifyBBSplus",value:function(e){var t=new this.param.ECP2;t.copy(this.ipk.w),t.add(this.param.PAIR.G2mul(this.param.g2,e.sig.e)),t.affine();var r=new this.param.ECP;r.copy(e.sig.A),r.affine();var n=this.param.PAIR.ate(t,r);n=this.param.PAIR.fexp(n);var a=new this.param.ECP;a.copy(this.param.g1),a.add(this.param.PAIR.G1mul(this.ipk.h0,e.sig.s)),a.add(this.Nym);for(var i=0;i<e.attrs.length;i++)a.add(this.param.PAIR.G1mul(this.ipk.h[i],e.attrs[i]));a.affine();var u=this.param.PAIR.ate(this.param.g2,a);return u=this.param.PAIR.fexp(u),n.equals(u)}},{key:"SetCredential",value:function(e){return this.Cred=new nr(this.param),this.Cred.Copy(e),!0}},{key:"Prove",value:function(e){var t=this.ipk,r=this.Cred,n=this.param.getRandBN(),a=this.param.PAIR.G1mul(r.sig.A,n),i=new this.param.BIG(0);i.copy(n),i.invmodp(this.param.order);var u=new this.param.BIG(0);u.copy(r.sig.e),u=this.param.BIG.modneg(u,this.param.order);var s=this.param.PAIR.G1mul(a,u);s.add(this.param.PAIR.G1mul(r.sig.B,n));var o=this.param.getRandBN(),c=new this.param.BIG(0);c.copy(o),c=this.param.BIG.modneg(c,this.param.order);var l=this.param.PAIR.G1mul(r.sig.B,n);l.add(this.param.PAIR.G1mul(t.h0,c));var h=this.param.BIG.modmul(o,i,this.param.order);(h=this.param.BIG.modneg(h,this.param.order)).add(r.sig.s),h.mod(this.param.order);for(var f=[],d=0;d<e.length;d++)0===e[d]?f[d]=this.param.getRandBN():f[d]=!1;var v=this.param.getRandBN(),p=this.param.getRandBN(),y=this.param.getRandBN(),m=this.param.getRandBN(),g=this.param.getRandBN(),w=this.param.PAIR.G1mul(t.h_sk,g),A=this.param.PAIR.G1mul(a,v);A.add(this.param.PAIR.G1mul(t.h0,p));var S=this.param.PAIR.G1mul(l,y);S.add(this.param.PAIR.G1mul(t.h0,m)),S.add(this.param.PAIR.G1mul(w,new this.param.BIG(-1)));for(var k=0;k<f.length;k++)!1!==f[k]&&S.add(this.param.PAIR.G1mul(t.h[k],f[k]));var E=this.param.hashToBN(a,s,l,this.Nym,A,S,this.param.g1,t.h0,t.h,t.w),b=this.param.getRandBN(),x=this.param.hashToBN(b,E,e,this.attrs),I=new this.param.BIG(0);I.copy(g),I.add(this.param.BIG.modmul(x,this.sk.value,this.param.order)),I.mod(this.param.order);for(var T=[],P=0;P<e.length;P++)0===e[P]?(T[P]=new this.param.BIG(0),T[P].copy(f[P]),T[P].sub(this.param.BIG.modmul(x,this.attrs[P],this.param.order)),T[P].mod(this.param.order)):T[P]=!1;var R=new this.param.BIG(0);R.copy(v),R.sub(this.param.BIG.modmul(x,r.sig.e,this.param.order)),R.mod(this.param.order);var _=new this.param.BIG(0);_.copy(p),_.add(this.param.BIG.modmul(x,o,this.param.order)),_.mod(this.param.order);var C=new this.param.BIG(0);C.copy(y),C.add(this.param.BIG.modmul(x,i,this.param.order)),C.mod(this.param.order);var B=new this.param.BIG(0);B.copy(m),B.sub(this.param.BIG.modmul(x,h,this.param.order)),B.mod(this.param.order);var N={c:x,s_sk:I,s_a:T,s_e:R,s_r2:_,s_r3:C,s_s_:B,nonce:b};return{A_:a,_A:s,B_:l,Nym:this.Nym,pi:N}}},{key:"Verify",value:function(e,t,r){var n=this.ipk,a=new this.param.ECP(0);if(e.A_.equals(a))return console.log("A' == O return true, verify failed."),!1;var i=new this.param.ECP;i.copy(e.A_);var u=new this.param.ECP2;u.copy(n.w);var s=new this.param.ECP;s.copy(e._A);var o=new this.param.ECP2;o.copy(this.param.g2),i.affine(),u.affine(),s.affine(),o.affine();var c=this.param.PAIR.ate(u,i),l=this.param.PAIR.ate(o,s);if(c=this.param.PAIR.fexp(c),l=this.param.PAIR.fexp(l),!c.equals(l))return console.log("e(A', w) == e(_A, g2) return false, verify failed."),!1;s.copy(e._A);var h=this.param.PAIR.G1mul(i,e.pi.s_e);h.add(this.param.PAIR.G1mul(n.h0,e.pi.s_r2)),s.sub(e.B_),h.add(this.param.PAIR.G1mul(s,this.param.BIG.modneg(e.pi.c,this.param.order)));var f=this.param.PAIR.G1mul(e.B_,e.pi.s_r3);f.add(this.param.PAIR.G1mul(n.h0,e.pi.s_s_)),f.add(this.param.PAIR.G1mul(n.h_sk,this.param.BIG.modneg(e.pi.s_sk,this.param.order)));var d=new this.param.ECP;d.copy(this.param.g1);for(var v=0;v<t.length;v++)0===t[v]?f.add(this.param.PAIR.G1mul(n.h[v],e.pi.s_a[v])):d.add(this.param.PAIR.G1mul(n.h[v],r[v]));f.add(this.param.PAIR.G1mul(d,this.param.BIG.modneg(e.pi.c,this.param.order)));var p=this.param.hashToBN(e.A_,e._A,e.B_,e.Nym,h,f,this.param.g1,n.h0,n.h,n.w),y=this.param.hashToBN(e.pi.nonce,p,t,r);return 0===this.param.BIG.comp(y,e.pi.c)||(console.log("c == H(nonce, H(A', _A, B', Nym, ~t1, ~t2, g1, HRand, h1, ... , hL, w), (D, I)) return false, verify failed."),!1)}}]),e}(),$t=function(){function e(t){A()(this,e),this.curve=t,this.ctx=new Qt(t),this.PAIR=this.ctx.PAIR,this.ECP=this.ctx.ECP,this.ECP2=this.ctx.ECP2,this.BIG=this.ctx.BIG,this.rng=new this.ctx.RAND,this.g1=this.getG1Generator(),this.g2=this.getG2Generator(),this.order=this.getOrder()}return k()(e,[{key:"getG1Generator",value:function(){var e=new this.ctx.ECP(0),t=new this.ctx.BIG(0),r=new this.ctx.BIG(0);return t.rcopy(this.ctx.ROM_CURVE.CURVE_Gx),r.rcopy(this.ctx.ROM_CURVE.CURVE_Gy),e.setxy(t,r),e}},{key:"getG2Generator",value:function(){var e=new this.ctx.ECP2(0),t=new this.ctx.BIG(0),r=new this.ctx.BIG(0),n=new this.ctx.FP2(0),a=new this.ctx.FP2(0);return t.rcopy(this.ctx.ROM_CURVE.CURVE_Pxa),r.rcopy(this.ctx.ROM_CURVE.CURVE_Pxb),n.bset(t,r),t.rcopy(this.ctx.ROM_CURVE.CURVE_Pya),r.rcopy(this.ctx.ROM_CURVE.CURVE_Pyb),a.bset(t,r),e.setxy(n,a),e}},{key:"getOrder",value:function(){var e=new this.ctx.BIG(0);return e.rcopy(this.ctx.ROM_CURVE.CURVE_Order),e}},{key:"getRandBN",value:function(){var e=ze(256);return this.rng.clean(),this.rng.seed(256,e),this.BIG.randomnum(this.order,this.rng)}},{key:"getRandG1",value:function(){var e=this.getRandBN();return this.PAIR.G1mul(this.g1,e)}},{key:"getRandG2",value:function(){var e=this.getRandBN();return this.PAIR.G2mul(this.g2,e)}},{key:"hashToBN",value:function(){for(var e=[],t=[],r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];n.forEach(function(r){Array.isArray(r)?"number"==typeof r[0]?(e=e.concat(r),t=[]):r.forEach(function(r){r.toBytes(t),e=e.concat(t),t=[]}):(r.toBytes(t),e=e.concat(t),t=[])});var i=new this.ctx.HASH256;i.process_array(e);var u=i.hash(),s=this.BIG.fromBytes(u);return s.mod(this.order),s}},{key:"genAttrBN",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=this.getRandBN();t[r]=n}return t}},{key:"genAttrElement",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=this.getRandG1();t[r]=n}return t}}]),e}(),er=function e(t){A()(this,e),this.param=t},tr=function(e){function t(e){A()(this,t);var r=$e()(this,(t.__proto__||Xe()(t)).call(this,e));return r.value=new r.param.BIG(0),r}return tt()(t,e),k()(t,null,[{key:"GenerateSk",value:function(e){var r=e.getRandBN(),n=new t(e);return n.setValue(r),n}}]),k()(t,[{key:"setValue",value:function(e){this.value.copy(e)}},{key:"GenerateIssuerPublicKey",value:function(){var e=this.value,t=this.param.PAIR.G2mul(this.param.g2,e),r=this.param.getRandBN(),n=this.param.PAIR.G1mul(this.param.g1,r),a=this.param.PAIR.G1mul(n,e);r=this.param.getRandBN();var i=this.param.PAIR.G2mul(this.param.g2,r),u=this.param.PAIR.G1mul(n,r),s=this.param.hashToBN(i,u,this.param.g2,n,t,a),o=this.param.BIG.modmul(s,e,this.param.order);o.add(r),o.mod(this.param.order);var c={C:s,S:o},l=new rr(this.param);return l.SetBasicValue(t,n,a,c),l}},{key:"ToBytes",value:function(){return void 0===this.value?"":this.value.toBytes()}},{key:"FromBytes",value:function(e){return this.value=this.param.BIG.fromBytes(e),this.value.toString()}},{key:"Rand",value:function(){var e=this.param.getRandBN();this.setValue(e)}}]),t}(er),rr=function(e){function t(e){A()(this,t);var r=$e()(this,(t.__proto__||Xe()(t)).call(this,e));r.w=new r.param.ECP2,r._g1=new r.param.ECP,r._g2=new r.param.ECP;var n=new r.param.BIG,a=new r.param.BIG;return r.pi={C:n,S:a},r.h0=new r.param.ECP,r.h_sk=new r.param.ECP,r.attr=[],r}return tt()(t,e),k()(t,null,[{key:"COPY",value:function(e){var r=new t(e.param);return r.SetBasicValue(e.w,e._g1,e._g2,e.pi),r.SetAttrValue(e.h0,e.h_sk,e.h,e.attr),r}}]),k()(t,[{key:"SetBasicValue",value:function(e,t,r,n){this.w.copy(e),this._g1.copy(t),this._g2.copy(r),this.pi.C.copy(n.C),this.pi.S.copy(n.S)}},{key:"SetAttrValue",value:function(e,t,r,n){this.h0.copy(e),this.h_sk.copy(t),this.h=[],this.attr=[];for(var a=0;a<r.length;a++)this.h[a]=new this.param.ECP,this.h[a].copy(r[a]);for(var i=0;i<n.length;i++)this.attr[i]=n[i]}},{key:"GenerateAttr",value:function(e){var t=this.param.genAttrElement(e),r=this.param.getRandG1(),n=this.param.getRandG1(),a=[];t.forEach(function(e){a.push(e)}),this.h0=r,this.h_sk=n,this.h=a,this.attr=e}},{key:"VerifyCredentialRequest",value:function(e){var t=new this.param.BIG(0);t.copy(e.pi.C);var r=this.param.PAIR.G1mul(this.h_sk,e.pi.S);r.add(this.param.PAIR.G1mul(e.Nym,this.param.BIG.modneg(t,this.param.order)));var n=this.param.hashToBN(r,this.h_sk,e.Nym,e.nonce);return 0===this.param.BIG.comp(e.pi.C,n)}}]),t}(er),nr=function(e){function t(e){A()(this,t);var r=$e()(this,(t.__proto__||Xe()(t)).call(this,e)),n=new r.param.ECP,a=new r.param.ECP,i=new r.param.BIG,u=new r.param.BIG;return r.sig={A:n,B:a,e:i,s:u},r.attrs=[],r}return tt()(t,e),k()(t,[{key:"Set",value:function(e,t,r,n,a){this.sig.A.copy(e),this.sig.B.copy(t),this.sig.e.copy(r),this.sig.s.copy(n);for(var i=0;i<a.length;i++)this.attrs[i]=new this.param.BIG,this.attrs[i].copy(a[i])}},{key:"Copy",value:function(e){this.Set(e.sig.A,e.sig.B,e.sig.e,e.sig.s,e.attrs)}}]),t}(er),ar=r(32),ir=function(){function e(t){A()(this,e),this.encAlg="aes-256-cbc",this.hashAlg="sha256",this.digestSize=32,this.keyFormat="hex",this.compact=!0;var r=t||"p256";this.ec=new ae.ec(r),this.keyPair=this.ec.genKeyPair(),this.iv=Buffer.alloc(0)}return k()(e,[{key:"generateKeyPair",value:function(){return this.keyPair=this.ec.genKeyPair(),{priv:this.keyPair.getPrivate("hex"),pub:this.keyPair.getPublic(this.compact,"hex")}}},{key:"setKeyPair",value:function(e){this.keyPair=this.ec.keyFromPrivate(e,"hex")}},{key:"getKeyPair",value:function(){return{priv:this.keyPair.getPrivate("hex"),pub:this.keyPair.getPublic(this.compact,"hex")}}},{key:"enc",value:function(e,t,r,n){var a=this.ec.keyFromPublic(e,"hex").getPublic(),i=this.ec.genKeyPair(),u=i.getPrivate(),s=i.getPublic(),o=a.mul(u),c=s.encode("hex"),l=o.getX().toString("hex"),h=Buffer.from(c+l,"hex"),f=this.kdf2(h,8*r,this.digestSize,this.hashAlg);if(f){var d=Buffer.concat(f),v=Buffer.alloc(16);n?v=Buffer.from(n,"hex"):Rt.randomFillSync(v);var p=this.encAlg,y=Rt.createCipheriv(p,d,v);y.setAutoPadding(!1);var m=y.update(ar.pad(t),"binary","hex")+y.final("hex");return{iv:v.toString("hex"),out:c,msgCipher:m}}}},{key:"dec",value:function(e,t,r,n){var a=this.ec.keyFromPublic(t,"hex").getPublic().mul(this.keyPair.getPrivate()).getX().toString("hex"),i=Buffer.from(t+a,"hex"),u=this.kdf2(i,8*n,this.digestSize,this.hashAlg);if(!u)return Buffer.alloc(0);var s=Buffer.concat(u),o=Buffer.from(r,"hex"),c=this.encAlg,l=Rt.createDecipheriv(c,s,o);l.setAutoPadding(!1);var h=l.update(e,"hex","binary")+l.final("binary"),f=ar.unpad(Buffer.from(h,"binary"));return Buffer.from(f)}},{key:"kdf2",value:function(e,t,r,n){if(t<0)return[];for(var a=Math.ceil(t/8),i=Math.ceil(a/r),u=[],s=a-(i-1)*r,o=1;o<i;){var c=Rt.createHash(n).update(Buffer.concat([e,this.I2OSP(o,4)])).digest();u[o-1]=Buffer.alloc(s),u[o-1]=c,o++}var l=Rt.createHash(n).update(Buffer.concat([e,this.I2OSP(o,4)])).digest();return u[o-1]=Buffer.alloc(s),u[o-1]=l,u}},{key:"I2OSP",value:function(e,t){var r=Buffer.allocUnsafe(t);return r.writeUIntBE(e,0,t),r}}]),e}(),ur=r(28),sr=r.n(ur),or=r(26),cr=r.n(or),lr=r(27),hr=r.n(lr),fr=r(38),dr=r.n(fr),vr=function(){function e(t){if(A()(this,e),t&&t.length>16||t&&!/^[0-9]\d*$/.test(t))throw new Error("Invalid value."+t);this.value=t||"0000000000000000"}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e,n=t.read(8);for(n=Te(n);"00"===n.substr(0,2);)n=n.substring(2);return r.value=new ue.BigNumber(n,16).toString(),r}}]),k()(e,[{key:"serialize",value:function(){var e=new ue.BigNumber(this.value).toString(16);return e=e.length%16==0?e:("0".repeat(16)+e).substring(e.length),e=Te(e)}}]),e}(),pr=function(){function e(t,r,n){A()(this,e),this.name=t,this.returntype=r,this.parameters=n}return k()(e,[{key:"getParameter",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.parameters);!(t=(a=i.next()).done);t=!0){var u=a.value;if(u.getName()===e)return u}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return null}},{key:"setParamsValue",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0,a=t.length;n<a;n++)for(var i=0;i<this.parameters.length;i++)t[n].name===this.parameters[i].getName()&&this.parameters[i].setValue(t[n])}},{key:"toString",value:function(){var e={name:this.name,returntype:this.returntype,parameters:this.parameters};return I()(e)}}]),e}();!function(e){e.Boolean="Boolean",e.Integer="Integer",e.ByteArray="ByteArray",e.Interface="Interface",e.Array="Array",e.Struct="Struct",e.Map="Map",e.String="String",e.Int="Integer",e.Long="Long",e.IntArray="IntArray",e.LongArray="LongArray",e.Address="Address"}(jt||(jt={})),function(e){e[e.ByteArray=0]="ByteArray",e[e.Boolean=1]="Boolean",e[e.Integer=2]="Integer",e[e.Interface=64]="Interface",e[e.Array=128]="Array",e[e.Struct=129]="Struct",e[e.Map=130]="Map"}(Yt||(Yt={}));var yr,mr=function(){function e(t,r,n){A()(this,e),this.name=t,this.type=r,this.value=n}return k()(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){return e.type===this.type&&e.name===this.name&&null!=e.value&&(this.value=e.value,!0)}}]),e}(),gr=function e(){A()(this,e)};!function(e){e[e.NEOVM_TYPE=1]="NEOVM_TYPE",e[e.WASMVM_TYPE=3]="WASMVM_TYPE"}(yr||(yr={}));var wr=function(e){function t(){return A()(this,t),$e()(this,(t.__proto__||Xe()(t)).apply(this,arguments))}return tt()(t,e),k()(t,[{key:"serialize",value:function(){var e="";return e+=Se(this.code),e+=xe(this.vmType),e+=ke(this.name),e+=ke(this.version),e+=ke(this.author),e+=ke(this.email),e+=ke(this.description)}},{key:"deserialize",value:function(e){var t=e.readNextBytes();this.code=t;var r=e.readUint8();this.vmType=r;var n=e.readNextBytes();this.name=Ae(n);var a=e.readNextBytes();this.version=Ae(a);var i=e.readNextBytes();this.author=Ae(i);var u=e.readNextBytes();this.email=Ae(u);var s=e.readNextBytes();this.description=Ae(s)}}]),t}(gr),Ar=function(e){function t(){return A()(this,t),$e()(this,(t.__proto__||Xe()(t)).call(this))}return tt()(t,e),k()(t,[{key:"serialize",value:function(){var e="";return e+=Se(this.code)}},{key:"deserialize",value:function(e){var t=e.readNextBytes();return this.code=t,this}}]),t}(gr),Sr=r(12),kr=r.n(Sr),Er=16,br=function(){function e(t){if(A()(this,e),this.value=new Array(Er).fill(0),t&&t.length!==Er)throw new Error("Invalid value: "+t+" for I128.");t&&(this.value=t)}return k()(e,[{key:"compareTo",value:function(e){for(var t=this.value,r=e.value,n=Er-1;n>=0;n--){if(t[n]>r[n])return 1;if(t[n]<r[n])return-1}return 0}},{key:"serialize",value:function(){return ye(this.value)}}],[{key:"deserialize",value:function(t){var r=new e,n=pe(t.read(Er));return r.value=n,r}}]),e}();!function(){function e(t){if(A()(this,e),this.value=new Array(Er).fill(0),t&&t.length!==Er)throw new Error("Invalid value: "+t+" for U128.");t&&(this.value=t)}k()(e,[{key:"compareTo",value:function(e){for(var t=this.value,r=e.value,n=Er-1;n>=0;n--){if(t[n]>r[n])return 1;if(t[n]<r[n])return-1}return 0}},{key:"serialize",value:function(){return ye(this.value)}},{key:"toBigInt",value:function(){var e=ye(this.value),t=Te(e);return qe.fromHexstr(t)}},{key:"toI128",value:function(){return new br(this.value)}}],[{key:"deserialize",value:function(t){var r=new e,n=pe(t.read(Er));return r.value=n,r}}])}();function xr(e,t){return new ue.BigNumber(e).pow(t)}var Ir=xr(2,128),Tr=(xr(2,128).minus(1),xr(2,127).minus(1)),Pr=xr(2,127).negated();function Rr(e){var t=new br;return e<0&&(t=function(){for(var e=[],t=0;t<Er;t++)e[t]=255;return new br(e)}()),function(e,t){e[0]=255&t,t>>=8,e[1]=255&t,t>>=8,e[2]=255&t,t>>=8,e[3]=255&t,t>>=8,e[4]=255&t,t>>=8,e[5]=255&t,t>>=8,e[6]=255&t,t>>=8,e[7]=255&t}(t.value,e),t}function _r(e){var t=new ue.BigNumber(e);if(t.isGreaterThan(Tr)||t.isLessThan(Pr))throw new Error("The value is out of I128 range");t.isLessThan(0)&&(t=t.plus(Ir));var r=2*Er,n=t.toString(16);n=n.length%r==0?n:("0".repeat(r)+n).substring(n.length);for(var a=pe(n=Te(n)),i=new br,u=new Array(Er).fill(0),s=0;s<a.length;s++)u[s]=a[s];return i.value=u,i}var Cr=function(){function e(){A()(this,e),this.list=[]}return k()(e,[{key:"add",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,a=!1,i=void 0;try{for(var u,s=ee()(t);!(n=(u=s.next()).done);n=!0){var o=u.value;this.list.push(o)}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}}}]),e}(),Br=function(e){var t="";return t+=xe(e?ne.PUSHT:ne.PUSHF)},Nr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r="";if(-1===e)r=xe(ne.PUSHM1);else if(0===e)r=xe(ne.PUSH0);else if(e>0&&e<16){var n=ne.PUSH1-1+e;r=xe(n)}else{var a=new qe(e.toString(),t).toHexstr();r=At(a)}return r},Dr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r="";if(e.isEqualTo(-1))r=xe(ne.PUSHM1);else if(e.isEqualTo(0))r=xe(ne.PUSH0);else if(e.isGreaterThan(0)&&e.isLessThan(16)){var n=ne.PUSH1-1+e.toNumber();r=xe(n)}else{var a=new qe(e.toString(),t).toHexstr();r=At(a)}return r},Hr=function(e){var t="";t+=xe(Yt.Struct),t+=xe(e.list.length);var r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e.list);!(r=(i=u.next()).done);r=!0){var s=i.value;if("string"==typeof s)t+=xe(Yt.ByteArray),t+=At(s);else{if("number"!=typeof s)throw m.INVALID_PARAMS;t+=xe(Yt.ByteArray),t+=At(Ie(s))}}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t},Or=function(e){var t="";t+=xe(Yt.Map),t+=xe(e.size);var r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e.keys());!(r=(i=u.next()).done);r=!0){var s=i.value;t+=xe(Yt.ByteArray),t+=At(we(s));var o=e.get(s);if(o&&o.getType()===jt.ByteArray)t+=xe(Yt.ByteArray),t+=At(o.getValue());else if(o&&o.getType()===jt.String)t+=xe(Yt.ByteArray),t+=At(we(o.getValue()));else if(o&&o.getType()===jt.Integer)t+=xe(Yt.Integer),t+=At(Ie(o.getValue()));else{if(!o||o.getType()!==jt.Long)throw m.INVALID_PARAMS;t+=xe(Yt.Integer),t+=At(Ie(o.getValue()))}}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t},Lr=function(e,t){var r="";r+=xe(ne.NEWMAP),r+=xe(ne.TOALTSTACK);var n=!0,a=!1,i=void 0;try{for(var u,s=ee()(e.keys());!(n=(u=s.next()).done);n=!0){var o=u.value;r+=xe(ne.DUPFROMALTSTACK),r+=At(we(o)),r+=zr(e.get(o),t),r+=xe(ne.SETITEM)}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r+=xe(ne.FROMALTSTACK)},zr=function e(t,r){if(!t)throw Error("Parameter can not be undefined");var n="";if(t.type===jt.ByteArray)n+=At(t.value);else if(t.type===jt.Address)n+=At(t.value.serialize());else if(t.type===jt.String)n+=At(we(t.value));else if(t.type===jt.Boolean)n+=Br(Boolean(t.value)),n+=xe(ne.PUSH0),n+=xe(ne.BOOLOR);else if(t.type===jt.Map)n+=Lr(Mr(t),r);else if(t instanceof kr.a)n+=Lr(t,r);else if(t.type===jt.Array){for(var a=t.value.length-1;a>-1;a--)n+=e(t.value[a],r);n+=Nr(t.value.length,r),n+=xe(ne.PACK)}else if(t.type===jt.Integer)n+=Nr(t.value,r),n+=xe(ne.PUSH0),n+=xe(ne.ADD);else{if(t.type!==jt.Long)throw Error("Invalid parameter type: "+I()(t));n+=Dr(new ue.BigNumber(t.value),r),n+=xe(ne.PUSH0),n+=xe(ne.ADD)}return n},Kr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];r.push(we(e.name));var n=[],a=!0,i=!1,u=void 0;try{for(var s,o=ee()(e.parameters);!(a=(s=o.next()).done);a=!0){var c=s.value;c.getType()===jt.String?n.push(we(c.getValue())):c.getType()===jt.Long?n.push(new ue.BigNumber(c.getValue())):c.getType()===jt.Map?n.push(Mr(c)):c.getType()===jt.Address?n.push(c.getValue().serialize()):n.push(c.getValue())}}catch(e){i=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw u}}return r.length>0&&r.push(n),Fr(r,t)};function Ur(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e);!(r=(i=u.next()).done);r=!0){var s=i.value;s.getType&&s.getType()===jt.String?t.push(we(s.getValue())):s.getType&&s.getType()===jt.Long?t.push(new ue.BigNumber(s.getValue())):s.getType&&s.getType()===jt.Array?t.push(Ur(s.value)):s.getType&&s.getType()===jt.Map?t.push(Mr(s)):s.getType&&s.getType()===jt.Address?t.push(s.getValue().serialize()):t.push(s.getValue?s.getValue():s)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}function Mr(e){var t=new kr.a,r=!0,n=!1,a=void 0;try{for(var i,u=ee()(cr()(e.value));!(r=(i=u.next()).done);r=!0){var s=i.value,o=e.value[s];o.type&&o.type===jt.Map?t.set(s,Mr(o)):t.set(s,o)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}function Vr(e){var t=parseInt(e.read(1),16);if(t===Yt.ByteArray)return e.readNextBytes();if(t===Yt.Boolean)return e.readBoolean();if(t===Yt.Integer)return Pe(e.readNextBytes()).toNumber();if(t===Yt.Array||t===Yt.Struct){for(var r=[],n=e.readNextLen();n>0;n--){var a=Vr(e);r.push(a)}return r}if(t===Yt.Map){for(var i=e.readNextLen(),u=new kr.a,s=i;s>0;s--){var o=Ae(Vr(e)),c=Vr(e);u.set(o,c)}return u}throw Error("Invalid parameter type: "+t)}var Gr,Fr=function e(t){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",a=t.length-1;a>=0;a--){var i=t[a];if("string"==typeof i)n+=At(i);else if("number"==typeof i)n+=Nr(i,r);else if("boolean"==typeof i)n+=Br(i);else if(i instanceof ue.BigNumber)n+=Dr(i,r);else if(i instanceof kr.a)n+=Lr(i,r);else if(i instanceof Cr){var u=Hr(i);n+=At(u)}else i instanceof Array&&(n+=e(Ur(i),r),n+=Nr(i.length,r),n+=xe(ne.PACK))}return n},Wr=function(e,t){for(var r="",n=t.length-1;n>-1;n--){switch(t[n].getType()){case jt.Boolean:r+=Br(t[n].getValue());break;case jt.Integer:r+=Nr(t[n].getValue());break;case jt.String:var a=we(t[n].getValue());r+=At(a);break;case jt.ByteArray:r+=At(t[n].getValue());break;case jt.Map:var i=Or(t[n].getValue());r+=At(i);break;case jt.Struct:var u=Hr(t[n].getValue());r+=At(u);break;default:throw new Error("Unsupported param type: "+I()(t[n]))}}return r+=Nr(t.length),r+=xe(ne.PACK),r+=At(we(e))};function Jr(e){var t="",r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e);!(r=(i=u.next()).done);r=!0){var s=i.value;switch(s.getType()){case jt.String:t+=Xr(s.value);break;case jt.Int:t+=Rr(s.value).serialize();break;case jt.Long:t+=_r(s.value).serialize();break;case jt.ByteArray:t+=Qr(s.value);break;case jt.Address:t+=Zr(s.value);break;case jt.Boolean:t+=en(s.value);break;case jt.Array:t+=tn(s.value.length),t+=Jr(s.value);break;default:throw new Error("Not a supported type: "+s.type)}}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}function qr(e){return xe(e,2,!0)}function jr(e){return xe(e,4,!0)}function Yr(e){return xe(e,8,!0)}function Qr(e){if(!Fe(e))throw new Error("[writeVarBytes] The param is not hex string.");var t="";return t+=Ie(e.length/2),t+=e}function Xr(e){return Qr(we(e))}function Zr(e){return e.serialize()}function $r(e){return e.serialize()}function en(e){return e?"01":"00"}function tn(e){var t=[];return e<253?t[0]=e:e<=65535?(t[0]=253,rn(t,1,2,e)):e<=4294967295?(t[0]=254,rn(t,1,4,e)):(t[0]=255,rn(t,1,8,e)),ye(t)}function rn(e,t,r,n){e[t]=n;for(var a=t+1;a<=r;a++)n>>=8*(a-1),e[a]=255&n}!function(e){e[e.Nonce=0]="Nonce",e[e.Script=32]="Script",e[e.DescriptionUrl=129]="DescriptionUrl",e[e.Description=144]="Description"}(Gr||(Gr={}));var nn,an=function(){function e(){A()(this,e)}return k()(e,[{key:"serialize",value:function(){var e="";if(e+=xe(this.usage),this.usage===Gr.Script)e+=this.data;else{if(this.usage!==Gr.DescriptionUrl&&this.usage!==Gr.Description&&this.usage!==Gr.Nonce)throw m.INVALID_PARAMS;e+=Se(this.data)}return e}},{key:"deserialize",value:function(e){var t=parseInt(e.read(1),16),r=e.readNextLen(),n=e.read(r);this.usage=t,this.data=n}}]),e}(),un=function(){function e(){A()(this,e)}return k()(e,[{key:"serialize",value:function(){var e="",t=pt(this.sigData),r="";if(0===this.pubKeys.length)throw new Error("No pubkeys in sig");return r=1===this.pubKeys.length?dt(this.pubKeys[0]):vt(this.pubKeys,this.M),e+=Se(t),e+=Se(r)}}],[{key:"deserialize",value:function(t){var r=new e,n=t.readNextBytes(),a=t.readNextBytes(),i=function(e){for(var t=[],r=new _e(e);!r.isEmpty();)t.push(mt(r));return t}(n),u=function(e){var t=new wt,r=parseInt(e.substr(-2,2),16);if(r===ne.CHECKSIG){var n=gt(new _e(e));return t.M=1,t.pubKeys=[n],t}if(r===ne.CHECKMULTISIG){var a=new _e(e),i=parseInt(a.read(1),16)-ne.PUSH1+1,u=parseInt(e.substr(-4,2),16)-ne.PUSH1+1;t.M=i,t.pubKeys=[];for(var s=0;s<u;s++){var o=gt(a);t.pubKeys.push(o)}return t}throw new Error("Unsupported program.")}(a);return r.M=u.M,r.pubKeys=u.pubKeys,r.sigData=i,r}},{key:"create",value:function(t,r,n){var a=new e;return a.M=1,a.pubKeys=[r.getPublicKey()],a.sigData=[r.sign(t,n).serializeHex()],a}},{key:"createAsync",value:function(){var t=Tt()(xt.a.mark(function t(r,n,a){var i;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new e).M=1,i.pubKeys=[n.getPublicKey()],t.next=5,n.signAsync(r,a);case 5:return t.t0=t.sent.serializeHex(),i.sigData=[t.t0],t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}]),e}();!function(e){e[e.BookKeeper=2]="BookKeeper",e[e.Claim=3]="Claim",e[e.Deploy=208]="Deploy",e[e.Invoke=209]="Invoke",e[e.Enrollment=4]="Enrollment",e[e.Vote=5]="Vote",e[e.InvokeWasm=210]="InvokeWasm"}(nn||(nn={}));!function(){function e(){A()(this,e)}k()(e,[{key:"serialize",value:function(){var e="";return e+=this.amount.serialize(),e+=this.payer.serialize()}}],[{key:"deserialize",value:function(t){var r=new e,n=vr.deserialize(t),a=t.read(20);return r.amount=n,r.payer=new St(a),r}}])}();var sn=function(){function e(){A()(this,e),this.type=209,this.version=0,this.txAttributes=[],this.sigs=[],this.nonce=ye(ze(4)),this.gasPrice=new vr,this.gasLimit=new vr,this.payer=new St("0000000000000000000000000000000000000000")}return k()(e,[{key:"serialize",value:function(){return this.serializeUnsignedData()+this.serializeSignedData()}},{key:"serializeUnsignedData",value:function(){var e="";e+=xe(this.version),e+=xe(this.type),e+=this.nonce,e+=this.gasPrice.serialize(),e+=this.gasLimit.serialize(),e+=this.payer.serialize(),e+=this.payload.serialize(),e+=xe(this.txAttributes.length);for(var t=0;t<this.txAttributes.length;t++)e+=this.txAttributes[t].serialize();return e}},{key:"serializeSignedData",value:function(){var e="";e+=xe(this.sigs.length);for(var t=0;t<this.sigs.length;t++)e+=this.sigs[t].serialize();return e}},{key:"getSignContent",value:function(){var e=this.serializeUnsignedData(),t=re.enc.Hex.parse(e),r=re.SHA256(t).toString();return re.SHA256(re.enc.Hex.parse(r)).toString()}},{key:"getHash",value:function(){return this.getSignContent()}}],[{key:"deserialize",value:function(t){var r=new e,n=new _e(t);r.version=parseInt(n.read(1),16),r.type=parseInt(n.read(1),16),r.nonce=n.read(4),r.gasPrice=vr.deserialize(n),r.gasLimit=vr.deserialize(n),r.payer=new St(n.read(20));var a=void 0;switch(r.type){case nn.Invoke:a=new Ar;break;case nn.Deploy:a=new wr;break;default:a=new Ar}a.deserialize(n),r.payload=a,r.txAttributes=[],r.sigs=[];for(var i=n.readNextLen(),u=0;u<i;u++){var s=new an;s.deserialize(n),r.txAttributes.push(s)}for(var o=n.readNextLen(),c=0;c<o;c++)r.sigs.push(un.deserialize(n));return r}}]),e}(),on=function(e){function t(){return A()(this,t),$e()(this,(t.__proto__||Xe()(t)).apply(this,arguments))}return tt()(t,e),t}(sn);function cn(e,t,r,n,a,i){var u="";u+=t,u+=At(we(e)),u+=At(r.serialize()),u+=Nr(0),u+=xe(ne.SYSCALL),u+=At(we(J));var s=new Ar;s.code=u;var o=void 0;return(o="transfer"===e||"transferFrom"===e?new on:new sn).type=nn.Invoke,o.payload=s,a&&(o.gasLimit=new vr(a)),n&&(o.gasPrice=new vr(n)),i&&(o.payer=i),o}function ln(e){var t="";if("string"==typeof e)t+=At(e);else if("boolean"==typeof e)t+=Br(e);else if("number"==typeof e)t+=Nr(e);else if(e instanceof ue.BigNumber)t+=Dr(e);else if(e instanceof St)t+=At(e.serialize());else if(e instanceof Cr){var r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e.list);!(r=(i=u.next()).done);r=!0){t+=ln(i.value),t+=xe(ne.DUPFROMALTSTACK),t+=xe(ne.SWAP),t+=xe(ne.APPEND)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}}return t}function hn(e){for(var t="",r=e.length-1;r>=0;r--){var n=e[r];if("string"==typeof n)t+=At(n);else if("boolean"==typeof n)t+=Br(n);else if("number"==typeof n)t+=Nr(n);else if(n instanceof ue.BigNumber)t+=Dr(n);else if(n instanceof St)t+=At(n.serialize());else if(n instanceof Cr){t+=Nr(0),t+=xe(ne.NEWSTRUCT),t+=xe(ne.TOALTSTACK);var a=!0,i=!1,u=void 0;try{for(var s,o=ee()(n.list);!(a=(s=o.next()).done);a=!0){t+=ln(s.value),t+=xe(ne.DUPFROMALTSTACK),t+=xe(ne.SWAP),t+=xe(ne.APPEND)}}catch(e){i=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw u}}t+=xe(ne.FROMALTSTACK)}else Array.isArray(n)&&(t+=hn(n),t+=Nr(n.length),t+=xe(ne.PACK))}return t}var fn="0000000000000000000000000000000000000001",dn="0000000000000000000000000000000000000002";function vn(e){if(e===F.TST)return new St(fn);if(e===F.TSG)return new St(dn);throw new Error("Error token type.")}function pn(e){var t=new ue.BigNumber(e);if(!t.isInteger()||t.lte(new ue.BigNumber(0)))throw new Error("Amount is invalid.")}function yn(e,t,r,n,a,i,u){pn(n);var s=new ue.BigNumber(n),o=new Cr;o.add(t,r,s);var c=[];c.push([o]);var l=vn(e),h=cn("transfer",hn(c),l,a,i);return h.tokenType=e,h.from=t,h.to=r,h.amount=n,h.method="transfer",h.payer=u||t,h}function mn(e,t,r,n,a){var i=[],u=!0,s=!1,o=void 0;try{for(var c,l=ee()(t);!(u=(c=l.next()).done);u=!0){var h=c.value;pn(h.value);var f=new Cr;f.add(h.from,h.to,new ue.BigNumber(h.value)),i.push(f)}}catch(e){s=!0,o=e}finally{try{!u&&l.return&&l.return()}finally{if(s)throw o}}var d=[];d.push(i);var v=cn("transfer",hn(d),vn(e),r,n);return a&&(v.payer=a),v}function gn(e,t,r,n,a,i){if(r.length!==n.length)throw new Error("Params error.");for(var u=[],s=0;s<r.length;s++){pn(n[s]);var o=new Cr;o.add(t,r[s],new ue.BigNumber(n[s])),u.push(o)}var c=[];c.push(u);var l=vn(e),h=cn("transfer",hn(c),l,a,i);return h.payer=t,h}function wn(e,t,r,n,a,i){pn(r);var u=new ue.BigNumber(r),s=[],o=new Cr;o.add(e,new St(fn),t,u),s.push(o);var c=cn("transferFrom",hn(s),new St(dn),a,i);return c.payer=n,c.tokenType="TSG",c.from=e,c.to=t,c.amount=r,c.method="transferFrom",c}function An(e,t,r){if("tst"!==(e=e.toLowerCase())&&"tsg"!==e)throw m.INVALID_PARAMS;var n="";n="tsg"===e?dn:fn;var a=[],i=new Cr;return i.add(t,r),a.push(i),cn("allowance",hn(a),new St(n),"0","0")}function Sn(e,t){if("tst"!==(e=e.toLowerCase())&&"tsg"!==e)throw m.INVALID_PARAMS;var r="";return r="tsg"===e?dn:fn,cn("balanceOf",Se(t.serialize()),new St(r),"0","0")}function kn(e){var t=sn.deserialize(e),r=t.payload.serialize(),n=r.lastIndexOf("14000000000000000000000000000000000000000"),a=r.lastIndexOf("140000000000000000000000000000000000000002");if(n>0&&"1"===r.substr(n+41,1))t.tokenType="TST";else{if(!(n>0&&"2"===r.substr(n+41,1)))throw new Error("Not a transfer tx");t.tokenType="TSG"}var i=Math.max(n,a),u=r.substring(0,i),s=u.indexOf("6a7cc86c")+8;if("51c1"===u.substr(s,4)){var o=u.substring(s+6);t.method=Ae(o)}else{var c=u.substring(s+2);t.method=Ae(c)}if("transfer"===t.method){var l=new _e(u);l.pos+=10;var h=new St(l.read(20));t.from=h,l.pos+=8;var f=new St(l.read(20));t.to=f,l.pos+=6;var d=parseInt(l.read(1),16);if("6a7cc8"===l.str.substr(l.pos,6))t.amount=d-80;else{var v=qe.fromHexstr(l.read(d)).value;t.amount=new ue.BigNumber(v).toString()}}else{if("transferFrom"!==t.method)throw new Error("Not a transfer tx");var p=new _e(u);p.pos+=10;var y=new St(p.read(20));t.from=y,p.pos+=56;var m=new St(p.read(20));t.to=m,p.pos+=6;var g=parseInt(p.read(1),16);if("6a7cc8"===p.str.substr(p.pos,6))t.amount=g-80;else{var w=qe.fromHexstr(p.read(g)).value;t.amount=new ue.BigNumber(w).toString()}}return t}var En="0000000000000000000000000000000000000003",bn={regIDWithPublicKey:"regIDWithPublicKey",regIDWithAttributes:"regIDWithAttributes",addAttributes:"addAttributes",removeAttribute:"removeAttribute",getAttributes:"getAttributes",getDDO:"getDDO",addKey:"addKey",removeKey:"removeKey",getPublicKeys:"getPublicKeys",addRecovery:"addRecovery",changeRecovery:"changeRecovery",getKeyState:"getKeyState"};function xn(e,t,r,n,a){var i=bn.regIDWithPublicKey;"did"===e.substr(0,3)&&(e=we(e));var u=new Cr;return u.add(e,t.serializeHex()),cn(i,hn([u]),new St(En),r,n,a)}function In(e,t,r,n,a,i){var u=bn.regIDWithAttributes;"did"===e.substr(0,3)&&(e=we(e));var s=t.length,o=new Cr;o.add(e,r.serializeHex(),s);var c=!0,l=!1,h=void 0;try{for(var f,d=ee()(t);!(c=(f=d.next()).done);c=!0){var v=f.value,p=we(v.key),y=we(v.type),m=we(v.value);o.add(p,y,m)}}catch(e){l=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw h}}return cn(u,hn([o]),new St(En),n,a,i)}function Tn(e,t,r,n,a,i){var u=bn.addAttributes;"did"===e.substr(0,3)&&(e=we(e));var s=new Cr;s.add(e,t.length);var o=!0,c=!1,l=void 0;try{for(var h,f=ee()(t);!(o=(h=f.next()).done);o=!0){var d=h.value,v=we(d.key),p=we(d.type),y=we(d.value);s.add(v,p,y)}}catch(e){c=!0,l=e}finally{try{!o&&f.return&&f.return()}finally{if(c)throw l}}return s.list.push(r.serializeHex()),cn(u,hn([s]),new St(En),n,a,i)}function Pn(e,t,r,n,a,i){var u=bn.removeAttribute;"did"===e.substr(0,3)&&(e=we(e));var s=new Cr;return s.add(e,we(t),r.serializeHex()),cn(u,hn([s]),new St(En),n,a,i)}function Rn(e){var t=bn.getAttributes;"did"===e.substr(0,3)&&(e=we(e));var r=new Cr;return r.add(e),cn(t,hn([r]),new St(En))}function _n(e){var t=bn.getDDO;"did"===e.substr(0,3)&&(e=we(e));var r=new Cr;return r.add(e),cn(t,hn([r]),new St(En))}function Cn(e,t,r,n,a,i){var u=bn.addKey;"did"===e.substr(0,3)&&(e=we(e));var s=e,o=t.serializeHex(),c=void 0;r instanceof ut?c=r.serializeHex():r instanceof St&&(c=r.serialize());var l=new Cr;return l.add(s,o,c),cn(u,hn([l]),new St(En),n,a,i)}function Bn(e,t,r,n,a,i){var u=bn.removeKey;"did"===e.substr(0,3)&&(e=we(e));var s=e,o=t.serializeHex(),c=void 0;r instanceof ut?c=r.serializeHex():r instanceof St&&(c=r.serialize());var l=new Cr;return l.add(s,o,c),cn(u,hn([l]),new St(En),n,a,i)}function Nn(e){var t=bn.getPublicKeys;"did"===e.substr(0,3)&&(e=we(e));var r=new Cr;return r.add(e),cn(t,hn([r]),new St(En))}function Dn(e,t,r,n,a,i){var u=bn.addRecovery;"did"===e.substr(0,3)&&(e=we(e));var s=e,o=t,c=r.serializeHex(),l=new Cr;return l.add(s,o,c),cn(u,hn([l]),new St(En),n,a,i)}function Hn(e,t,r,n,a,i){var u=bn.changeRecovery;"did"===e.substr(0,3)&&(e=we(e));var s=e,o=t,c=r,l=new Cr;l.add(s,o,c);var h=cn(u,hn([l]),new St(En),n,a);return h.payer=i||r,h}function On(e,t){var r=bn.getKeyState;"did"===e.substr(0,3)&&(e=we(e)),console.log("did: "+e);var n=xe(t,4,!0);console.log("index: "+n);var a=new Cr;return a.add(e,t),cn(r,hn([a]),new St(En))}var Ln={Action:"sendrawtransaction",Version:"1.0.0",Type:"",Op:"test"},zn=function(e,t,r){var n=un.create(e,t,r);e.sigs=[n]},Kn=function(){var e=Tt()(xt.a.mark(function e(t,r,n){var a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un.createAsync(t,r,n);case 2:a=e.sent,t.sigs=[a];case 4:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),Un=function(e,t,r){var n=un.create(e,t,r);e.sigs.push(n)},Mn=function(e,t){if(e===t)return!0;if(e.sort(ot),t.sort(ot),e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].key!==t[r].key)return!1;return!0},Vn=function(e,t,r,n,a){if(0===e.sigs.length)e.sigs=[];else{if(e.sigs.length>q||t>r.length||t<=0||0===r.length)throw m.INVALID_PARAMS;for(var i=0;i<e.sigs.length;i++)if(Mn(e.sigs[i].pubKeys,r)){if(e.sigs[i].sigData.length+1>r.length)throw new Error("Too many sigData");var u=n.sign(e,a).serializeHex();return void e.sigs[i].sigData.push(u)}}var s=new un;s.M=t,s.pubKeys=r,s.sigData=[n.sign(e,a).serializeHex()],e.sigs.push(s)},Gn=function(e,t,r,n,a,i){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=new sn;s.type=nn.Invoke;var o="";if("string"==typeof t)o=t;else{var c=new pr(e,"",t);o=Kr(c,u)}var l=o+xe(ne.APPCALL);l+=r.serialize();var h=new Ar;return h.code=l,s.payload=h,a&&(s.gasLimit=new vr(a)),n&&(s.gasPrice=new vr(n)),i&&(s.payer=i),s};function Fn(e,t){var r="";return r+=e.serialize(),r+=Qr(Jr(t))}function Wn(e,t,r,n,a,i){var u=new sn;u.type=nn.InvokeWasm;var s=Fn(r,[new mr("method",jt.String,e)].concat(dr()(t))),o=new Ar;return o.code=s,u.payload=o,a&&(u.gasLimit=new vr(a)),n&&(u.gasPrice=new vr(n)),i&&(u.payer=i),u}function Jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1.0",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments[6],s=arguments[7],o=arguments[8],c=arguments[9],l=new wr;l.author=n,l.code=e,l.version=r,l.description=i,l.email=a,l.name=t,l.vmType="boolean"==typeof u?yr.NEOVM_TYPE:u;var h=new sn;return h.version=0,h.payload=l,h.type=nn.Deploy,h.gasLimit=new vr(o),h.gasPrice=new vr(s),c&&(h.payer=c),h}function qn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{PreExec:"1"}:{},r=e.serialize();return I()(hr()({},Ln,{Data:r},t))}function jn(e,t){var r=e.serialize();return{jsonrpc:"2.0",method:t||"sendrawtransaction",params:[r],id:10}}function Yn(e){return{Action:"sendrawtransaction",Version:"1.0.0",Data:e.serialize()}}function Qn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1));var r=e+U.sendRawTx;return t&&(r+="?preExec=1"),r}function Xn(e){if(e.split(":").length<2)throw new Error("Invalid parameter. "+e);var t=e.substring(0,e.indexOf(":")),r=e.substring(e.indexOf(":")+1),n=new mr("",t,r);return n.type===jt.Address&&(n.type=jt.ByteArray,n.value=new St(n.value).serialize()),n}function Zn(e){var t={},r=!0,n=!1,a=void 0;try{for(var i,u=ee()(cr()(e));!(r=(i=u.next()).done);r=!0){var s=i.value,o=e[s];"number"==typeof o?t[s]=new mr("",jt.Integer,o):"boolean"==typeof o?t[s]=new mr("",jt.Boolean,o):Array.isArray(o)?t[s]=new mr("",jt.Array,$n(o)):"object"===(void 0===o?"undefined":sr()(o))?t[s]=new mr("",jt.Map,Zn(o)):"string"==typeof o&&(t[s]=Xn(o))}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}function $n(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e);!(r=(i=u.next()).done);r=!0){var s=i.value,o=new mr("",jt.ByteArray,s);"number"==typeof s?o.type=jt.Integer:"boolean"==typeof s?o.type=jt.Boolean:Array.isArray(s)?(o.type=jt.Array,o.value=$n(s)):"object"===(void 0===s?"undefined":sr()(s))?(o.type=jt.Map,o.value=Zn(s)):"string"==typeof s&&(o=Xn(s)),t.push(o)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}function ea(e){var t=e.name,r=e.value,n=new mr(t,jt.ByteArray,r);return"number"==typeof r?(n.type=jt.Integer,n.value=Number(r)):"boolean"==typeof r?(n.type=jt.Boolean,n.value=Boolean(r)):Array.isArray(r)?(n.type=jt.Array,n.value=$n(r)):"object"===(void 0===r?"undefined":sr()(r))?(n.type=jt.Map,n.value=Zn(r)):"string"==typeof r&&(n=Xn(r)),n}function ta(e){var t=[],r=e.functions,n=!0,a=!1,i=void 0;try{for(var u,s=ee()(r);!(n=(u=s.next()).done);n=!0){var o=u.value,c=o.operation,l=o.args,h=[];h.push(we(c));var f=[],d=!0,v=!1,p=void 0;try{for(var y,m=ee()(l);!(d=(y=m.next()).done);d=!0){var g=y.value;f.push(ea(g))}}catch(e){v=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw p}}h.push(f),t.push(h)}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return t}function ra(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error("Invalid parameter. Expect JSON object");if(!e.action||"invoke"!==e.action&&"invokeRead"!==e.action&&"invokePasswordFree"!==e.action)throw new Error('Invalid parameter. The action type must be "invoke or invokeRead"');if(!e.params||!e.params.invokeConfig)throw new Error("Invalid parameter. The params can not be empty.");var r=e.params.invokeConfig,n=r.payer,a=r.gasPrice,i=r.gasLimit,u=r.contractHash;if(!u)throw new Error("Invalid parameter. The contractHash can not be empty.");var s=new St(Te(u));n=n?new St(n):null,a=a+""||"500",i=i+""||"200000";var o=[];if(u.indexOf("00000000000000000000000000000000000000")>-1){var c=na(r);o.push(c)}else{var l=ta(r),h=!0,f=!1,d=void 0;try{for(var v,p=ee()(l);!(h=(v=p.next()).done);h=!0){var y=v.value,m=Fr(y,t),g=Gn("",m,s,a,i,n,t);o.push(g)}}catch(e){f=!0,d=e}finally{try{!h&&p.return&&p.return()}finally{if(f)throw d}}}return o}function na(e){var t=e.functions[0],r=t.args;if(e.contractHash.indexOf("02")>-1||e.contractHash.indexOf("01")>-1){var n=e.contractHash.indexOf("02")>-1?"TSG":"TST";if("transfer"===t.operation){var a=new St(r[0].value.split(":")[1]),i=new St(r[1].value.split(":")[1]),u=r[2].value.split(":")[1]+"",s=new St(e.payer);return yn(n,a,i,u,e.gasPrice,e.gasLimit,s)}}else if(e.contractHash.indexOf("03")>-1){if("regIDWithPublicKey"===t.operation){var o=r[0].value.substr(r[0].value.indexOf(":")+1),c=new ut(r[1].value.split(":")[1]),l=new St(e.payer);return xn(o,c,e.gasPrice,e.gasLimit,l)}if("getDDO"===t.operation)return _n(r[0].value.substr(r[0].value.indexOf(":")+1))}}var aa=r(30),ia=function(){function e(){A()(this,e),this["enc-alg"]="aes-256-gcm",this.hash="sha256"}return k()(e,[{key:"toJson",value:function(){return I()(this.toJsonObj())}},{key:"toJsonObj",value:function(){return b()({address:this.address.toBase58(),label:this.label,lock:this.lock},this.encryptedKey.serializeJson(),{"enc-alg":this["enc-alg"],hash:this.hash,salt:this.salt,isDefault:this.isDefault,publicKey:this.publicKey,signatureScheme:this.encryptedKey.algorithm.defaultSchema.label})}},{key:"exportPrivateKey",value:function(e,t){return this.encryptedKey.decrypt(e,this.address,this.salt,t)}},{key:"signTransaction",value:function(e,t,r){var n=this.exportPrivateKey(e,r);return zn(t,n,n.algorithm.defaultSchema),t}}],[{key:"importAccount",value:function(t,r,n,a,i,u){var s=new e,o=Buffer.from(i,"base64").toString("hex"),c=r.decrypt(n,a,o,u);t||(t=ye(ze(4))),s.label=t,s.lock=!1,s.isDefault=!1,s.salt=i,s.encryptedKey=r;var l=c.getPublicKey();return s.publicKey=l.key,s.address=St.fromPubKey(l),s}},{key:"importWithMnemonic",value:function(t,r,n,a){if(r=r.trim(),!T.validateMnemonic(r))throw m.INVALID_PARAMS;var i=T.mnemonicToSeedHex(r),u=aa.fromMasterSeed(Buffer.from(i,"hex")).derive(j),s=Buffer.from(u.privateKey).toString("hex"),o=new Gt(s);return e.create(o,n,t,a)}},{key:"create",value:function(t,r,n,a){var i=new e;n||(n=ye(ze(4))),i.label=n,i.lock=!1,i.isDefault=!1;var u=Ke(16),s=t.getPublicKey(),o=St.fromPubKey(s);return i.publicKey=s.serializeHex(),i.address=o,i.encryptedKey=t.encrypt(r,o,u,a),i.salt=Buffer.from(u,"hex").toString("base64"),i}},{key:"parseJson",value:function(t){return e.parseJsonObj(JSON.parse(t))}},{key:"parseJsonObj",value:function(t){var r=new e;return r.address=new St(t.address),r.label=t.label,r.lock=t.lock,r.isDefault=t.isDefault,r.publicKey=t.publicKey,r.hash=t.hash,r.salt=t.salt,r.encryptedKey=qt({algorithm:t.algorithm,parameters:t.parameters,key:t.key,external:t.external}),r.extra=t.extra,r}}]),e}(),ua=r(21),sa=r.n(ua),oa="/api/v1/transaction",ca="/api/v1/transaction/",la="/api/v1/node/connectioncount",ha="/api/v1/block/height",fa="/api/v1/block/details/height/",da="/api/v1/block/details/hash/",va="/api/v1/balance/",pa="/api/v1/contract/",ya="/api/v1/smartcode/event/transactions/",ma="/api/v1/smartcode/event/txhash/",ga="/api/v1/block/height/txhash/",wa="/api/v1/storage/",Aa="/api/v1/merkleproof/",Sa="/api/v1/allowance/",ka="/api/v1/block/transactions/height/",Ea="/api/v1/unboundtsg/",ba="/api/v1/granttsg/",xa="/api/v1/mempool/txcount",Ia="/api/v1/mempool/txstate/",Ta="/api/v1/version",Pa="/api/v1/gasprice",Ra=function(){function e(t){A()(this,e),this.version="v1.0.0",this.action="sendrawtransaction",this.url=t||V.REST_URL,"/"===this.url[this.url.length-1]&&(this.url=this.url.substring(0,this.url.length-1))}return k()(e,[{key:"concatParams",value:function(e){var t="";if(0===e.size)return"";var r=!0,n=!1,a=void 0;try{for(var i,u=ee()(e.keys());!(r=(i=u.next()).done);r=!0){var s=i.value,o=e.get(s);o&&(o=encodeURIComponent(o)),t+="&"+s+"="+o}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return"?"+t.substr(1)}},{key:"getUrl",value:function(){return this.url}},{key:"sendRawTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],n=new kr.a;r&&n.set("userid",r),t&&n.set("preExec","1");var a=this.url+oa;a+=this.concatParams(n);var i={Action:this.action,Version:this.version,Data:e};return de.a.post(a,i).then(function(e){return e.data})}},{key:"getRawTransaction",value:function(e){var t=new kr.a;t.set("raw","1");var r=this.url+ca+e;return r+=this.concatParams(t),de.a.get(r).then(function(e){return e.data})}},{key:"getRawTransactionJson",value:function(e){var t=new kr.a;t.set("raw","0");var r=this.url+ca+e;return r+=this.concatParams(t),de.a.get(r).then(function(e){return e.data})}},{key:"getNodeCount",value:function(){var e=this.url+la;return de.a.get(e).then(function(e){return e.data})}},{key:"getBlockHeight",value:function(){var e=this.url+ha;return de.a.get(e).then(function(e){return e.data})}},{key:"getBlock",value:function(e){var t=new kr.a;t.set("raw","1");var r="";return"number"==typeof e?r=this.url+fa+e:"string"==typeof e&&(r=this.url+da+e),r+=this.concatParams(t),de.a.get(r).then(function(e){return e.data})}},{key:"getContract",value:function(e){var t=new kr.a;t.set("raw","1");var r=this.url+pa+e;return r+=this.concatParams(t),de.a.get(r).then(function(e){return e.data})}},{key:"getContractJson",value:function(e){var t=new kr.a;t.set("raw","0");var r=this.url+pa+e;return r+=this.concatParams(t),de.a.get(r).then(function(e){return e.data})}},{key:"getSmartCodeEvent",value:function(e){var t="";return"string"==typeof e?t=this.url+ma+e:"number"==typeof e&&(t=this.url+ya+e),de.a.get(t).then(function(e){return e.data})}},{key:"getBlockHeightByTxHash",value:function(e){var t=this.url+ga+e;return de.a.get(t).then(function(e){return e.data})}},{key:"getStorage",value:function(e,t){var r=this.url+wa+e+"/"+t;return de.a.get(r).then(function(e){return e.data})}},{key:"getMerkleProof",value:function(e){var t=this.url+Aa+e;return console.log("url: "+t),de.a.get(t).then(function(e){return e.data})}},{key:"getBalance",value:function(e){var t=this.url+va+e.toBase58();return de.a.get(t).then(function(e){return e.data})}},{key:"getBlockJson",value:function(e){var t="";return"number"==typeof e?t=this.url+fa+e:"string"==typeof e&&(t=this.url+da+e),de.a.get(t).then(function(e){return e.data})}},{key:"getAllowance",value:function(e,t,r){if("tst"!==(e=e.toLowerCase())&&"tsg"!==e)throw m.INVALID_PARAMS;var n=this.url+Sa+e.toLowerCase()+"/"+t.toBase58()+"/"+r.toBase58();return de.a.get(n).then(function(e){return e.data})}},{key:"getUnboundTsg",value:function(e){var t=this.url+Ea+e.toBase58();return de.a.get(t).then(function(e){return e.data})}},{key:"getBlockTxsByHeight",value:function(e){var t=this.url+ka+e;return de.a.get(t).then(function(e){return e.data})}},{key:"getGasPrice",value:function(){var e=this.url+Pa;return de.a.get(e).then(function(e){return e.data})}},{key:"getGrantTsg",value:function(e){var t=this.url+ba+e.toBase58();return de.a.get(t).then(function(e){return e.data})}},{key:"getMempoolTxCount",value:function(){var e=this.url+xa;return de.a.get(e).then(function(e){return e.data})}},{key:"getMempoolTxState",value:function(e){var t=this.url+Ia+e;return de.a.get(t).then(function(e){return e.data})}},{key:"getVersion",value:function(){var e=this.url+Ta;return de.a.get(e).then(function(e){return e.data})}}]),e}(),_a=r(22),Ca=r.n(_a),Ba=function(){function e(){var t=this;A()(this,e),this.resolve=function(e){t._resolve(e)},this.reject=function(e){t._reject(e)},this._promise=new Ca.a(function(e,r){t._resolve=e,t._reject=r})}return k()(e,[{key:"promise",get:function(){return this._promise}}]),e}();function Na(){return{Action:"subscribe",Version:"1.0.0",SubscribeEvent:arguments.length>0&&void 0!==arguments[0]&&arguments[0],SubscribeJsonBlock:arguments.length>1&&void 0!==arguments[1]&&arguments[1],SubscribeRawBlock:arguments.length>2&&void 0!==arguments[2]&&arguments[2],SubscribeBlockTxHashs:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function Da(e){var t={Action:"sendrawtransaction",Version:"1.0.0",Data:e};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=hr()(t,{PreExec:"1"})),t}function Ha(e){return{Action:"gettransaction",Version:"1.0.0",Hash:e,Raw:"1"}}function Oa(e){return{Action:"gettransaction",Version:"1.0.0",Hash:e,Raw:"0"}}function La(e){var t={};return"number"==typeof e?t={Action:"getblockbyheight",Version:"1.0.0",Height:e,Raw:"1"}:"string"==typeof e&&(t={Action:"getblockbyhash",Version:"1.0.0",Hash:e,Raw:"1"}),t}function za(e){var t={};return"number"==typeof e?t={Action:"getblockbyheight",Version:"1.0.0",Height:e}:"string"==typeof e&&(t={Action:"getblockbyhash",Version:"1.0.0",Hash:e}),t}function Ka(e){return{Action:"getbalance",Version:"1.0.0",Addr:e.toBase58()}}function Ua(e){return{Action:"getunboundtsg",Version:"1.0.0",Addr:e.toBase58()}}function Ma(e){return{Action:"getcontract",Version:"1.0.0",Hash:e,Raw:"1"}}function Va(e){return{Action:"getcontract",Version:"1.0.0",Hash:e,Raw:"0"}}function Ga(e){var t={};return"number"==typeof e?t={Action:"getsmartcodeeventbyheight",Version:"1.0.0",Height:e}:"string"==typeof e&&(t={Action:"getsmartcodeeventbyhash",Version:"1.0.0",Hash:e}),t}function Fa(e){return{Action:"getblockheightbytxhash",Version:"1.0.0",Hash:e}}function Wa(e,t){return{Action:"getstorage",Version:"1.0.0",Hash:e,Key:t}}function Ja(e){return{Action:"getmerkleproof",Version:"1.0.0",Hash:e}}function qa(e,t,r){return{Action:"getallowance",Version:"1.0.0",Asset:e,From:t.toBase58(),To:r.toBase58()}}function ja(e){return{Action:"getblockhash",Version:"1.0.0",Height:e}}function Ya(e){return{Action:"getblocktxsbyheight",Version:"1.0.0",Height:e}}function Qa(e){return{Action:"getgranttsg",Version:"1.0.0",Addr:e.toBase58()}}function Xa(e){return{Action:"getmempooltxstate",Version:"1.0.0",Hash:e}}var Za=r(39),$a=r(24),ei=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V.SOCKET_URL,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];A()(this,e),this.debug=n,this.wsp=new Za(r,{createWebSocket:function(e){return new $a(e)},attachRequestId:function(e,t){return b()({Id:t},e)},extractRequestId:function(e){return e&&e.Id},packMessage:function(e){return I()(e)},unpackMessage:function(e){return JSON.parse(e)}}),this.wsp.onOpen.addListener(function(){t.debug&&console.log("connected")}),this.wsp.onClose.addListener(function(){t.debug&&console.log("disconnected")}),this.wsp.onSend.addListener(function(e){t.debug&&console.log("sent: ",e)}),this.wsp.onMessage.addListener(function(e){t.debug&&console.log("received: ",e)}),this.wsp.onError.addListener(function(e){t.debug&&console.log("error: ",e)})}return k()(e,null,[{key:"generateReqId",value:function(){return Math.floor(1e9*Math.random())}}]),k()(e,[{key:"send",value:function(){var t=Tt()(xt.a.mark(function t(r){var n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.wsp.open();case 5:return t.next=7,this.wsp.sendRequest(r,{requestId:e.generateReqId()});case 7:return n=t.sent,t.abrupt("return",n);case 9:if(t.prev=9,!a){t.next=13;break}return t.next=13,this.wsp.close();case 13:return t.finish(9);case 14:case"end":return t.stop()}},t,this,[[0,,9,14]])}));return function(e){return t.apply(this,arguments)}}()},{key:"addListener",value:function(e){this.wsp.onUnpackedMessage.addListener(e)}},{key:"close",value:function(){this.wsp.close()}}]),e}(),ti=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V.SOCKET_URL,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];A()(this,e),this.autoClose=n,this.promises=new kr.a,this.sender=new ei(t,r),this.sender.addListener(this.notifyListener.bind(this))}return k()(e,[{key:"sendHeartBeat",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"heartbeat",Version:"V1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendSubscribe",value:function(){var e=Tt()(xt.a.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Na(r,n,a,i),e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a,i,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Da(t,u),e.next=3,this.send(r,this.autoClose&&!s);case 3:if(0===(n=e.sent).Error){e.next=7;break}throw console.log(n),new Error(I()(n));case 7:if(!s){e.next=14;break}return a=n.Result,i=new Ba,this.promises.set(a,i),e.abrupt("return",i.promise);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRawTransaction",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ha(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRawTransactionJson",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getNodeCount",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"getconnectioncount",Version:"1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBlockHeight",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"getblockheight",Version:"1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=La(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getBlockJson",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=za(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ka(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getUnboundtsg",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ua(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getContract",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ma(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getContractJson",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSmartCodeEvent",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ga(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getBlockHeightByTxHash",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getStorage",value:function(){var e=Tt()(xt.a.mark(function e(t,r){var n;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wa(t,r),e.abrupt("return",this.send(n));case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMerkleProof",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ja(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllowance",value:function(){var e=Tt()(xt.a.mark(function e(t,r,n){var a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=qa(t,r,n),e.abrupt("return",this.send(a));case 2:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getBlockHash",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ja(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getBlockTxsByHeight",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ya(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getGasPrice",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"getgasprice",Version:"1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getGrantTsg",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qa(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getMempoolTxCount",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"getmempooltxcount",Version:"1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMempoolTxState",value:function(){var e=Tt()(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),e.abrupt("return",this.send(r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"getversion",Version:"1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getNetworkId",value:function(){var e=Tt()(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={Action:"getnetworkid",Version:"1.0.0"},e.abrupt("return",this.send(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addNotifyListener",value:function(e){this.sender.addListener(function(t){"Notify"===t.Action&&e(t)})}},{key:"close",value:function(){this.sender.close()}},{key:"send",value:function(){var e=Tt()(xt.a.mark(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.autoClose;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sender.send(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"notifyListener",value:function(e){if("Notify"===e.Action||"Log"===e.Action){var t=e.Result.TxHash;if(void 0!==t){var r=this.promises.get(t);void 0!==r?(this.promises.delete(t),r.resolve(e)):console.warn("Received Notify event for unknown transaction"),this.autoClose&&this.sender.close()}}}}]),e}(),ri=function(){function e(){A()(this,e),this.functions=[]}return k()(e,[{key:"getHash",value:function(){return this.hash}},{key:"getEntryPoint",value:function(){return this.entrypoint}},{key:"getFunction",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.functions);!(t=(a=i.next()).done);t=!0){var u=a.value;if(u.name===e){var s=u.parameters.map(function(e){return new mr(e.name,e.type,"")});return new pr(u.name,u.returntype,s)}}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}throw Error("not found")}}],[{key:"parseJson",value:function(t){var r=new e,n=JSON.parse(t);return r.hash=n.hash,r.entrypoint=n.entrypoint,r.functions=n.functions,r}}]),e}(),ni=ri.parseJson(I()({hash:"36bb5c053b6b839c8f6b923fe852f91239b9fccc",entrypoint:"Main",functions:[{name:"Main",parameters:[{name:"operation",type:"String"},{name:"args",type:"Array"}],returntype:"Any"},{name:"Commit",parameters:[{name:"claimId",type:"ByteArray"},{name:"commiterId",type:"ByteArray"},{name:"ownerId",type:"ByteArray"}],returntype:"Boolean"},{name:"Revoke",parameters:[{name:"claimId",type:"ByteArray"},{name:"tstId",type:"ByteArray"}],returntype:"Boolean"},{name:"GetStatus",parameters:[{name:"claimId",type:"ByteArray"}],returntype:"ByteArray"}],events:[{name:"ErrorMsg",parameters:[{name:"arg1",type:"ByteArray"},{name:"arg2",type:"String"}],returntype:"Void"},{name:"Push",parameters:[{name:"arg1",type:"ByteArray"},{name:"arg2",type:"String"},{name:"arg3",type:"ByteArray"}],returntype:"Void"}]})),ai=ni.getHash().replace("0x",""),ii=new St(Te(ai));function ui(e,t,r,n,a,i){var u=ni.getFunction("Commit");"did"===t.substr(0,3)&&(t=we(t)),"did"===r.substr(0,3)&&(r=we(t));var s=new mr(u.parameters[0].getName(),jt.ByteArray,we(e)),o=new mr(u.parameters[1].getName(),jt.ByteArray,t),c=new mr(u.parameters[2].getName(),jt.ByteArray,r);new sn;return Gn(u.name,[s,o,c],ii,n,a,i)}function si(e,t,r,n,a){var i=ni.getFunction("Revoke"),u=i.parameters[0].getName(),s=jt.ByteArray;"did"===t.substr(0,3)&&(t=we(t));var o=new mr(u,s,we(e)),c=new mr(i.parameters[1].getName(),jt.ByteArray,t);return Gn(i.name,[o,c],ii,r,n,a)}function oi(e){var t=ni.getFunction("GetStatus"),r=new mr(t.parameters[0].getName(),jt.ByteArray,we(e));return Gn(t.name,[r],ii)}var ci,li=function(){function e(){A()(this,e),this.Action="Notify"}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;return r.Action=t.Action,r.Error=t.Error,r.Desc=t.Desc,r.Result=hi.deserialize(t.Result),r}}]),e}(),hi=function(){function e(){A()(this,e)}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;return r.TxHash=t.TxHash,r.State=t.State,r.GasConsumed=t.GasConsumed,r.Notify=t.Notify.map(function(e){return{ContractAddress:e.ContractAddress,States:e.States.map(function(e){return"string"==typeof e?Ae(e):e})}}),r.Version=t.Version,r}}]),e}(),fi=r(40),di=r.n(fi),vi=r(41),pi=function(){function e(){A()(this,e)}return k()(e,null,[{key:"deserialize",value:function(t){for(var r=new _e(t),n=[];!r.isEmpty();){var a=r.readUint32(),i=r.readNextBytes(),u=new e;u.id=a,u.pk=ut.deserializeHex(new _e(i)),n.push(u)}return n}}]),e}(),yi=function(){function e(){A()(this,e)}return k()(e,[{key:"serialize",value:function(){var e="";return e+=ke(this.key),e+=ke(this.type),e+=ke(this.value)}}],[{key:"deserialize",value:function(t){for(var r=new _e(t),n=[];!r.isEmpty();){var a=Ae(r.readNextBytes()),i=Ae(r.readNextBytes()),u=Ae(r.readNextBytes()),s=new e;s.key=a,s.type=i,s.value=u,n.push(s)}return n}}]),e}(),mi=function(){function e(){A()(this,e),this.publicKeys=[],this.attributes=[],this.recovery=""}return k()(e,null,[{key:"deserialize",value:function(t){var r=new _e(t),n=new e,a=r.readNextLen();a>0&&(n.publicKeys=pi.deserialize(r.read(a)));var i=r.readNextLen();i>0&&(n.attributes=yi.deserialize(r.read(i)));var u=r.readNextLen();return u>0&&(n.recovery=r.read(u)),n}}]),e}(),gi=function(){function e(t,r){A()(this,e),this.metadata=t,this.signature=r,void 0===this.metadata.messageId&&(this.metadata.messageId=vi())}return k()(e,null,[{key:"deserializeInternal",value:function(t,r){var n=t.split(".",3);if(n.length<2)throw new Error("Invalid message.");var a=e.deserializeHeader(n[0]),i=e.deserializePayload(n[1]),u=void 0;if(n.length>2){if(void 0===a.algorithm||void 0===a.publicKeyId)throw new Error("Signature scheme was not specified.");u=Mt.deserializeJWT(n[2],a.algorithm,a.publicKeyId)}var s=r(i.metadata,u);return s.payloadFromJSON(i.rest),s}},{key:"deserializePayload",value:function(e){var t=Ut.decode(e),r=JSON.parse(t);return{metadata:{messageId:r.jti,issuer:r.iss,subject:r.sub,issuedAt:r.iat,expireAt:r.exp},rest:di()(r,["jti","iss","sub","iat","exp"])}}},{key:"deserializeHeader",value:function(e){var t=Ut.decode(e),r=JSON.parse(t);return{algorithm:void 0!==r.alg?je.fromLabelJWS(r.alg):void 0,publicKeyId:r.kid}}}]),k()(e,[{key:"sign",value:function(){var e=Tt()(xt.a.mark(function e(t,r,n,a){var i;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi(r,t);case 2:return void 0===a&&(a=n.algorithm.defaultSchema),i=this.serializeUnsigned(a,r),e.next=6,n.signAsync(i,a,r);case 6:this.signature=e.sent;case 7:case"end":return e.stop()}},e,this)}));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"verify",value:function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(r=this.signature)||void 0===r.publicKeyId){e.next=24;break}if(e.prev=2,this.verifyKeyOwnership()){e.next=5;break}return e.abrupt("return",!1);case 5:if(this.verifyExpiration()){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,Ai(r.publicKeyId,t);case 9:if(e.sent!==st.REVOKED){e.next=12;break}return e.abrupt("return",!1);case 12:return e.next=14,wi(r.publicKeyId,t);case 14:return n=e.sent,a=this.serializeUnsigned(r.algorithm,r.publicKeyId),e.abrupt("return",n.verify(a,r));case 19:return e.prev=19,e.t0=e.catch(2),e.abrupt("return",!1);case 22:e.next=25;break;case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}},e,this,[[2,19]])}));return function(t){return e.apply(this,arguments)}}()},{key:"serializeUnsigned",value:function(e,t){return this.serializeHeader(e,t)+"."+this.serializePayload()}},{key:"serialize",value:function(){var e=this.signature;if(void 0!==e){var t=e.serializeJWT();return this.serializeUnsigned(e.algorithm,e.publicKeyId)+"."+t}return this.serializeUnsigned()}},{key:"serializeHeader",value:function(e,t){var r=void 0;r=void 0!==e?{alg:e.labelJWS,typ:"JWT",kid:t}:{typ:"JWT"};var n=I()(r);return Ut.encode(n,"utf-8")}},{key:"verifyExpiration",value:function(){return void 0===this.metadata.expireAt||De()<this.metadata.expireAt}},{key:"verifyKeyOwnership",value:function(){var e=this.signature;return void 0!==e&&void 0!==e.publicKeyId&&Si(e.publicKeyId)===this.metadata.issuer}},{key:"serializePayload",value:function(){var e={jti:this.metadata.messageId,iss:this.metadata.issuer,sub:this.metadata.subject,iat:this.metadata.issuedAt,exp:this.metadata.expireAt},t=this.payloadToJSON(),r=I()(b()({},e,t));return Ut.encode(r,"utf-8")}}]),e}(),wi=function(){var e=Tt()(xt.a.mark(function e(t,r){var n,a,i,u,s,o,c;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Si(t),a=ki(t),i=new Ra(r),u=_n(n),e.next=6,i.sendRawTransaction(u.serialize(),!0);case 6:if(!(s=e.sent).Result||!s.Result.Result){e.next=15;break}if(o=mi.deserialize(s.Result.Result),void 0!==(c=o.publicKeys.find(function(e){return e.id===a}))){e.next=12;break}throw new Error("Not found");case 12:return e.abrupt("return",c.pk);case 15:throw new Error("Not found");case 16:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Ai=function(){var e=Tt()(xt.a.mark(function e(t,r){var n,a,i,u,s;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Si(t),a=ki(t),i=new Ra(r),u=On(n,a),e.next=6,i.sendRawTransaction(u.serialize(),!0);case 6:if(!(s=e.sent).Result||!s.Result.Result){e.next=11;break}return e.abrupt("return",st.fromHexLabel(s.Result.Result));case 11:throw new Error("Not found");case 12:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}();function Si(e){var t=e.indexOf("#keys-");if(-1===t)throw new Error("Is not a publicKeId.");return e.substr(0,t)}function ki(e){var t=e.indexOf("#keys-");if(-1===t)throw new Error("Is not a publicKeId.");return Number(e.substr(t+"#keys-".length))}!function(e){e.AttestContract="AttestContract",e.RevocationList="RevocationList"}(ci||(ci={}));var Ei,bi=function(e){function t(e,r,n){A()(this,t);var a=$e()(this,(t.__proto__||Xe()(t)).call(this,e,r));return a.useProof=!0===n,a}return tt()(t,e),k()(t,null,[{key:"deserialize",value:function(e){return sa()(t.__proto__||Xe()(t),"deserializeInternal",this).call(this,e,function(e,r){return new t(e,r)})}}]),k()(t,[{key:"verify",value:function(){var e=Tt()(xt.a.mark(function e(r){var n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa()(t.prototype.__proto__||Xe()(t.prototype),"verify",this).call(this,r);case 2:if(!(n=e.sent)||!a){e.next=7;break}return e.abrupt("return",this.getStatus(r));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"serialize",value:function(){return this.useProof?sa()(t.prototype.__proto__||Xe()(t.prototype),"serialize",this).call(this)+"."+this.serializeProof():sa()(t.prototype.__proto__||Xe()(t.prototype),"serialize",this).call(this)}},{key:"attest",value:function(){var e=Tt()(xt.a.mark(function e(t,r,n,a,i){var u,s,o,c,l,h,f;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=this.metadata.issuer,s=this.metadata.subject,void 0!==(o=this.metadata.messageId)){e.next=5;break}throw new Error("Claim id not specified.");case 5:return c=new ti(t),l=ui(o,u,s,r,n,a),e.next=9,Kn(l,i);case 9:return e.next=11,c.sendRawTransaction(l.serialize(),!1,!0);case 11:return h=e.sent,f=li.deserialize(h),console.log(I()(f)),e.abrupt("return","Push"===f.Result.Notify[0].States[0]);case 15:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"revoke",value:function(){var e=Tt()(xt.a.mark(function e(t,r,n,a,i){var u,s,o,c,l,h;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=this.metadata.issuer,void 0!==(s=this.metadata.messageId)){e.next=4;break}throw new Error("Claim id not specified.");case 4:return o=new ti(t),c=si(s,u,r,n,a),e.next=8,Kn(c,i);case 8:return e.next=10,o.sendRawTransaction(c.serialize(),!1,!0);case 10:return l=e.sent,h=li.deserialize(l),e.abrupt("return","Push"===h.Result.Notify[0].States[0]);case 13:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a,i,u,s;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.metadata.issuer,void 0!==(n=this.metadata.messageId)){e.next=4;break}throw new Error("Claim id not specified.");case 4:return a=new Ra(t),i=oi(n),e.next=8,a.sendRawTransaction(i.serialize(),!0);case 8:return u=e.sent,s=xi.deserialize(u),console.log(s),e.abrupt("return",s.status===Ei.ATTESTED&&s.issuerId===r);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"payloadToJSON",value:function(){return{ver:this.version,"@context":this.context,clm:this.content,"clm-rev":this.revocation}}},{key:"payloadFromJSON",value:function(e){this.version=e.ver,this.context=e["@context"],this.content=e.clm,this.revocation=e["clm-rev"]}},{key:"serializeHeader",value:function(e,r){if(this.useProof){if(void 0===e||void 0===r)throw new Error("Signature is needed fow JWT-X.");var n={alg:e.labelJWS,typ:"JWT-X",kid:r},a=I()(n);return Ut.encode(a,"utf-8")}return sa()(t.prototype.__proto__||Xe()(t.prototype),"serializeHeader",this).call(this,e,r)}},{key:"serializeProof",value:function(){var e=I()(this.proof);return Ut.encode(e,"utf-8")}}]),t}(gi),xi=function(){function e(){A()(this,e)}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;if(void 0!==t.Result&&""===t.Result.Result)return r.status=Ei.NOTFOUND,r;var n=new _e(t.Result.Result);n.read(1),n.readNextLen(),n.read(1);var a=Ae(n.readNextBytes());n.read(1);var i=Ae(n.readNextBytes());n.read(1);var u=Ae(n.readNextBytes());n.read(1);var s=n.readNextBytes();return r.claimId=a,r.issuerId=i,r.subjectId=u,s||(s="00"),r.status=s,r}}]),e}();!function(e){e.REVOKED="00",e.ATTESTED="01",e.NOTFOUND="-1"}(Ei||(Ei={}));var Ii=r(29),Ti=r.n(Ii),Pi=function(){function e(t,r,n,a){A()(this,e),this.hash="sha256",this.id=t,this.encryptedKey=r,this.address=n,this.salt=a}return k()(e,[{key:"toJson",value:function(){var e;return b()({id:this.id},this.encryptedKey.serializeJson(),(e={address:this.address.toBase58(),salt:this.salt},Ti()(e,"enc-alg","aes-256-gcm"),Ti()(e,"hash",this.hash),Ti()(e,"publicKey",this.publicKey),e))}}],[{key:"fromJson",value:function(t){var r=qt(t),n=new e(t.id,r,new St(t.address),t.salt);return n.publicKey=t.publicKey,n.hash=t.hash,n}}]),e}(),Ri=function(){function e(){A()(this,e),this.controls=[]}return k()(e,[{key:"addControl",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.controls);!(t=(a=i.next()).done);t=!0){if(a.value.address.toBase58()===e.address.toBase58())return}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}e.id=(this.controls.length+1).toString(),this.controls.push(e)}},{key:"toJson",value:function(){return I()(this.toJsonObj())}},{key:"toJsonObj",value:function(){return{tstId:this.tstId,label:this.label,lock:this.lock,isDefault:this.isDefault,controls:this.controls.map(function(e){return e.toJson()}),extra:this.extra}}},{key:"exportPrivateKey",value:function(e,t){var r=this.controls[0].encryptedKey,n=this.controls[0].address,a=this.controls[0].salt;return r.decrypt(e,n,a,t)}},{key:"signTransaction",value:function(e,t,r){var n=this.exportPrivateKey(e,r);return zn(t,n,n.algorithm.defaultSchema),t}}],[{key:"importIdentity",value:function(t,r,n,a,i,u){var s=new e,o=Buffer.from(i,"base64").toString("hex"),c=r.decrypt(n,a,o,u);t||(t=ye(ze(4)));var l=c.getPublicKey();s.tstId=St.generateTstid(l),s.label=t,s.lock=!1,s.isDefault=!1;var h=new Pi("1",r,St.fromTstid(s.tstId),i);return h.publicKey=l.serializeHex(),s.controls.push(h),s}},{key:"create",value:function(t,r,n,a){var i=new e;i.tstId="",i.label=n,i.lock=!1,i.isDefault=!1;var u=t.getPublicKey();i.tstId=St.generateTstid(u);var s=St.fromTstid(i.tstId),o=Ke(16),c=t.encrypt(r,s,o,a),l=Buffer.from(o,"hex").toString("base64"),h=new Pi("1",c,s,l);return h.publicKey=u.serializeHex(),i.controls.push(h),i}},{key:"parseJson",value:function(t){return e.parseJsonObj(JSON.parse(t))}},{key:"parseJsonObj",value:function(t){var r=new e;return r.tstId=t.tstId,r.label=t.label,r.lock=t.lock,r.isDefault=t.isDefault,r.controls=t.controls.map(function(e){return Pi.fromJson(e)}),r.extra=t.extra,r}}]),e}(),_i=function(){function e(){A()(this,e),this.version=0}return k()(e,[{key:"serialize",value:function(){var e=this.serializeUnsigned();e+=Ie(this.scripts.length);var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.scripts);!(t=(a=i.next()).done);t=!0){e+=a.value.serialize()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return e}},{key:"serializeUnsigned",value:function(){var e="";e+=xe(this.type),e+=xe(this.version),e+=this.serializeExclusiveData(),e+=Ie(this.attributes.length);var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.attributes);!(t=(a=i.next()).done);t=!0){e+=a.value.serialize()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}e+=Ie(this.inputs.length);var u=!0,s=!1,o=void 0;try{for(var c,l=ee()(this.inputs);!(u=(c=l.next()).done);u=!0){e+=c.value.serialize()}}catch(e){s=!0,o=e}finally{try{!u&&l.return&&l.return()}finally{if(s)throw o}}e+=Ie(this.outputs.length);var h=!0,f=!1,d=void 0;try{for(var v,p=ee()(this.outputs);!(h=(v=p.next()).done);h=!0){e+=v.value.serialize()}}catch(e){f=!0,d=e}finally{try{!h&&p.return&&p.return()}finally{if(f)throw d}}return e}},{key:"getHash",value:function(){var e=this.serializeUnsigned(),t=re.enc.Hex.parse(e),r=re.SHA256(t).toString();return re.SHA256(re.enc.Hex.parse(r)).toString()}},{key:"getSignContent",value:function(){return this.getHashData()}},{key:"serializeUnsignedData",value:function(){return this.getHashData()}},{key:"getHashData",value:function(){return this.serializeUnsigned()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je.ECDSAwithSHA256;return e.sign(this.getHashData(),t).serializeHex().substring(2)}},{key:"serializeExclusiveData",value:function(){return""}}]),e}(),Ci=function(e){function t(){A()(this,t);var e=$e()(this,(t.__proto__||Xe()(t)).call(this));return e.type=nn.Invoke,e}return tt()(t,e),k()(t,[{key:"serializeExclusiveData",value:function(){var e="";return e+=Se(this.script),e+=xe(this.gas,8,!0)}}]),t}(_i),Bi=function(){function e(){A()(this,e)}return k()(e,null,[{key:"sendRawTransaction",value:function(e,t){var r=this.makeRequest("sendrawtransaction",t);return de.a.post(e,r).then(function(e){return e.data})}},{key:"makeRequest",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{jsonrpc:"2.0",method:e,params:r,id:1}}},{key:"getBalance",value:function(e,t,r){var n=this.makeRequest("getstorage",t.toHexString(),r.serialize());return de.a.post(e,n).then(function(e){return e.data})}}]),e}(),Ni=function(){function e(){A()(this,e)}return k()(e,[{key:"serialize",value:function(){var e="";return e+=Se(this.parameter),e+=Se(this.code)}}],[{key:"deserialize",value:function(t){var r=new _e,n=new e;return n.parameter=r.readNextBytes(),n.code=r.readNextBytes(),n}},{key:"programFromParams",value:function(e){return pt(e)}},{key:"programFromPubKey",value:function(e){return dt(e)}},{key:"programFromMultiPubKey",value:function(e,t){return vt(t,e)}}]),e}(),Di=function(){function e(){A()(this,e)}return k()(e,null,[{key:"makeInvokeTransaction",value:function(e,t,r){var n=Kr(r);return n+=xe(103),n+=e.serialize(),this.makeInvocationTransaction(n,t)}},{key:"makeInvocationTransaction",value:function(e,t){var r=new Ci;r.version=1,r.attributes=[];var n=new an;n.usage=Gr.Script,n.data=t.serialize(),r.attributes[0]=n;var a=new an;return a.usage=Gr.DescriptionUrl,a.data=Ke(16),r.attributes[1]=a,r.inputs=[],r.outputs=[],r.script=e,r.gas=0,r}}]),e}(),Hi=function(){function e(){A()(this,e)}return k()(e,[{key:"equals",value:function(t){return t===this||null!==t&&(t instanceof e&&(this.prevHash===t.prevHash&&this.prevIndex===t.prevIndex))}},{key:"hashCode",value:function(){return parseInt(Te(this.prevHash),16)+this.prevIndex}},{key:"serialize",value:function(){var e="";return e+=this.prevHash,e+=xe(this.prevIndex,2,!0)}}],[{key:"deserialize",value:function(t){var r=new _e(t),n=new e;return n.prevHash=r.read(20),n.prevIndex=parseInt(Te(r.read(2)),16),n}}]),e}(),Oi=function(){function e(){A()(this,e)}return k()(e,[{key:"serialize",value:function(){var e="";return e+=this.assetId,e+=xe(this.value,8,!0),e+=this.scriptHash.serialize()}}],[{key:"deserialize",value:function(t){var r=new _e(t),n=new e;return n.assetId=r.read(32),n.value=r.readLong(),n.scriptHash=new St(r.read(20)),n}}]),e}(),Li=function(){function e(t){A()(this,e),this.url=t||V.RPC_URL}return k()(e,[{key:"getUrl",value:function(){return this.url}},{key:"makeRequest",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{jsonrpc:"2.0",method:e,params:r,id:1}}},{key:"getBalance",value:function(e){var t=this.makeRequest("getbalance",e.toBase58());return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"sendRawTransaction",value:function(e){var t=void 0;return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.makeRequest("sendrawtransaction",e,1):this.makeRequest("sendrawtransaction",e),de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getRawTransaction",value:function(e){var t=this.makeRequest("getrawtransaction",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getRawTransactionJson",value:function(e){var t=this.makeRequest("getrawtransaction",e,1);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getNodeCount",value:function(){var e=this.makeRequest("getconnectioncount");return de.a.post(this.url,e).then(function(e){return e.data})}},{key:"getBlockHeight",value:function(){var e=this.makeRequest("getblockcount");return de.a.post(this.url,e).then(function(e){return e.data&&e.data.result?e.data.result-1:0})}},{key:"getBlockCount",value:function(){var e=this.makeRequest("getblockcount");return de.a.post(this.url,e).then(function(e){return e.data})}},{key:"getBlockJson",value:function(e){var t=this.makeRequest("getblock",e,1);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getContract",value:function(e){var t=this.makeRequest("getcontractstate",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getContractJson",value:function(e){var t=this.makeRequest("getcontractstate",e,1);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getBlock",value:function(e){var t=this.makeRequest("getblock",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getSmartCodeEvent",value:function(e){var t=this.makeRequest("getsmartcodeevent",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getBlockHeightByTxHash",value:function(e){var t=this.makeRequest("getblockheightbytxhash",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getStorage",value:function(e,t){var r=this.makeRequest("getstorage",e,t);return console.log(r),de.a.post(this.url,r).then(function(e){return e.data})}},{key:"getMerkleProof",value:function(e){var t=this.makeRequest("getmerkleproof",e);return console.log(this.url),console.log(t),de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getAllowance",value:function(e,t,r){if("tst"!==e&&"tsg"!==e)throw m.INVALID_PARAMS;var n=this.makeRequest("getallowance",e,t.toBase58(),r.toBase58());return de.a.post(this.url,n).then(function(e){return e.data})}},{key:"getUnboundTsg",value:function(e){var t=this.makeRequest("getunboundtsg","tsg",e.toBase58(),e.toBase58());return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getBlockTxsByHeight",value:function(e){var t=this.makeRequest("getblocktxsbyheight",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getGasPrice",value:function(){var e=this.makeRequest("getgasprice");return de.a.post(this.url,e).then(function(e){return e.data})}},{key:"getGrantTsg",value:function(e){var t=this.makeRequest("getgranttsg",e.toBase58());return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getMempoolTxCount",value:function(){var e=this.makeRequest("getmempooltxcount");return de.a.post(this.url,e).then(function(e){return e.data})}},{key:"getMempoolTxState",value:function(e){var t=this.makeRequest("getmempooltxstate",e);return de.a.post(this.url,t).then(function(e){return e.data})}},{key:"getVersion",value:function(){var e=this.makeRequest("getversion");return de.a.post(this.url,e).then(function(e){return e.data})}}]),e}(),zi=function e(t,r,n,a){A()(this,e),this.from=t.serialize(),this.to=r.serialize(),this.tokenId=xe(n),this.value=new ue.BigNumber(a)},Ki=function e(t,r,n,a,i){A()(this,e),this.spender=t.serialize(),this.from=r.serialize(),this.to=n.serialize(),this.tokenId=xe(a),this.value=new ue.BigNumber(i)},Ui="name",Mi="symbol",Vi="totalSupply",Gi="balanceOf",Fi="transfer",Wi="transferMulti",Ji="approve",qi="approveMulti",ji="allowance",Yi="transferFrom",Qi="transferFromMulti",Xi="compound",Zi="init",$i="balancesOf",eu="totalBalanceOf",tu=function(){function e(t){A()(this,e),this.contractAddr=t}return k()(e,[{key:"makeInitTx",value:function(e,t,r){return Gn(Zi,[],this.contractAddr,e,t,r)}},{key:"makeTransferTx",value:function(e,t,r,n,a,i,u){var s=Fi,o=[new mr("sender",jt.ByteArray,e.serialize()),new mr("recv",jt.ByteArray,t.serialize()),new mr("tokenId",jt.ByteArray,r),new mr("amount",jt.Long,n)];return Gn(s,o,this.contractAddr,a,i,u)}},{key:"makeTransferMultiTx",value:function(e,t,r,n){var a=[];a.push(we(Wi));var i=[],u=!0,s=!1,o=void 0;try{for(var c,l=ee()(e);!(u=(c=l.next()).done);u=!0){var h=c.value;i.push([h.from,h.to,h.tokenId,h.value])}}catch(e){s=!0,o=e}finally{try{!u&&l.return&&l.return()}finally{if(s)throw o}}a.push(i);var f=Fr(a);return Gn("",f,this.contractAddr,t,r,n)}},{key:"makeApproveTx",value:function(e,t,r,n,a,i,u){var s=Ji,o=[new mr("owner",jt.ByteArray,e.serialize()),new mr("spender",jt.ByteArray,t.serialize()),new mr("tokenId",jt.ByteArray,xe(r)),new mr("amount",jt.Long,n)];return Gn(s,o,this.contractAddr,a,i,u)}},{key:"makeApproveMulti",value:function(e,t,r,n){var a=qi,i=[];i.push(we(a));var u=[],s=!0,o=!1,c=void 0;try{for(var l,h=ee()(e);!(s=(l=h.next()).done);s=!0){var f=l.value;u.push([f.from,f.to,f.tokenId,f.value])}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}i.push(u);var d=Fr(i);return Gn("",d,this.contractAddr,t,r,n)}},{key:"makeTransferFromMulti",value:function(e,t,r,n){var a=Qi,i=[];i.push(we(a));var u=[],s=!0,o=!1,c=void 0;try{for(var l,h=ee()(e);!(s=(l=h.next()).done);s=!0){var f=l.value;u.push([f.spender,f.from,f.to,f.tokenId,f.value])}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}i.push(u);var d=Fr(i);return Gn("",d,this.contractAddr,t,r,n)}},{key:"makeTransferFromTx",value:function(e,t,r,n,a,i,u,s){var o=Yi,c=[new mr("sender",jt.ByteArray,e.serialize()),new mr("from",jt.ByteArray,t.serialize()),new mr("to",jt.ByteArray,r.serialize()),new mr("tokenId",jt.ByteArray,xe(n)),new mr("amount",jt.Long,a)];return Gn(o,c,this.contractAddr,i,u,s)}},{key:"makeCompoundTx",value:function(e,t,r,n,a){var i=Xi,u=[new mr("account",jt.ByteArray,e.serialize()),new mr("compoundNum",jt.Integer,t)];return Gn(i,u,this.contractAddr,r,n,a)}},{key:"makeQueryAllowanceTx",value:function(e,t,r){var n=ji,a=[new mr("owner",jt.ByteArray,e.serialize()),new mr("spender",jt.ByteArray,t.serialize()),new mr("tokenId",jt.ByteArray,xe(r))];return Gn(n,a,this.contractAddr)}},{key:"makeQueryBalanceOfTx",value:function(e,t){var r=Gi,n=[new mr("addr",jt.ByteArray,e.serialize()),new mr("tokenId",jt.ByteArray,xe(t))];return Gn(r,n,this.contractAddr)}},{key:"makeQueryTotalSupplyTx",value:function(e){var t=Vi,r=[new mr("tokenId",jt.ByteArray,xe(e))];return Gn(t,r,this.contractAddr)}},{key:"makeQueryNameTx",value:function(e){var t=Ui,r=[new mr("tokenId",jt.ByteArray,xe(e))];return Gn(t,r,this.contractAddr)}},{key:"makeQueryDecimalsTx",value:function(){return Gn(Mi,[],this.contractAddr)}},{key:"makeQuerySymbolTx",value:function(e){var t=Mi,r=[new mr("tokenId",jt.ByteArray,xe(e))];return Gn(t,r,this.contractAddr)}},{key:"makeQueryBalancesTx",value:function(e){var t=$i,r=[new mr("account",jt.ByteArray,e.serialize())];return Gn(t,r,this.contractAddr)}},{key:"makeQueryTotalBalanceTx",value:function(e){var t=eu,r=[new mr("account",jt.ByteArray,e.serialize())];return Gn(t,r,this.contractAddr)}}]),e}(),ru=function(){function e(){A()(this,e),this.defaultTstid="",this.defaultAccountAddress="",this.identities=[],this.accounts=[]}return k()(e,[{key:"addAccount",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.accounts);!(t=(a=i.next()).done);t=!0){if(a.value.address.toBase58()===e.address.toBase58())return}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}this.accounts.push(e)}},{key:"addIdentity",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=ee()(this.identities);!(t=(a=i.next()).done);t=!0){if(a.value.tstId===e.tstId)return}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}this.identities.push(e)}},{key:"setDefaultAccount",value:function(e){this.defaultAccountAddress=e}},{key:"setDefaultIdentity",value:function(e){this.defaultTstid=e}},{key:"toJson",value:function(){return I()(this.toJsonObj())}},{key:"toJsonObj",value:function(){return{name:this.name,defaultTstid:this.defaultTstid,defaultAccountAddress:this.defaultAccountAddress,createTime:this.createTime,version:this.version,scrypt:this.scrypt,identities:this.identities.map(function(e){return e.toJsonObj()}),accounts:this.accounts.map(function(e){return e.toJsonObj()}),extra:null}}},{key:"signatureData",value:function(){return""}},{key:"toTWalletFile",value:function(){return this.toJsonObj()}}],[{key:"parseJson",value:function(t){return e.parseJsonObj(JSON.parse(t))}},{key:"parseJsonObj",value:function(t){var r=new e;return r.name=t.name,r.defaultTstid=t.defaultTstid,r.defaultAccountAddress=t.defaultAccountAddress,r.createTime=t.createTime,r.version=t.version,r.scrypt=t.scrypt,r.identities=t.identities&&t.identities.map(function(e){return Ri.parseJsonObj(e)}),r.accounts=t.accounts&&t.accounts.map(function(e){return ia.parseJsonObj(e)}),r.extra=t.extra,r}},{key:"fromTWalletFile",value:function(t){return e.parseJsonObj(t)}},{key:"create",value:function(t){var r=new e;return r.name=t,r.createTime=(new Date).toISOString(),r.version="1.0",r.scrypt={n:R.cost,r:R.blockSize,p:R.parallel,dkLen:R.size},r}}]),e}(),nu="init",au="transfer",iu="transferMulti",uu="approve",su="transferFrom",ou="allowance",cu="balanceOf",lu="totalSupply",hu="symbol",fu="decimals",du="name",vu=function(e){var t=Re(se.fromString(e));return new mr("value",jt.ByteArray,t)},pu=function e(t,r,n){A()(this,e),this.from=t.serialize(),this.to=r.serialize(),this.amount=vu(n).value},yu=function(){function e(t){A()(this,e),this.contractAddr=t}return k()(e,[{key:"init",value:function(e,t,r){return Gn(nu,[],this.contractAddr,e,t,r)}},{key:"makeTransferTx",value:function(e,t,r,n,a,i){var u=au,s=new mr("from",jt.ByteArray,e.serialize()),o=new mr("to",jt.ByteArray,t.serialize()),c=vu(r);return Gn(u,[s,o,c],this.contractAddr,n,a,i)}},{key:"makeTransferMultiTx",value:function(e,t,r,n){var a=[];a.push(we(iu));var i=[],u=!0,s=!1,o=void 0;try{for(var c,l=ee()(e);!(u=(c=l.next()).done);u=!0){var h=c.value;i.push([h.from,h.to,h.amount])}}catch(e){s=!0,o=e}finally{try{!u&&l.return&&l.return()}finally{if(s)throw o}}a.push(i);var f=Fr(a);return Gn("",f,this.contractAddr,t,r,n)}},{key:"makeApproveTx",value:function(e,t,r,n,a,i){var u=uu,s=[new mr("owner",jt.ByteArray,e.serialize()),new mr("spender",jt.ByteArray,t.serialize()),vu(r)];return Gn(u,s,this.contractAddr,n,a,i)}},{key:"makeTransferFromTx",value:function(e,t,r,n,a,i,u){var s=su,o=[new mr("owner",jt.ByteArray,e.serialize()),new mr("from",jt.ByteArray,t.serialize()),new mr("to",jt.ByteArray,r.serialize()),vu(n)];return Gn(s,o,this.contractAddr,a,i,u)}},{key:"makeQueryAllowanceTx",value:function(e,t){var r=ou,n=[new mr("owner",jt.ByteArray,e.serialize()),new mr("spender",jt.ByteArray,t.serialize())];return Gn(r,n,this.contractAddr)}},{key:"queryBalanceOf",value:function(e){var t=cu,r=new mr("from",jt.ByteArray,e.serialize());return Gn(t,[r],this.contractAddr)}},{key:"queryTotalSupply",value:function(){return Gn(lu,[],this.contractAddr)}},{key:"queryDecimals",value:function(){return Gn(fu,[],this.contractAddr)}},{key:"querySymbol",value:function(){return Gn(hu,[],this.contractAddr)}},{key:"queryName",value:function(){return Gn(du,[],this.contractAddr)}}]),e}(),mu=r(30),gu="ceab719b8baa2310f232ee0d277c061704541cfb",wu=function(){function e(){A()(this,e)}return k()(e,null,[{key:"setServerNode",value:function(t){if(t){var r="";return r=t.indexOf("http")>-1?t.substr("http://".length):t,void(e.SERVER_NODE=r)}throw new Error("Can not set "+t+"as server node")}},{key:"setRestPort",value:function(t){if(t)return e.REST_PORT=t,void(e.restClient=new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT));throw new Error("Can not set "+t+" as restful port")}},{key:"setSocketPort",value:function(t){if(t)return e.SOCKET_PORT=t,void(e.socketClient=new ti("ws://"+e.SERVER_NODE+":"+e.SOCKET_PORT));throw new Error("Can not set "+t+"as socket port")}},{key:"getDecryptError",value:function(e){return{error:m.Decrypto_ERROR,result:""}}},{key:"transformPassword",value:function(e){return Ge(e)?Buffer.from(e,"base64").toString():e}},{key:"createTWallet",value:function(t,r,n,a,i,u){var s=ru.create(t);r=this.transformPassword(r);var o=Gt.random(),c=Ri.create(o,r,t);s.defaultTstid=c.tstId,s.addIdentity(c);var l={error:0,result:s.toJson(),tx:""},h=o.getPublicKey(),f=xn(c.tstId,h,a,i);return f.payer=new St(n),zn(f,o),o.key="",r="",new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).sendRawTransaction(f.serialize(),!0).then(function(e){if("01"===e.Result.Result)return l.tx=f.serialize(),u&&Be(I()(l),u),l;var t={error:m.PreExec_ERROR,result:""};return u&&Be(I()(t),u),t}).catch(function(e){l={error:m.NETWORK_ERROR,result:""},u&&Be(I()(l),u)})}},{key:"importIdentityWithPrivateKey",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n=arguments[2],a=arguments[3];if(r=r.trim(),n=this.transformPassword(n),!r||64!==r.length||!Fe(r)){var i={error:m.INVALID_PARAMS,result:""};return a&&Be(I()(i),a),i}var u=void 0,s=new Gt(r),o=Ri.create(s,n,t);u={error:m.SUCCESS,result:o.toJson()};var c=_n(o.tstId);return new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).sendRawTransaction(c.serialize(),!0).then(function(e){return e.Result.Result||(u.error=m.UNKNOWN_TSTID,u.result=""),a&&Be(I()(u),a),u}).catch(function(e){u={error:m.NETWORK_ERROR,result:""},a&&Be(I()(u),a)})}},{key:"importIdentityWithWif",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n=arguments[2],a=arguments[3];r=r.trim(),n=this.transformPassword(n);var i=void 0,u=void 0;try{u=Gt.deserializeWIF(r)}catch(e){var s={error:m.INVALID_PARAMS,result:""};return a&&Be(I()(s),a),s}var o=Ri.create(u,n,t);i={error:m.SUCCESS,result:o.toJson()};var c=_n(o.tstId);return new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).sendRawTransaction(c.serialize(),!0).then(function(e){return e.Result.Result||(i.error=m.UNKNOWN_TSTID,i.result=""),a&&Be(I()(i),a),i}).catch(function(e){i={error:m.NETWORK_ERROR,result:""},a&&Be(I()(i),a)})}},{key:"importIdentityWithWifOffChain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],r=arguments[2],n=arguments[3];t=t.trim(),r=this.transformPassword(r);var a,i=void 0;try{i=Gt.deserializeWIF(t)}catch(e){var u={error:m.INVALID_PARAMS,result:""};return n&&Be(I()(u),n),u}var s=Ri.create(i,r,e);return a={error:m.SUCCESS,result:s.toJson()},n&&Be(I()(a),n),a}},{key:"importIdentityWithTWallet",value:function(t,r,n,a,i,u){var s=void 0,o=new Ri;try{var c=new Gt(r),l=new St(a);n=this.transformPassword(n),o=Ri.importIdentity(t,c,n,l,i)}catch(e){return s=this.getDecryptError(e),u&&Be(I()(s),u),s}s={error:m.SUCCESS,result:o.toJson()};var h=Yn(_n(o.tstId)),f=Qn("http://"+e.SERVER_NODE+":"+e.REST_PORT,!0);return n="",de.a.post(f,h).then(function(e){return e.data.Result.Result||(s.error=m.UNKNOWN_TSTID,s.result=""),u&&Be(I()(s),u),s}).catch(function(e){s={error:m.NETWORK_ERROR,result:""},u&&Be(I()(s),u)})}},{key:"importIdentityAndCreateTWallet",value:function(t,r,n,a,i,u){var s=new Ri,o={},c=void 0;try{n=this.transformPassword(n);var l=new Gt(r),h=new St(a);s=Ri.importIdentity(t,l,n,h,i);var f=ru.create(s.label);f.defaultTstid=s.tstId,f.addIdentity(s);var d=f.toJson();c={error:m.SUCCESS,result:d};var v=Yn(_n(s.tstId)),p=Qn("http://"+e.SERVER_NODE+":"+e.REST_PORT,!0);return de.a.post(p,v).then(function(e){return e.data.Result.Result||(c.error=m.UNKNOWN_TSTID,c.result=""),n="",u&&Be(I()(c),u),c}).catch(function(e){c={error:m.NETWORK_ERROR,result:""},u&&Be(I()(c),u)})}catch(e){return o=this.getDecryptError(e),u&&Be(I()(o),u),Ca.a.reject(o)}}},{key:"createIdentity",value:function(t,r,n,a,i,u){var s=Gt.random();r=this.transformPassword(r);var o=Ri.create(s,r,t),c=o.toJson(),l={error:m.SUCCESS,result:c,tx:""},h=s.getPublicKey(),f=xn(o.tstId,h,a,i);return f.payer=new St(n),zn(f,s),r="",s.key="",new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).sendRawTransaction(f.serialize(),!0).then(function(e){if("01"===e.Result.Result)return l.tx=f.serialize(),u&&Be(I()(l),u),s.key="",r="",l;var t={error:m.PreExec_ERROR,result:""};return u&&Be(I()(t),u),t}).catch(function(e){l={error:m.NETWORK_ERROR,result:""},u&&Be(I()(l),u)})}},{key:"createAccount",value:function(e,t,r){var n=Ue();t=this.transformPassword(t);var a=we(n),i=Gt.generateFromMnemonic(n),u=ia.create(i,t,e),s=zt(a,u.address,Buffer.from(u.salt,"base64").toString("hex"),t),o=u.toJson(),c={error:m.SUCCESS,result:o,mnemonicEnc:s};return r&&Be(I()(c),r),i.key="",t="",n="",c}},{key:"decryptMnemonicEnc",value:function(e,t,r,n,a){var i;n=this.transformPassword(n);var u=Ae(Kt(e,new St(t),Buffer.from(r,"base64").toString("hex"),n));return i={error:m.SUCCESS,result:u},a&&Be(I()(i),a),i}},{key:"importAccountWithTWallet",value:function(e,t,r,n,a,i){var u=new ia;a=this.transformPassword(a);var s=new Gt(t);try{var o=new St(r);u=ia.importAccount(e,s,a,o,n)}catch(e){var c=this.getDecryptError(e);return i&&Be(I()(c),i),c}var l={error:m.SUCCESS,result:u.toJson()};return r!==u.address.toBase58()&&(l.error=m.INVALID_ADDR,l.result=""),i&&Be(I()(l),i),a="",l}},{key:"signSelfClaim",value:function(t,r,n,a,i,u,s,o){var c=void 0;i=this.transformPassword(i);var l=new Gt(a),h="http://"+e.SERVER_NODE+":"+e.REST_PORT+U.sendRawTx;try{var f=new St(u),d=Buffer.from(s,"base64").toString("hex");c=l.decrypt(i,f,d)}catch(e){var v=this.getDecryptError(e);return o&&Be(I()(v),o),v}var p={issuer:n,subject:n,issuedAt:De()},y=n+"#keys-1",m=new bi(p,void 0,void 0);m.sign(h,y,c);var g={error:0,result:m};return o&&Be(I()(g),o),c.key="",i="",g}},{key:"decryptEncryptedPrivateKey",value:function(e,t,r,n,a){t=this.transformPassword(t);var i=new Gt(e),u=void 0;try{var s=new St(r),o=Buffer.from(n,"base64").toString("hex");u=i.decrypt(t,s,o)}catch(e){var c=this.getDecryptError(e);return a&&Be(I()(c),a),c}var l={error:0,result:u.key};return a&&Be(I()(l),a),t="",l}},{key:"getClaim",value:function(t,r,n,a,i,u,s,o,c,l,h,f){var d=void 0;u=this.transformPassword(u);var v=new Gt(i);try{var p=new St(s),y=Buffer.from(o,"base64").toString("hex");d=v.decrypt(u,p,y)}catch(e){var g=this.getDecryptError(e);return f&&Be(I()(g),f),g}var w="claim"+t,A={Type:"JSON",Value:{Context:r,Issuer:n}},S=I()(A),k=new yi;k.key=w,k.type="JSON",k.value=S;var E=Tn(a,[k],d.getPublicKey(),l,h);return E.payer=new St(c),zn(E,d),new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).sendRawTransaction(E.serialize(),!0).then(function(e){if("01"===e.Result.Result){var t={error:m.SUCCESS,result:"",tx:E.serialize()};return f&&Be(I()(t),f),d.key="",u="",t}var r={error:m.PreExec_ERROR,result:""};return f&&Be(I()(r),f),r}).catch(function(e){var t={error:m.NETWORK_ERROR,result:""};f&&Be(I()(t),f)})}},{key:"signData",value:function(e,t,r,n,a,i){var u=void 0;r=this.transformPassword(r);var s=new Gt(t),o=void 0;try{var c=new St(n),l=Buffer.from(a,"base64").toString("hex");u=s.decrypt(r,c,l)}catch(e){return o=this.getDecryptError(e),i&&Be(I()(o),i),o}return o=u.sign(e).serializePgp(),i&&Be(I()(o),i),u.key="",r="",o}},{key:"getBalance",value:function(t,r){var n=new St(t),a="http://"+e.SERVER_NODE+":"+e.REST_PORT+U.getBalance+"/"+n.toBase58();return de.a.get(a).then(function(e){if(0===e.data.Error){var t={error:0,result:e.data.Result};return r&&Be(I()(t),r),t}var n={error:e.data.Error,result:""};return r&&Be(I()(n),r),n}).catch(function(e){var t={error:m.NETWORK_ERROR,result:""};return r&&Be(I()(t),r),Ca.a.reject(t)})}},{key:"transferAssets",value:function(e,t,r,n,a,i,u,s,o,c,l){var h=void 0,f=void 0;i=this.transformPassword(i);try{h=new St(t),f=new St(r)}catch(e){var d={error:m.INVALID_PARAMS,result:""};return l&&Be(I()(d),l),d}var v=void 0,p=new Gt(a);try{var y=new St(t),g=Buffer.from(u,"base64").toString("hex");v=p.decrypt(i,y,g)}catch(e){var w=this.getDecryptError(e);return l&&Be(I()(w),l),w}var A=yn(e,h,f,n,s,o);A.payer=new St(c),zn(A,v);var S={error:m.SUCCESS,result:"",tx:A.serialize(),txHash:Te(A.getSignContent())};return l&&Be(I()(S),l),v.key="",i="",S}},{key:"claimTsg",value:function(e,t,r,n,a,i,u,s,o){var c=void 0;n=this.transformPassword(n);try{c=new St(e)}catch(e){var l={error:m.INVALID_PARAMS,result:""};return o&&Be(I()(l),o),l}var h=void 0,f=new Gt(r);try{var d=Buffer.from(a,"base64").toString("hex");h=f.decrypt(n,c,d)}catch(e){var v=this.getDecryptError(e);return o&&Be(I()(v),o),v}var p=wn(c,c,t,new St(s),i,u);zn(p,h);var y={error:m.SUCCESS,result:"",tx:p.serialize(),txHash:Te(p.getSignContent())};return o&&Be(I()(y),o),h.key="",n="",y}},{key:"exportIdentityToQrcode",value:function(e,t){var r=Ri.parseJson(e),n=r.controls[0].salt;Ge(n)||(n=Buffer.from(n,"hex").toString("base64"));var a={type:"I",label:r.label,algorithm:"ECDSA",scrypt:{n:4096,p:8,r:8,dkLen:64},key:r.controls[0].encryptedKey.key,salt:n,address:r.controls[0].address.toBase58(),parameters:{curve:"secp256r1"}};return t&&Be(I()(a),t),a}},{key:"exportIdentityToKeystring",value:function(e,t){var r=Ri.parseJson(e),n=r.controls[0].address.toBase58(),a=r.controls[0].salt+n+r.controls[0].encryptedKey.key;return t&&Be(I()(a),t),a}},{key:"exportAccountToQrcode",value:function(e,t){var r=ia.parseJson(e),n={type:"A",label:r.label,algorithm:"ECDSA",scrypt:{n:4096,p:8,r:8,dkLen:64},key:r.encryptedKey.key,salt:r.salt,address:r.address.toBase58(),parameters:{curve:"secp256r1"}};return t&&Be(I()(n),t),n}},{key:"exportAccountToKeystring",value:function(e,t){var r=ia.parseJson(e),n=r.salt+r.address.toBase58()+r.encryptedKey.key;return t&&Be(I()(n),t),n}},{key:"importAccountMnemonic",value:function(e,t,r,n){if(t=t.trim(),r=this.transformPassword(r),!T.validateMnemonic(t)){var a={error:m.INVALID_PARAMS,result:""};return n&&Be(I()(a),n),a}var i=T.mnemonicToSeedHex(t),u=mu.fromMasterSeed(Buffer.from(i,"hex")).derive(j),s=Buffer.from(u.privateKey).toString("hex"),o=new Gt(s),c=ia.create(o,r,e).toJson(),l={error:m.SUCCESS,result:c};return n&&Be(I()(l),n),o.key="",r="",t="",l}},{key:"exportWifPrivakeKey",value:function(e,t,r,n,a){if(34!==r.length&&40!==r.length){var i={error:m.INVALID_PARAMS,result:""};return a&&Be(I()(i),a),i}t=this.transformPassword(t);var u=new Gt(e),s=new St(r),o=Buffer.from(n,"base64").toString("hex"),c=u.decrypt(t,s,o),l=c.serializeWIF(),h={error:m.SUCCESS,result:{wif:l,privateKey:c.key}};return a&&Be(I()(h),a),c.key="",l="",t="",h}},{key:"importAccountWithWif",value:function(e,t,r,n){var a=void 0;r=this.transformPassword(r);try{a=Gt.deserializeWIF(t)}catch(e){var i={error:m.INVALID_PARAMS,result:""};return n&&Be(I()(i),n),i}var u=ia.create(a,r,e),s={error:m.SUCCESS,result:u.toJson()};return n&&Be(I()(s),n),a.key="",r="",s}},{key:"importAccountWithPrivateKey",value:function(e,t,r,n){if(t=t.trim(),r=this.transformPassword(r),!t||64!==t.length||!Fe(t)){var a={error:m.INVALID_PARAMS,result:""};return n&&Be(I()(a),n),a}var i=new Gt(t),u=ia.create(i,r,e),s={error:m.SUCCESS,result:u.toJson()};return n&&Be(I()(s),n),t="",r="",s}},{key:"importAccountWithKeystore",value:function(e,t,r){var n=void 0;t=this.transformPassword(t);try{n=JSON.parse(e)}catch(e){var a={error:m.INVALID_PARAMS,result:""};return r&&Be(I()(a),r),a}if("A"!==n.type){var i={error:m.INVALID_PARAMS,result:""};return r&&Be(I()(i),r),i}var u=new ia,s=new Gt(n.key);try{var o={cost:n.scrypt.n||4096,blockSize:n.scrypt.p||8,parallel:n.scrypt.r||8,size:n.scrypt.dkLen||64},c=new St(n.address);u=ia.importAccount(n.label,s,t,c,n.salt,o);var l={error:m.SUCCESS,result:u.toJson()};return r&&Be(I()(l),r),t="",l}catch(e){var h=this.getDecryptError(e);return r&&Be(I()(h),r),h}}},{key:"getUnclaimedTsg",value:function(t,r){return new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).getAllowance("tsg",new St(fn),new St(t)).then(function(e){var t={error:m.SUCCESS,result:e.Result};return r&&Be(I()(t),r),t}).catch(function(e){var t={error:e.Error,result:""};return r&&Be(I()(t),r),t})}},{key:"querySmartCodeEventByTxhash",value:function(t,r){return new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).getSmartCodeEvent(t).then(function(e){var t={error:m.SUCCESS,result:e};return r&&Be(I()(t),r),t}).catch(function(e){var t={error:e.Error,result:""};return r&&Be(I()(t),r),t})}},{key:"createSharedTWallet",value:function(e,t,r){var n=parseInt(e,10),a=[],i=[],u=m.SUCCESS;try{i=(a=JSON.parse(t)).map(function(e){return ut.deserializeHex(new _e(e))})}catch(e){u=m.INVALID_PARAMS}(n<2||a.length<n||a.length>12)&&(u=m.INVALID_PARAMS);var s="";try{s=St.fromMultiPubKeys(n,i).toBase58()}catch(e){u=m.INVALID_PARAMS}if(r){var o={error:u,result:s};Be(I()(o),r)}return s}},{key:"adderssFromPublicKey",value:function(e,t){var r=ut.deserializeHex(new _e(e)),n=St.fromPubKey(r).toBase58(),a={error:m.SUCCESS,result:n};return t&&Be(I()(a),t),n}},{key:"makeMultiSignTransaction",value:function(e,t,r,n,a,i,u){var s=void 0,o=void 0;try{s=new St(t),o=new St(r)}catch(e){var c={error:m.INVALID_PARAMS,result:""};return u&&Be(I()(c),u),c}var l=yn(e,s,o,n,a,i);l.payer=s;var h={error:m.SUCCESS,txHash:Te(l.getSignContent()),txData:l.serialize()};return u&&Be(I()(h),u),h}},{key:"signMultiAddrTransaction",value:function(e,t,r,n,a,i,u,s){n=this.transformPassword(n);var o=void 0,c=new Gt(e);try{var l=new St(t),h=Buffer.from(r,"base64").toString("hex");o=c.decrypt(n,l,h)}catch(e){var f=this.getDecryptError(e);return s&&Be(I()(f),s),f}var d=parseInt(i,10),v=sn.deserialize(u),p=JSON.parse(a).map(function(e){return new ut(e)});Vn(v,d,p,o);var y={error:m.SUCCESS,signedHash:v.serialize()};return s&&Be(I()(y),s),v}},{key:"neoTransfer",value:function(e,t,r,n,a,i,u,s){a=this.transformPassword(a);var o=new St(t),c=new St(e),l=ri.parseJson('{"hash":"0x5bb169f915c916a5e30a3c13a5e0cd228ea26826","entrypoint":"Main","functions":[{"name":"Name","parameters":[],"returntype":"String"},{"name":"Symbol","parameters":[],"returntype":"String"},{"name":"Decimals","parameters":[],"returntype":"Integer"},{"name":"Main","parameters":[{"name":"operation","type":"String"},{"name":"args","type":"Array"}],"returntype":"Any"},{"name":"Init","parameters":[],"returntype":"Boolean"},{"name":"TotalSupply","parameters":[],"returntype":"Integer"},{"name":"Transfer","parameters":[{"name":"from","type":"ByteArray"},{"name":"to","type":"ByteArray"},{"name":"value","type":"Integer"}],"returntype":"Boolean"},{"name":"BalanceOf","parameters":[{"name":"address","type":"ByteArray"}],"returntype":"Integer"}],"events":[{"name":"transfer","parameters":[{"name":"arg1","type":"ByteArray"},{"name":"arg2","type":"ByteArray"},{"name":"arg3","type":"Integer"}],"returntype":"Void"}]}'),h=new St(Te(gu)),f=parseInt(r,10),d=l.getFunction("Transfer");d.name=d.name.toLowerCase();var v=void 0,p=new Gt(n);try{var y=Buffer.from(i,"base64").toString("hex");v=p.decrypt(a,c,y,s)}catch(e){var g=this.getDecryptError(e);return u&&Be(I()(g),u),g}var w=new mr("from",jt.ByteArray,c.serialize()),A=new mr("to",jt.ByteArray,o.serialize()),S=new mr("value",jt.Integer,1e8*f);d.setParamsValue(w,A,S);var k=Di.makeInvokeTransaction(h,c,d),E=new Ni;return E.parameter=Ni.programFromParams([k.sign(v)]),E.code=Ni.programFromPubKey(v.getPublicKey()),k.scripts=[E],Bi.sendRawTransaction("http://121.41.17.61:3000",k.serialize()).then(function(e){var t={error:m.SUCCESS,result:""};return e.result?(t.result=Te(k.getHash()),u&&Be(I()(t),u)):(t.error=m.NETWORK_ERROR,u&&Be(I()(t),u)),t})}},{key:"getNeoBalance",value:function(e,t){var r=new St(Te(gu)),n=new St(e);return Bi.getBalance("http://121.41.17.61:3000",r,n).then(function(e){var r={error:m.SUCCESS,result:0};if(e.result){var n=parseInt(Te(e.result),16);r.result=n}return t&&Be(I()(r),t),r})}},{key:"sendTransaction",value:function(t,r){return new Ra("http://"+e.SERVER_NODE+":"+e.REST_PORT).sendRawTransaction(t).then(function(e){var t={error:m.SUCCESS,result:e};return r&&Be(I()(t),r),t}).catch(function(e){var t={error:e.Error,result:""};return r&&Be(I()(t),r),t})}},{key:"sendTransactionWithWebsocket",value:function(t,r){return new ti("ws://"+e.SERVER_NODE+":"+e.SOCKET_PORT).sendRawTransaction(t,!1,!0).then(function(e){var t={error:m.SUCCESS,result:e};return r&&Be(I()(t),r),t}).catch(function(e){var t={error:e.Error,result:""};return r&&Be(I()(t),r),t})}},{key:"queryOep8Balance",value:function(t,r,n,a){var i=new St(Te(t)),u=new tu(i),s=new St(r),o=u.makeQueryBalanceOfTx(s,n);return e.restClient.sendRawTransaction(o.serialize(),!0).then(function(e){var t={error:m.SUCCESS,result:0};return e.Result.Result&&(t.result=parseInt(Te(e.Result.Result),16)),a&&Be(I()(t),a),t})}},{key:"queryOep8Balances",value:function(t,r,n){var a=new St(Te(t)),i=new tu(a),u=new St(r),s=i.makeQueryBalancesTx(u);return e.restClient.sendRawTransaction(s.serialize(),!0).then(function(e){var t={error:m.SUCCESS,result:[0,0,0,0,0,0,0,0]};if(e.Result.Result){var r=e.Result.Result.map(function(e){return e?parseInt(Te(e),16):0});t.result=r}return n&&Be(I()(t),n),t})}},{key:"queryOep8TotalBalance",value:function(t,r,n){var a=new St(Te(t)),i=new tu(a),u=new St(r),s=i.makeQueryTotalBalanceTx(u);return e.restClient.sendRawTransaction(s.serialize(),!0).then(function(e){var t={error:m.SUCCESS,result:0};return e.Result.Result&&(t.result=parseInt(Te(e.Result.Result),16)),n&&Be(I()(t),n),t})}},{key:"transferOep8",value:function(e,t,r,n,a,i,u,s,o,c,l,h){var f=void 0,d=void 0,v=void 0;u=this.transformPassword(u);try{f=new St(t),d=new St(r),v=new St(l)}catch(e){return{error:m.INVALID_PARAMS,result:""}}var p=void 0,y=new Gt(i);try{var g=new St(t),w=Buffer.from(s,"base64").toString("hex");p=y.decrypt(u,g,w)}catch(e){return this.getDecryptError(e)}var A=new St(Te(e)),S=new tu(A).makeTransferTx(f,d,a,n,o,c,v);zn(S,p);var k={error:m.SUCCESS,result:"",tx:S.serialize(),txHash:Te(S.getSignContent())};return h&&Be(I()(k),h),p.key="",u="",k}},{key:"compoundOep8",value:function(e,t,r,n,a,i,u,s,o,c){var l=void 0;a=this.transformPassword(a);try{l=new St(t)}catch(e){return{error:m.INVALID_PARAMS,result:""}}var h=void 0,f=new Gt(n);try{var d=Buffer.from(i,"base64").toString("hex");h=f.decrypt(a,l,d)}catch(e){return this.getDecryptError(e)}var v=new St(Te(e)),p=new tu(v).makeCompoundTx(l,r,u,s,l);zn(p,h);var y={error:m.SUCCESS,result:"",tx:p.serialize(),txHash:Te(p.getSignContent())};return c&&Be(I()(y),c),h.key="",a="",y}},{key:"queryOep4Balance",value:function(t,r,n){var a=new St(Te(t)),i=new yu(a),u=new St(r),s=i.queryBalanceOf(u);return e.restClient.sendRawTransaction(s.serialize(),!0).then(function(e){var t={error:m.SUCCESS,result:0};return e.Result.Result&&(t.result=parseInt(Te(e.Result.Result),16)),n&&Be(I()(t),n),t})}},{key:"transferOep4",value:function(e,t,r,n,a,i,u,s,o,c){var l=void 0,h=void 0;i=this.transformPassword(i);try{l=new St(t),h=new St(r)}catch(e){return{error:m.INVALID_PARAMS,result:""}}var f=void 0,d=new Gt(a);try{var v=new St(t),p=Buffer.from(u,"base64").toString("hex");f=d.decrypt(i,v,p)}catch(e){return this.getDecryptError(e)}var y=new St(Te(e)),g=new yu(y).makeTransferTx(l,h,n,s,o,l);zn(g,f);var w={error:m.SUCCESS,result:"",tx:g.serialize(),txHash:Te(g.getSignContent())};return c&&Be(I()(w),c),f.key="",i="",w}},{key:"eciesDecrypt",value:function(e,t,r,n,a,i){t=this.transformPassword(t);var u=new Gt(e),s=void 0;try{var o=new St(r),c=Buffer.from(n,"base64").toString("hex");s=u.decrypt(t,o,c)}catch(e){var l=this.getDecryptError(e);return i&&Be(I()(l),i),l}var h=new ir,f=a.split(".");h.setKeyPair(s.key);var d={error:0,result:h.dec(f[0],f[1],f[2],32).toString("utf8")};return i&&Be(I()(d),i),d}}]),e}();wu.SERVER_NODE=H,wu.REST_PORT=L,wu.SOCKET_PORT=z,wu.restClient=new Ra,wu.socketClient=new ti;var Au=new St("0000000000000000000000000000000000000007");function Su(e,t,r,n,a,i,u,s){if("number"!=typeof a)throw new Error("Parameter initPos must be number!");Ve(a),"did"===e.substr(0,3)&&(e=we(e));var o=new Cr;return o.add(we(t),n.serialize(),a,e,r),cn("registerCandidate",hn([o]),Au,u,s,i)}function ku(e,t,r,n,a){var i=new Cr;return i.add(we(t),e.serialize()),cn("unRegisterCandidate",hn([i]),Au,n,a,r)}function Eu(e,t,r,n){var a=new Cr;return a.add(we(e)),cn("approveCandidate",hn([a]),Au,r,n,t)}function bu(e,t,r,n){var a=new Cr;return a.add(we(e)),cn("rejectCandidate",hn([a]),Au,r,n,t)}function xu(e,t,r,n,a,i){if(t.length!==r.length)throw m.INVALID_PARAMS;var u=new Cr;u.add(e.serialize()),u.add(t.length);var s=!0,o=!1,c=void 0;try{for(var l,h=ee()(t);!(s=(l=h.next()).done);s=!0){var f=l.value;u.add(we(f))}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}u.add(r.length);var d=!0,v=!1,p=void 0;try{for(var y,g=ee()(r);!(d=(y=g.next()).done);d=!0){var w=y.value;u.add(w)}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return cn("voteForPeer",hn([u]),Au,a,i,n)}function Iu(e,t,r,n,a,i){if(t.length!==r.length)throw m.INVALID_PARAMS;var u=new Cr;u.add(e.serialize()),u.add(t.length);var s=!0,o=!1,c=void 0;try{for(var l,h=ee()(t);!(s=(l=h.next()).done);s=!0){var f=l.value;u.add(we(f))}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}u.add(r.length);var d=!0,v=!1,p=void 0;try{for(var y,g=ee()(r);!(d=(y=g.next()).done);d=!0){var w=y.value;u.add(w)}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return cn("unVoteForPeer",hn([u]),Au,a,i,n)}function Tu(e,t,r,n,a,i){if(t.length!==r.length)throw m.INVALID_PARAMS;var u=new Cr;u.add(e.serialize()),u.add(t.length);var s=!0,o=!1,c=void 0;try{for(var l,h=ee()(t);!(s=(l=h.next()).done);s=!0){var f=l.value;u.add(we(f))}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}u.add(r.length);var d=!0,v=!1,p=void 0;try{for(var y,g=ee()(r);!(d=(y=g.next()).done);d=!0){var w=y.value;u.add(w)}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return cn("withdraw",hn([u]),Au,a,i,n)}function Pu(e,t,r,n,a){var i=new Cr;return i.add(we(t),e.serialize()),cn("quitNode",hn([i]),Au,n,a,r)}function Ru(e,t,r,n,a,i){var u=new Cr;return u.add(we(e),t.serialize(),r),cn("changeMaxAuthorization",hn([u]),Au,a,i,n)}function _u(e,t,r,n,a,i){var u=new Cr;return u.add(we(e),t.serialize(),r),cn("setPeerCost",hn([u]),Au,a,i,n)}function Cu(e,t,r,n){var a=new Cr;return a.add(e.serialize()),cn("withdrawFee",hn([a]),Au,r,n,t)}function Bu(e,t,r,n,a,i){var u=new Cr;u.add(e.serialize()),u.add(t.length);var s=!0,o=!1,c=void 0;try{for(var l,h=ee()(t);!(s=(l=h.next()).done);s=!0){var f=l.value;u.add(we(f))}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}u.add(r.length);var d=!0,v=!1,p=void 0;try{for(var y,m=ee()(r);!(d=(y=m.next()).done);d=!0){var g=y.value;u.add(g)}}catch(e){v=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw p}}return cn("authorizeForPeer",hn([u]),Au,a,i,n)}function Nu(e,t,r,n,a,i){var u=new Cr;u.add(e.serialize()),u.add(t.length);var s=!0,o=!1,c=void 0;try{for(var l,h=ee()(t);!(s=(l=h.next()).done);s=!0){var f=l.value;u.add(we(f))}}catch(e){o=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw c}}u.add(r.length);var d=!0,v=!1,p=void 0;try{for(var y,m=ee()(r);!(d=(y=m.next()).done);d=!0){var g=y.value;u.add(g)}}catch(e){v=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw p}}return cn("unAuthorizeForPeer",hn([u]),Au,a,i,n)}function Du(e,t,r,n,a,i){var u=new Cr;return u.add(we(e),t.serialize(),r),cn("addInitPos",hn([u]),Au,a,i,n)}function Hu(e,t,r,n,a,i){var u=new Cr;return u.add(we(e),t.serialize(),r),cn("reduceInitPos",hn([u]),Au,a,i,n)}function Ou(e,t,r,n){var a=new Cr;return a.add(e.serialize()),cn("withdrawTsg",hn([a]),Au,r,n,t)}var Lu=function(){var e=Tt()(xt.a.mark(function e(t,r){var n,a,i,u,s;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Ra(r),a=Au.toHexString(),i=we("peerAttributes")+t,e.next=5,n.getStorage(a,i);case 5:if(u=e.sent,!(s=u.Result)){e.next=11;break}return e.abrupt("return",ju.deserialize(new _e(s)));case 11:return e.abrupt("return",new ju);case 12:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),zu=function(){var e=Tt()(xt.a.mark(function e(t,r){var n,a,i,u,s;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Ra(r),a=Au.toHexString(),i=we("splitFeeAddress")+t.serialize(),e.next=5,n.getStorage(a,i);case 5:if(u=e.sent,!(s=u.Result)){e.next=11;break}return e.abrupt("return",Yu.deserialize(new _e(s)));case 11:return e.abrupt("return",new Yu);case 12:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Ku=function(){var e=Tt()(xt.a.mark(function e(t,r,n){var a,i,u,s,o;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Ra(n),i=Au.toHexString(),u=we("voteInfoPool")+t+r.serialize(),e.next=5,a.getStorage(i,u);case 5:if(s=e.sent,!(o=s.Result)){e.next=11;break}return e.abrupt("return",Qu.deserialize(new _e(o)));case 11:return e.abrupt("return",new Qu);case 12:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),Uu=function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a,i,u,s;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ra(t),n=Au.toHexString(),a=we("governanceView"),e.next=5,r.getStorage(n,a);case 5:return i=e.sent,u=i.Result,s=Ju.deserialize(new _e(u)),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Mu=function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a,i,u,s,o,c,l,h,f,d;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ra(t),n=Au.toHexString(),e.next=4,Uu(t);case 4:return a=e.sent,i=we("peerPool"),u=xe(a.view,4,!0),s=i+u,e.next=10,r.getStorage(n,s);case 10:for(o=e.sent,c=new _e(o.Result),l=c.readInt(),h={},f=0;f<l;f++)d=qu.deserialize(c),h[d.peerPubkey]=d;return e.abrupt("return",h);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Vu=function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a,i;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ra(t),n=Au.toHexString(),a=we("globalParam"),e.next=5,r.getStorage(n,a);case 5:if(!(i=e.sent).Result){e.next=10;break}return e.abrupt("return",Xu.deserialize(new _e(i.Result)));case 10:return e.abrupt("return",new Xu);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Gu=function(){var e=Tt()(xt.a.mark(function e(t,r){var n,a,i,u;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Ra(r),a=Au.toHexString(),i=we("totalStake")+t.serialize(),e.next=5,n.getStorage(a,i);case 5:if(!(u=e.sent).Result){e.next=10;break}return e.abrupt("return",Zu.deserialize(new _e(u.Result)));case 10:return e.abrupt("return",new Zu);case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Fu=function(){var e=Tt()(xt.a.mark(function e(t,r){var n,a,i,u,s;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gu(t,r);case 2:if((n=e.sent).address){e.next=5;break}return e.abrupt("return",0);case 5:return a=new Ra(r),e.next=8,a.getBlockHeight();case 8:return i=e.sent.Result,e.next=11,a.getBlockJson(i);case 11:return u=e.sent.Result,s=u.Header.Timestamp-Z,e.abrupt("return",Je(n.stake,n.timeOffset,s));case 14:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Wu=function(){var e=Tt()(xt.a.mark(function e(t){var r,n,a,i;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ra(t),n=Au.toHexString(),a=we("vbftConfig"),e.next=5,r.getStorage(n,a);case 5:if(!(i=e.sent).Result){e.next=10;break}return e.abrupt("return",$u.deserialize(new _e(i.Result)));case 10:return e.abrupt("return",new $u);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ju=function(){function e(){A()(this,e),this.view=0,this.height=0,this.txhash=""}return k()(e,[{key:"serialize",value:function(){var e="";return e+=xe(this.view,4,!0),e+=xe(this.height,4,!0),e+=Se(this.txhash)}}],[{key:"deserialize",value:function(t){var r=new e;return r.view=t.readUint32(),r.height=t.readUint32(),r.txhash=t.read(64),r}}]),e}(),qu=function(){function e(){A()(this,e),this.index=0,this.peerPubkey="",this.status=0,this.initPos=0,this.totalPos=0}return k()(e,[{key:"serialize",value:function(){var e="";return e+=xe(this.index,4,!0),e+=ke(this.peerPubkey),e+=this.address.serialize(),e+=xe(this.status),e+=xe(this.initPos,8,!0),e+=xe(this.totalPos,8,!0)}}],[{key:"deserialize",value:function(t){var r=new e;return r.index=t.readInt(),r.peerPubkey=Ae(t.readNextBytes()),r.address=St.deserialize(t),r.status=parseInt(t.read(1),16),r.initPos=t.readLong(),r.totalPos=t.readLong(),r}}]),e}(),ju=function(){function e(){A()(this,e),this.peerPubkey="",this.maxAuthorize=0,this.t2PeerCost=100,this.t1PeerCost=100,this.tPeerCost=0,this.field1="",this.field2="",this.field3="",this.field4=""}return k()(e,[{key:"serialize",value:function(){return""}}],[{key:"deserialize",value:function(t){var r=new e;return r.peerPubkey=Ae(t.readNextBytes()),r.maxAuthorize=t.readLong(),r.t2PeerCost=t.readLong(),r.t1PeerCost=t.readLong(),r.tPeerCost=t.readLong(),t.isEmpty?r:(r.field1=t.readNextBytes(),r.field2=t.readNextBytes(),r.field3=t.readNextBytes(),r.field4=t.readNextBytes(),r)}}]),e}(),Yu=function(){function e(){A()(this,e),this.amount=0}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;return r.address=St.deserialize(t),r.amount=t.readLong(),r}}]),e}(),Qu=function(){function e(){A()(this,e),this.peerPubkey="",this.consensusPos=0,this.freezePos=0,this.newPos=0,this.withdrawPos=0,this.withdrawFreezePos=0,this.withdrawUnfreezePos=0}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;return r.peerPubkey=Ae(t.readNextBytes()),r.address=St.deserialize(t),r.consensusPos=t.readLong(),r.freezePos=t.readLong(),r.newPos=t.readLong(),r.withdrawPos=t.readLong(),r.withdrawFreezePos=t.readLong(),r.withdrawUnfreezePos=t.readLong(),r}}]),e}(),Xu=function(){function e(){A()(this,e)}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e,n=t.readNextBytes(),a=qe.fromHexstr(n).value;r.candidateFee=Number(a);var i=qe.fromHexstr(t.readNextBytes()).value;r.minInitState=Number(i);var u=qe.fromHexstr(t.readNextBytes()).value,s=Number(u);r.candidateNum=s;var o=qe.fromHexstr(t.readNextBytes()).value;r.posLimit=Number(o);var c=qe.fromHexstr(t.readNextBytes()).value,l=Number(c),h=qe.fromHexstr(t.readNextBytes()).value,f=Number(h),d=qe.fromHexstr(t.readNextBytes()).value,v=Number(d),p=qe.fromHexstr(t.readNextBytes()).value,y=Number(p);return r.A=l,r.B=f,r.yita=v,r.penalty=y,r}}]),e}(),Zu=function(){function e(){A()(this,e)}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;return r.address=St.deserialize(t),r.stake=t.readLong(),r.timeOffset=t.readUint32(),r}}]),e}(),$u=function(){function e(){A()(this,e)}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e;return r.N=Pe(t.readNextBytes()).toInt(),r.C=Pe(t.readNextBytes()).toInt(),r.K=Pe(t.readNextBytes()).toInt(),r.L=Pe(t.readNextBytes()).toInt(),r.BlockMsgDelay=Pe(t.readNextBytes()).toInt(),r.HashMsgDelay=Pe(t.readNextBytes()).toInt(),r.PeerHandShakeTimeout=Pe(t.readNextBytes()).toInt(),r.MaxBlockChangeView=Pe(t.readNextBytes()).toInt(),r}}]),e}(),es=function(){function e(){A()(this,e),this.states=[]}return k()(e,[{key:"serialize",value:function(){var e="";e+=xe(this.states.length);for(var t=0;t<this.states.length;t++)e+=this.states[t].serialize();return e}}],[{key:"deserialize",value:function(t){for(var r=new e,n=[],a=t.readNextLen(),i=0;i<a;i++){var u=rs.deserialize(t);n.push(u)}return r.states=n,r}}]),e}(),ts=function(){function e(){A()(this,e)}return k()(e,[{key:"serialize",value:function(){var e="";e+=this.contract,e+=xe(this.states.length);for(var t=0;t<this.states.length;t++)e+=this.states[t].serialize();return e}}],[{key:"deserialize",value:function(t){var r=new e;r.states=[];var n=t.read(20);r.contract=n;for(var a=t.readNextLen(),i=0;i<a;i++){var u=rs.deserialize(t);r.states.push(u)}return r}}]),e}(),rs=function(){function e(t,r,n){A()(this,e);var a=new ue.BigNumber(n);if(!a.isInteger()||a.isNegative())throw m.INVALID_PARAMS;this.from=t,this.to=r,this.value=n}return k()(e,null,[{key:"deserialize",value:function(t){return new e(new St(t.readNextBytes()),new St(t.readNextBytes()),qe.fromHexstr(t.readNextBytes()).value.toString())}}]),k()(e,[{key:"serialize",value:function(){var e="";return e+=Se(this.from.serialize()),e+=Se(this.to.serialize()),e+=Se(new qe(this.value).toHexstr())}}]),e}(),ns=function(){function e(){A()(this,e),this.version="00"}return k()(e,null,[{key:"deserialize",value:function(t){var r=new e,n=t.read(1),a=St.deserialize(t),i=t.readNextBytes(),u=t.readNextBytes();return r.version=n,r.address=a,r.method=Ae(i),r.args=u,r}}]),k()(e,[{key:"serialize",value:function(){var e="";return e+=this.version,e+=this.address.serialize(),e+=ke(this.method),e+=Se(this.args)}}]),e}(),as=function(){function e(t,r,n,a){A()(this,e);var i=new ue.BigNumber(a);if(!i.isInteger()||!i.isNegative())throw m.INVALID_PARAMS;this.sender=t,this.from=r,this.to=n,this.value=a}return k()(e,null,[{key:"deserialize",value:function(t){return new e(new St(t.readNextBytes()),new St(t.readNextBytes()),new St(t.readNextBytes()),qe.fromHexstr(t.readNextBytes()).value.toString())}}]),k()(e,[{key:"serialize",value:function(){var e="";return e+=Se(this.sender.serialize()),e+=Se(this.from.serialize()),e+=Se(this.to.serialize()),e+=Se(new qe(this.value).toHexstr())}}]),e}(),is=function e(t,r){A()(this,e),this.toAcct=t.serialize(),this.tokenId=r},us="init",ss="name",os="symbol",cs="totalSupply",ls="balanceOf",hs="ownerOf",fs="transfer",ds="transferMulti",vs="approve",ps="takeOwnership",ys="queryTokenIDByIndex",ms="queryTokenByID",gs="getApproved",ws=function(){function e(t){A()(this,e),this.contractAddr=t}return k()(e,[{key:"makeInitTx",value:function(e,t,r){return Gn(us,[],this.contractAddr,e,t,r)}},{key:"makeOwnerOfTx",value:function(e){var t=hs,r=[new mr("tokenId",jt.ByteArray,e)];return Gn(t,r,this.contractAddr)}},{key:"makeTransferTx",value:function(e,t,r,n){var a=fs,i=[new mr("toAcct",jt.ByteArray,e.toAcct),new mr("tokenId",jt.ByteArray,e.tokenId)];return Gn(a,i,this.contractAddr,t,r,n)}},{key:"makeTransferMultiTx",value:function(e,t,r,n){var a=[];a.push(we(ds));var i=[],u=!0,s=!1,o=void 0;try{for(var c,l=ee()(e);!(u=(c=l.next()).done);u=!0){var h=c.value;i.push([h.toAcct,h.tokenId])}}catch(e){s=!0,o=e}finally{try{!u&&l.return&&l.return()}finally{if(s)throw o}}a.push(i);var f=Fr(a);return Gn("",f,this.contractAddr,t,r,n)}},{key:"makeApproveTx",value:function(e,t,r,n){var a=vs,i=[new mr("toAcct",jt.ByteArray,e.toAcct),new mr("tokenId",jt.ByteArray,e.tokenId)];return Gn(a,i,this.contractAddr,t,r,n)}},{key:"makeTakeOwnershipTx",value:function(e,t,r,n){var a=ps,i=[new mr("toAcct",jt.ByteArray,e.toAcct),new mr("tokenId",jt.ByteArray,e.tokenId)];return Gn(a,i,this.contractAddr,t,r,n)}},{key:"makeQueryBalanceOfTx",value:function(e){var t=ls,r=[new mr("addr",jt.ByteArray,e.serialize())];return Gn(t,r,this.contractAddr)}},{key:"makeQueryTotalSupplyTx",value:function(){return Gn(cs,[],this.contractAddr)}},{key:"makeQueryTokenIDByIndexTx",value:function(e){var t=ys,r=[new mr("index",jt.Long,e)];return Gn(t,r,this.contractAddr)}},{key:"makeQueryTokenByIDTx",value:function(e){var t=ms,r=[new mr("tokenId",jt.ByteArray,e)];return Gn(t,r,this.contractAddr)}},{key:"makeGetApprovedTx",value:function(e){var t=gs,r=[new mr("tokenId",jt.ByteArray,e)];return Gn(t,r,this.contractAddr)}},{key:"makeQueryNameTx",value:function(){return Gn(ss,[],this.contractAddr)}},{key:"makeQuerySymbolTx",value:function(){return Gn(os,[],this.contractAddr)}}]),e}();r.d(t,"Account",function(){return ia}),r.d(t,"Identity",function(){return Ri}),r.d(t,"Claim",function(){return bi}),r.d(t,"DDO",function(){return mi}),r.d(t,"DDOAttribute",function(){return yi}),r.d(t,"Transaction",function(){return sn}),r.d(t,"Transfer",function(){return on}),r.d(t,"TxSignature",function(){return un}),r.d(t,"Parameter",function(){return mr}),r.d(t,"ParameterType",function(){return jt}),r.d(t,"AbiFunction",function(){return pr}),r.d(t,"AbiInfo",function(){return ri}),r.d(t,"TransactionBuilder",function(){return l}),r.d(t,"TstAssetTxBuilder",function(){return o}),r.d(t,"GovernanceTxBuilder",function(){return v}),r.d(t,"utils",function(){return a}),r.d(t,"scrypt",function(){return i}),r.d(t,"CONST",function(){return n}),r.d(t,"TWallet",function(){return ru}),r.d(t,"SDK",function(){return wu}),r.d(t,"Token",function(){return p}),r.d(t,"TstidContract",function(){return c}),r.d(t,"RestClient",function(){return Ra}),r.d(t,"RpcClient",function(){return Li}),r.d(t,"WebsocketClient",function(){return ti}),r.d(t,"Crypto",function(){return u}),r.d(t,"Struct",function(){return Cr}),r.d(t,"ScriptBuilder",function(){return s}),r.d(t,"NeoCore",function(){return h}),r.d(t,"Oep4",function(){return d}),r.d(t,"Oep8",function(){return f}),r.d(t,"Oep5",function(){return y}),r.d(t,"Html5Websocket",function(){return $a});var As=function(){function e(){A()(this,e),this.Account=ia,this.Identity=Ri,this.Claim=bi,this.DDO=mi,this.DDOAttribute=yi,this.Transaction=sn,this.Transfer=on,this.TxSignature=un,this.TransactionBuilder=l,this.TstAssetTxBuilder=o,this.GovernanceTxBuilder=v,this.Parameter=mr,this.ParameterType=jt,this.AbiFunction=pr,this.AbiInfo=ri,this.utils=a,this.scrypt=i,this.CONST=n,this.TWallet=ru,this.SDK=wu,this.Token=p,this.TstidContract=c,this.RestClient=Ra,this.RpcClient=Li,this.WebsocketClient=ti,this.Crypto=u,this.Struct=Cr,this.ScriptBuilder=s,this.NeoCore=h,this.Oep4=d,this.Oep8=f,this.Oep5=y}return k()(e,[{key:"setNode",value:function(e){this.CONST.TEST_NODE=e}},{key:"setRpcPort",value:function(e){this.CONST.HTTP_JSON_PORT=e}},{key:"setRestPort",value:function(e){this.CONST.HTTP_REST_PORT=e}},{key:"setSocketPort",value:function(e){this.CONST.HTTP_WS_PORT=e}}]),e}();t.default=As}]);
//# sourceMappingURL=index.js.map